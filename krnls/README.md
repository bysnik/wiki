# Установка ядер ALT Linux - Документация

## Обзор процесса

1. Выбор ядра для установки
2. Скачивание минимального набора пакетов
3. Подготовка локального репозитория
4. Создание ISO образа с репозиторием и скриптом
5. Запись ISO на USB/DVD носитель
6. Установка ядра на целевой системе

---

## Шаг 1: Выбор ядра и репозитория

Скрипт разработан для обновления ядра на системах Альт СП, находящихся в закрытом контуре (без доступа к сети Интернет), вследствие чего скрипт предполагает работу ИСКЛЮЧИТЕЛЬНО с заранее подготовленным репозиторием. На текущий момент доступны следующие варианты ядер:

### Доступные варианты:
- **5.10.241-std-def-alt0.c9f.2** (репозиторий CF2)
- **6.12-6.12.41-alt0.c10f.2** (репозиторий c10f2)

### Команды для подготовки репозитория:

Первоначально, необходимо использовать данный скрипт на любой системе Альт с доступом к сети Интернет. Следующая команда скачивает минимальный набор пакетов для установки ядра соответстсвующей ветки. Если необходимо, можно скачать сразу обе ветки.

```bash
# ./kernels.sh repo-c9f2
# ./kernels.sh repo-c10f2
```

---

## Шаг 2: Создание ISO образа

После подготовки репозитория создайте ISO образ:
```bash
# ./kernels.sh create-iso
```

**Размер образа:** от 3.5GB до 8GB в зависимости от выбранного ядра

**Образ содержит:**
- Локальный репозиторий с пакетами ядра
- Скрипт kernels.sh

---

## Шаг 3: Запись на носитель

Запись ISO образа на USB флешку или DVD в интерактивном режиме:
```bash
# ./kernels.sh burn-iso-interactive
```

**Требования к носителю:**
- USB флешка ≥4GB или DVD диск
- Все данные на носителе будут удалены!

---

## Шаг 4: Установка на целевой системе

1. Подключите носитель к целевой системе
2. При необходимости смонтируйте устройство:
   ```bash
   # mount -o auto /dev/sdX1 /mnt && cd /mnt
   ```
3. Запустите установку:
   ```bash
   # ./kernels.sh 5.10    # для ядра 5.10
   # ./kernels.sh 6.12    # для ядра 6.12
   ```

### Процесс установки:
- Временное подключение локального репозитория
- Установка выбранного ядра
- Восстановление оригинальных настроек репозиториев
- Запрос на перезагрузку системы

---

## Важные замечания

✓ **Все действия необходимо выполнять под пользователем root**  
✓ **Интернет не требуется**, так как создается локальный репозиторий  
✓ Скрипт автоматически восстанавливает настройки apt-repo  

---

## Команды для ручной проверки

**Проверка содержимого ISO:**
```bash
ls -la /your_mount_point/
```

**Проверка доступных ядер:**
```bash
update-kernel --list
```

---

**Скрипт разработан для автоматизации установки ядер**