
Операционная система должна иметь возможность установки с DVD-диска и USB-накопителя. Операционная система должна предоставлять варианты сетевой установки: 
- [ ] PXE/TFTP (для режима Legacy/CSM-загрузки) , 
- [x] HTTPClient (для спецификации UEFI 2.5 и выше), 
- [ ] iPXE.

___

Какой главный вывод можно сделать? 

Операционная система мало как влияет на способность установки с диска, флешки или по сети. Тут главную роль играет Способности грузиться в этих вариантах компьютеру, ну и настройки сервера сетевой установки. А grub.cfg переписывать в любом случае придётся (Если речь про сетевую установку)

#### PXE/TFTP (для режима Legacy/CSM-загрузки)
https://www.altlinux.org/NetInstall

- Стенд: PXE Сервер и PXE Client, работает и FTP, и NFS
- Стенд: PXE Сервер и PXE Client: HTTP не заработал, грузится, но в последний момент:
![](/public/img/Рисунок7.png)
![](/public/img/Рисунок8.png)
Как я понимаю по последним логам - почему то не получается смонтировать образ системы
#### HTTPClient (для спецификации UEFI 2.5 и выше)

- Virtual Box не умеет грузиться чисто по http, но умеет virt-manager, пытаюсь поднять стенд. Не всё так просто, информации по Альту нет, да и в принципе в интернете информации минимум, есть более менее гайд по SLES https://documentation.suse.com/sles/15-SP6/html/SLES-all/cha-deployment-prep-uefi-httpboot.html Ну я и фрукт) По факту тупо поднять dhcp-сервер и  парочкой доп параметров и любой http-сервер, пробросив им все файлы, вот и вся запара.
- Нет, конечно есть возможность заставить Virtual Box грузиться по http, но есть ли смысл проверять? (Нужно всего лишь скормить Virtual Box полноценный iPXE Firmware вместо его урезанного)

Используя virt-manager происходит следующее:

![](/public/img/httpt.png)

Аналогично тому, как в виртуал бокс загружается в UEFI PXE (см. ниже)
#### iPXE

Поправочка 1:
Virtual Box
![](/public/img/ipx.png)

Поправочка 2:
libvirt ![](/public/img/ipxelibvirt.png)

ТО есть, суть такая - у обоих вариантов виртуализации в качестве фирмваря PXE используется открытый и своободный iPXE. Далее, используя серверы сетевой установки Альта мы грузимся в стандартном PXE режиме, после чего он подгруждает pxelinux, который является промежуточным загрузчиком. И он работал как надо.

Пытаясь сделать промежуточным загрузчиком iPXE ничего и не начинало работать. Уж не знаю, чисто технически реализуемо использовать iPXE под iPXE, мне кажется да, в виртуалках я это запустить не смог.

Полезная статейка: https://habr.com/ru/companies/selectel/articles/888188/

-  https://www.altlinux.org/Rescue/Deploy#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8

Сервер поднять получилось, теперь две проблемы:
1) Гайд именно по rescue исо образу, сделать его очень запарно, пробую уже готовый вариант, но он не СП
2) Проблема инициализации железа при iPXE в виртуал боксе, буду пробовать в virt-manager
ИТОГО:
![](/public/img/ipxex8664.png)
![](/public/img/ipxe386.png)
![](/public/img/ipxehttp.png)
Это максимум чего я смог добиться в virt-manager, далее просто вылет


### Попытки запустить UEFI PXE
То ли вина в grubx64.efi, то ли проблема в EFI прошивке VirtualBox, но в итоге  я попадаю в grub, но не работает сетевая подсистема из-за чего даже подсоса grub.cfg не происходит https://bugzilla.altlinux.org/40067

![](/public/img/uefipxivirtbox.png)

ОБНОВЛЕНО:
Стенд на libvirt: Simple.PXE.Server и PXE.Client
Заработала UEFI PXE загрузка как по маслу) Единственная мелкая запара с выбором UEFI в libvirt, так как почему то при редактировании XML мне запрещалось отключать Secure Boot, хотя я его и не включал(. Главное - что заработало)
конфигурация виртуального клиента:
![](/public/img/usefipxe.png)


