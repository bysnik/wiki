# AmneziaWG

![](https://docs.amnezia.org/ru/assets/images/OG-5762ed4c3397cbaffc545cb422e052b1.png)

**Amnezia VPN** — это бесплатный и открытый проект, разработанный российскими энтузиастами для обхода интернет-цензуры и защиты приватности пользователей в условиях усиления блокировок и DPI-анализа (глубокой инспекции трафика). В отличие от традиционных VPN-сервисов, Amnezia не предоставляет собственные серверы, а позволяет пользователям развернуть зашифрованный туннель на собственном VPS (виртуальном сервере) с использованием различных протоколов, включая OpenVPN, WireGuard, Shadowsocks, Cloak и другие. Особое внимание в проекте уделяется **маскировке (обфускации) трафика**, чтобы он выглядел как обычный HTTPS, SSH или другой легитимный трафик, что затрудняет его распознавание и блокировку со стороны провайдеров или государственных фильтров.

**AmneziaWG** (Amnezia WireGuard) — это модифицированная версия популярного протокола **WireGuard**, расширенная функциями обфускации. Стандартный WireGuard, несмотря на высокую скорость и надёжность, легко детектируется по характерному UDP-трафику и часто блокируется в странах с жёсткой цензурой (например, в России, Иране, Китае). AmneziaWG решает эту проблему, добавляя **псевдослучайные джиттеры (Jc, Jmin, Jmax)** и **уникальные заголовки (H1–H4)**, а также параметры **S1/S2**, которые изменяют структуру пакетов, делая их похожими на обычный шум или легитимный трафик. При этом сохраняются все преимущества WireGuard: минимальная задержка, высокая производительность и простота настройки.

Важной особенностью AmneziaWG является наличие **нативной поддержки на уровне ядра Linux** через специальный kernel module. Это позволяет обрабатывать обфусцированный трафик напрямую в ядре, без необходимости запуска пользовательских демонов (вроде `amneziawg-go`), что повышает скорость, снижает потребление ресурсов и улучшает стабильность соединения. Конфигурация AmneziaWG выглядит почти как у обычного WireGuard, но включает дополнительные поля (`S1`, `S2`, `Jc`, `Jmin`, `Jmax`, `H1–H4`), которые **должны быть одинаковыми на клиенте и сервере** (за исключением параметров джиттера). Таким образом, AmneziaWG сочетает в себе **высокую степень скрытности** и **производительность на уровне ядра**, что делает его одним из самых эффективных решений для обхода современных систем блокировки.

## Устнаовка

1. Устанавливаем необходимые пакеты (я тут их с перебором бахнул) ):

```bash
apt-get install amnezia-vpn-client kernel-modules-amneziawg-6.12
```

```bash
apt-get install amnezia-vpn-service amneziawg-go amneziawg-tools
```

2. Настраиваем systemd-resolved (https://bugzilla.altlinux.org/52679)
```bash
apt-get install systemd-networkd
```
```bash
systemctl enable --now systemd-resolved
```
```bash
ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
```

3. Запускаем сервис:
```bash
systemctl enable --now AmneziaVPN
```

4. Перезагружаем систему.

5. Теперь входим в графическое приложение как обычно через меню приложений.

## Настройка сервера OpenVPN, WireGuard, Shadowsocks, IKEv2/IPSec и Cloak, L2TP/IPSec, PPTP, OpenConnect VPN, SSTP, XRay Reality, MPLS, VLESS, L2TP, FreeLAN SSL P2. Помимо VLESS существуют и другие защищённые протоколы, такие как Trojan, Cloak, ShadowTLS, Hysteria/Hysteria2, mKCP и прочие...

Графическая панель 3X-UI X‑UI, Marzban, Hiddify — так называемые «панели», веб‑интерфейсы для прокси‑серверов. В их основе чаще всего используется тот же самый XRay. Изначально задуманы как более простой в установке и настройке вариант сервера для неподкованных пользователей. 3X-UI - легко устанавливается в Docker, сразу на английском с возможностью переключения на русский, имеет в себе все что надо - и главное, работает!

Однако, эти панели при неправильном управлении добавляют множество уязвимостей и могут привести к блокировке. Хоть в этой инструкции я и привожу пример настройки через панель 3X-UI и стараюсь её обезопасить, всё же рекомендую настраивать XRay напрямую через консоль.

___

Попробовал запустить сервер с помощью Amnezia VPN Client, как собственно и описывается везде в инструкциях по амнезии. Установил XRay. С чем столкнуля? 1. В судоерс раскомментировал строку с wheel no passwd (возможно, можно и без нопассвд), также установил и запустил Докер. И он завёлся)

Просто дал Амнезии логин и пароль от рута, ну и, естественно, включил и настроил ссш для рута

А вот с подключением к серверу уже траблы пошли. У меня сервер на виртуалке в VM VB, а подключаюсь с хоста. Чёт крутится подключение, но не подключается. ВОЗМОЖНО, виной всему тот прикол, что у меня два сетевых адаптера (стандартный нат и внутренний адаптер хоста) ИЛИ всё из-за того, что у меня был выключен сервис AmneziaVPN)