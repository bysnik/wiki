import{_ as i,c as a,o as l,ag as t}from"./chunks/framework.D4Vqf8I7.js";const o=JSON.parse('{"title":"GitLab","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/gitlab.md","filePath":"docs/wi/gitlab.md","lastUpdated":1760612412000}'),n={name:"docs/wi/gitlab.md"};function e(p,s,h,k,r,g){return l(),a("div",null,s[0]||(s[0]=[t(`<h1 id="gitlab" tabindex="-1">GitLab <a class="header-anchor" href="#gitlab" aria-label="Permalink to &quot;GitLab&quot;">​</a></h1><p><img src="https://www.cloud4y.ru/upload/medialibrary/e26/wimpb5f0qo1phuokcqzjmzi0yuam2pke/gitlab.png" alt=""></p><p>GitLab — это единая платформа для DevOps с открытым исходным кодом, которая предоставляет полный набор инструментов для всего жизненного цикла разработки программного обеспечения: от планирования задач и управления исходным кодом (Git-репозитории) до непрерывной интеграции и поставки (CI/CD), мониторинга и безопасности. В отличие от разрозненных решений, GitLab объединяет возможности управления проектами, репозиториями, трекера проблем, CI/CD-пайплайнов, контейнерного реестра и развертывания в одной интегрированной среде, что способствует повышению скорости, эффективности и коллаборации между командами разработки, эксплуатации и безопасности. Платформа доступна в облачной (SaaS) и самостоятельной (self-hosted) версиях, предлагая гибкость выбора для различных бизнес-потребностей.</p><p><a href="https://crowdin.com/project/gitlab-ee/ru" target="_blank" rel="noreferrer">Прогресс перевода GitLab на русский язык</a></p><h2 id="установка-gitlab-с-помощью-docker" tabindex="-1">Установка GitLab с помощью Docker <a class="header-anchor" href="#установка-gitlab-с-помощью-docker" aria-label="Permalink to &quot;Установка GitLab с помощью Docker&quot;">​</a></h2><p>Чтобы установить GitLab в контейнер Docker, используйте режим Docker Compose, Docker Engine или Docker Swarm.</p><p>Предпосылки:</p><ul><li>У вас должна быть работающая установка Docker, отличная от Docker для Windows. Docker для Windows официально не поддерживается, поскольку образы имеют известные проблемы совместимости с правами доступа к томам и потенциально другие неизвестные проблемы. Если вы пытаетесь запустить Docker для Windows, см. страницу получения помощи . Эта страница содержит ссылки на ресурсы сообщества (например, IRC или форумы), где вы можете обратиться за помощью к другим пользователям.</li><li>Вам потребуется почтовый транспортный агент (MTA), например Postfix или Sendmail. Образы GitLab не содержат MTA. Вы можете установить MTA в отдельном контейнере. MTA можно установить в том же контейнере, что и GitLab, но вам может потребоваться переустанавливать MTA после каждого обновления или перезапуска.</li><li>Не стоит планировать развертывание образа GitLab Docker в Kubernetes, так как это создаст единую точку отказа. Если вы хотите развернуть GitLab в Kubernetes, используйте вместо этого Helm Chart или GitLab Operator . Для установки Docker необходимо иметь допустимое, внешне доступное имя хоста. Не используйте localhost.</li></ul><h3 id="установка-gitlab-с-помощью-docker-compose" tabindex="-1">Установка GitLab с помощью Docker Compose <a class="header-anchor" href="#установка-gitlab-с-помощью-docker-compose" aria-label="Permalink to &quot;Установка GitLab с помощью Docker Compose&quot;">​</a></h3><p>С помощью Docker Compose вы можете настроить, установить и обновить вашу установку GitLab на основе Docker:</p><p>Установить Docker Compose</p><p>Создайте docker-compose.yml файл. Например:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  gitlab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab/gitlab-ee:&lt;version&gt;-ee.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gitlab.example.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      GITLAB_OMNIBUS_CONFIG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        # Add any other gitlab.rb configuration here, each on its own line</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        external_url &#39;https://gitlab.example.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;80:80&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;443:443&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;22:22&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/config:/etc/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/logs:/var/log/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/data:/var/opt/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    shm_size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;256m&#39;</span></span></code></pre></div><p>Вот ещё один docker-compose.yml пример с GitLab, работающим на настраиваемом порту HTTP и SSH. Обратите внимание, что GITLAB_OMNIBUS_CONFIG переменные соответствуют ports разделу:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  gitlab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab/gitlab-ee:&lt;version&gt;-ee.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gitlab</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gitlab.example.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      GITLAB_OMNIBUS_CONFIG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        external_url &#39;http://gitlab.example.com:8929&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 2424</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;8929:8929&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;443:443&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2424:22&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/config:/etc/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/logs:/var/log/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$GITLAB_HOME/data:/var/opt/gitlab&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    shm_size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;256m&#39;</span></span></code></pre></div><p>Эта конфигурация аналогична использованию --publish 8929:8929 --publish 2424:22.</p><p>В том же каталоге, что и docker-compose.yml, запустите GitLab:</p><p>оболочка docker compose up -d</p><p>Некоторые конфиги gitlab.rb</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">GITLAB_OMNIBUS_CONFIG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        external_url &#39;&lt;https://gitlab.DOMAIN&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        pages_external_url &#39;&lt;http://pages.DOMAIN&gt;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        # SMTP Mail Configuration</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_pool&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_enable&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_address&#39;] = &quot;smtp.gmail.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_port&#39;] = 587</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_user_name&#39;] = &quot;&lt;EMAIL&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_password&#39;] = &quot;&lt;PASSWORD&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_domain&#39;] = &quot;smtp.gmail.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_authentication&#39;] = &quot;login&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_tls&#39;] = false</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;smtp_openssl_verify_mode&#39;] = &#39;peer&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        # Gmail Incoming Mail Configuration</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_enabled&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_address&#39;] = &quot;income+%{key}@gmail.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_email&#39;] = &quot;&lt;EMAIL&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_password&#39;] = &quot;&lt;PASSWORD&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_host&#39;] = &quot;imap.gmail.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_port&#39;] = 993</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_ssl&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_start_tls&#39;] = false</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_mailbox_name&#39;] = &quot;inbox&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_idle_timeout&#39;] = 60</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;incoming_email_expunge_deleted&#39;] = true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_pages[&#39;enable&#39;] = true</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        letsencrypt[&#39;contact_emails&#39;] = [&#39;&lt;CONTACT-EMAIL&gt;&#39;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        alertmanager[&#39;admin_email&#39;] = &#39;&lt;ADMIN-EMAIL&gt;&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = &lt;PORT&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        # Add any other gitlab.rb configuration here, each on its own line</span></span></code></pre></div><h3 id="установка-gitlab-с-помощью-docker-engine" tabindex="-1">Установка GitLab с помощью Docker Engine <a class="header-anchor" href="#установка-gitlab-с-помощью-docker-engine" aria-label="Permalink to &quot;Установка GitLab с помощью Docker Engine&quot;">​</a></h3><p>Кроме того, вы можете установить GitLab с помощью Docker Engine.</p><p>Если вы настроили GITLAB_HOME переменную, настройте каталоги в соответствии с вашими требованиями и запустите образ:</p><p>Если вы не используете SELinux, выполните следующую команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --detach</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GITLAB_OMNIBUS_CONFIG=&quot;external_url &#39;http://gitlab.example.com&#39;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 443:443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 80:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 22:22</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $GITLAB_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/config:/etc/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $GITLAB_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/logs:/var/log/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $GITLAB_HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/data:/var/opt/gitlab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --shm-size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 256m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  gitlab/gitlab-ee:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-ee.0</span></span></code></pre></div><p>Эта команда загружает и запускает контейнер GitLab, а также публикует порты, необходимые для доступа по SSH, HTTP и HTTPS. Все данные GitLab хранятся в подкаталогах $GITLAB_HOME. Контейнер автоматически перезапускается после перезагрузки системы.</p><p>Если вы используете интеграцию с Kerberos , необходимо также опубликовать порт Kerberos (например, --publish 8443:8443). В противном случае операции Git с Kerberos будут недоступны. Процесс инициализации может занять много времени. Вы можете отслеживать этот процесс с помощью:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span></span></code></pre></div><p>После запуска контейнера вы можете перейти по ссылке gitlab.example.com. Прежде чем Docker-контейнер начнёт отвечать на запросы, может пройти некоторое время.</p><p>Перейдите по URL-адресу GitLab и войдите в систему, используя имя пользователя root и пароль из следующей команды:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gitlab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Password:&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/gitlab/initial_root_password</span></span></code></pre></div><p>Файл паролей автоматически удаляется при первом перезапуске контейнера через 24 часа.</p><h2 id="установка-bare-metal" tabindex="-1">Установка bare-metal <a class="header-anchor" href="#установка-bare-metal" aria-label="Permalink to &quot;Установка bare-metal&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">Заморозка</p><p>Установка из исходников сложна в виду проверки всех зависимостей в Альт линукс, поэтому пока что я не буду его описывать.</p></div><p>Вы можете настроить первоначальную установку, настроив переменные окружения перед установкой.</p><h3 id="доступные-переменные-среды" tabindex="-1">Доступные переменные среды <a class="header-anchor" href="#доступные-переменные-среды" aria-label="Permalink to &quot;Доступные переменные среды&quot;">​</a></h3><p>Вы можете настроить установку GitLab, установив следующие необязательные переменные среды. Эти переменные действуют только во время первой установки и не влияют на последующие перенастройки. Для существующих установок используйте пароль из <code>/etc/gitlab/initial_root_password</code> или сбросьте пароль <code>root</code>.</p><table tabindex="0"><thead><tr><th style="text-align:left;">Переменная</th><th style="text-align:left;">Цель</th><th style="text-align:left;">Необходимый</th><th style="text-align:left;">Пример</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>EXTERNAL_URL</code></strong></td><td style="text-align:left;">Устанавливает внешний URL для вашего экземпляра GitLab.</td><td style="text-align:left;">Рекомендуется</td><td style="text-align:left;"><code>EXTERNAL_URL=&quot;https://gitlab.example.com&quot;</code></td></tr><tr><td style="text-align:left;"><strong><code>GITLAB_ROOT_EMAIL</code></strong></td><td style="text-align:left;">Пользовательский адрес электронной почты для учетной записи администратора <code>root</code>.</td><td style="text-align:left;">Необязательный</td><td style="text-align:left;"><code>GITLAB_ROOT_EMAIL=&quot;admin@example.com&quot;</code></td></tr><tr><td style="text-align:left;"><strong><code>GITLAB_ROOT_PASSWORD</code></strong></td><td style="text-align:left;">Пользовательский пароль (минимум 8 символов) для учетной записи администратора <code>root</code>.</td><td style="text-align:left;">Необязательный</td><td style="text-align:left;"><code>GITLAB_ROOT_PASSWORD=&quot;strongpassword&quot;</code></td></tr></tbody></table><p>Если вы не настроили учетные данные root во время установки:</p><ul><li>GitLab генерирует случайный пароль и адрес электронной почты для учетной записи администратора root.</li><li>Пароль хранится <code>/etc/gitlab/initial_root_password</code> в течение 24 часов.</li><li>Через 24 часа этот файл автоматически удаляется из соображений безопасности.</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Хотя вы также можете установить начальный пароль, <code>/etc/gitlab/gitlab.rb</code> установив <code>gitlab_rails[&#39;initial_root_password&#39;] = &quot;password&quot;</code>, это не рекомендуется. Если вы всё же устанавливаете пароль этим способом, обязательно удалите его из, <code>/etc/gitlab/gitlab.rb</code> так как он будет считан только при первой перенастройке после установки пакета.</p></div>`,41)]))}const F=i(n,[["render",e]]);export{o as __pageData,F as default};
