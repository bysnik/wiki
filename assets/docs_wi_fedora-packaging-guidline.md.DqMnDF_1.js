import{_ as i,c as s,o,ag as a,j as e}from"./chunks/framework.D4Vqf8I7.js";const g=JSON.parse('{"title":"Fedora Packaging Guidelines","description":"Learn more about Fedora Linux, the Fedora Project & the Fedora Community.","frontmatter":{"title":"Fedora Packaging Guidelines","source":"https://docs.fedoraproject.org/ru/packaging-guidelines/","author":["[[Fedora Docs]]"],"published":null,"created":"2025-09-24T00:00:00.000Z","description":"Learn more about Fedora Linux, the Fedora Project & the Fedora Community.","tags":["clippings"]},"headers":[],"relativePath":"docs/wi/fedora-packaging-guidline.md","filePath":"docs/wi/fedora-packaging-guidline.md","lastUpdated":1759833904000}'),n={name:"docs/wi/fedora-packaging-guidline.md"};function r(l,t,c,p,d,h){return o(),s("div",null,t[0]||(t[0]=[a(`<p>The Packaging Guidelines are a collection of common issues and the severity that should be placed on them. While these guidelines should not be ignored, they should also not be blindly followed. If you think that your package should be exempt from part of the Guidelines, please bring the issue to the <a href="https://pagure.io/packaging-committee" target="_blank" rel="noreferrer">Fedora Packaging Committee</a>.</p><p>These documents cover the fine details of acceptable Fedora packaging and while they may include various examples they will not be particularly useful as a tutorial. They also do not cover the details and policies relating to gaining access to the Fedora repositories as a packager, or the mechanics of actually creating and releasing packages as part of the distribution. For documents which cover those issues, please see the following:</p><ul><li><a href="https://docs.fedoraproject.org/en-US/package-maintainers/Joining_the_Package_Maintainers/" target="_blank" rel="noreferrer">Join the Package Maintainers</a></li><li><a href="https://docs.fedoraproject.org/en-US/package-maintainers/New_Package_Process_for_Existing_Contributors/" target="_blank" rel="noreferrer">New Package Process for Existing Contributors</a></li><li><a href="https://docs.fedoraproject.org/en-US/package-maintainers/Packaging_Tutorial/" target="_blank" rel="noreferrer">Packaging Tutorial</a></li></ul><p>It is the package reviewer’s responsibility to point out specific problems with a package and a packager’s responsibility to deal with those issues. The reviewer and packager work together to determine the severity of the issues (whether they block a package or can be worked on after the package is in the repository.) Please remember that any package that you submit must also conform to the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/ReviewGuidelines/" target="_blank" rel="noreferrer">Review Guidelines</a>.</p><p>The original author of these documents is <a href="https://fedoraproject.org/wiki/TomCallaway" target="_blank" rel="noreferrer">Tom &#39;spot&#39; Callaway</a>, though they were originally based on many other documents. They have been significantly modified over the years by many members of the Packaging Committee.</p><p>The key words MUST, MUST NOT, SHOULD, SHOULD NOT, and MAY in these guidelines are to be interpreted as described in <a href="https://www.rfc-editor.org/rfc/rfc2119" target="_blank" rel="noreferrer">RFC 2119</a>.</p><p>Report issues with these guidelines, including typos,<a href="https://pagure.io/packaging-committee" target="_blank" rel="noreferrer">here</a>.</p><h2 id="applicability" tabindex="-1">Applicability <a class="header-anchor" href="#applicability" aria-label="Permalink to &quot;Applicability&quot;">​</a></h2><p>In general, these guidelines apply to the currently released, non-end-of-life versions of Fedora, as well as the development version of Fedora (Rawhide). If a particular portion of these guidelines is relevant only to a subset of those releases, this will be specifically noted. However, please note that Rawhide can change rapidly, and there will be times when changes are visible there which are not yet reflected here.</p><p>The guidelines also to some degree cover packages for EPEL, but only when combined with the <a href="https://docs.fedoraproject.org/en-US/epel/epel-packaging/" target="_blank" rel="noreferrer">EPEL packaging guidelines</a>. Fedora packaging changes far more rapidly than EPEL packaging, so over time these guidelines will drift further away from any particular EPEL release and for the older supported EPEL release the differences can be quite significant. Portions of these guidelines which do not apply to EPEL will not generally be indicated.</p><h2 id="general-exception-policy" tabindex="-1">General Exception Policy <a class="header-anchor" href="#general-exception-policy" aria-label="Permalink to &quot;General Exception Policy&quot;">​</a></h2><p>As these guidelines can never cover all possible contingencies, there will always be packages which need exceptions. It is the packager’s responsibility to follow these guidelines as closely as is feasible and to clearly document, as comments in the package specfile, instances where they cannot be followed.</p><p>If, in a guideline, the language &quot;should&quot; or &quot;is suggested&quot; is used and it is not feasible for the package to conform to that guideline, the packager may deviate from the it. The nature of the deviation and the reasoning behind it MUST be documented in the specfile.</p><p>Where the language &quot;must&quot;, &quot;is required to&quot; or &quot;needs to&quot; is used, the packager may deviate from the guideline only with approval from the packaging committee. Please follow the procedure at the <a href="https://fedoraproject.org/wiki/Packaging_Committee#Bringing_Issues_to_the_Committee" target="_blank" rel="noreferrer">Packaging Committee</a> page for making these requests.</p><h2 id="allowed-packages" tabindex="-1">Allowed Packages <a class="header-anchor" href="#allowed-packages" aria-label="Permalink to &quot;Allowed Packages&quot;">​</a></h2><p>Please review <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/what-can-be-packaged/" target="_blank" rel="noreferrer">What Can Be Packaged</a> to ensure that what is to be packaged is allowed in Fedora.</p><h2 id="naming" tabindex="-1">Naming <a class="header-anchor" href="#naming" aria-label="Permalink to &quot;Naming&quot;">​</a></h2><p>You should go through the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Naming/" target="_blank" rel="noreferrer">Naming Guidelines</a> to ensure that your package is named appropriately.</p><h2 id="version-and-release" tabindex="-1">Version and Release <a class="header-anchor" href="#version-and-release" aria-label="Permalink to &quot;Version and Release&quot;">​</a></h2><p>Documentation covering the proper way to use the Version and Release fields can be found <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Versioning/" target="_blank" rel="noreferrer">here</a>.</p><h2 id="licensing" tabindex="-1">Licensing <a class="header-anchor" href="#licensing" aria-label="Permalink to &quot;Licensing&quot;">​</a></h2><p>You should review the information regarding <a href="https://docs.fedoraproject.org/ru/legal/license-approval/" target="_blank" rel="noreferrer">licenses determined to be allowed in Fedora</a> and the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/LicensingGuidelines/" target="_blank" rel="noreferrer">Licensing Guidelines</a> to ensure that your package is licensed appropriately and that the license is properly indicated.</p><h3 id="fedora-trademarks" tabindex="-1">Fedora Trademarks <a class="header-anchor" href="#fedora-trademarks" aria-label="Permalink to &quot;Fedora Trademarks&quot;">​</a></h3><p>Packagers <strong>MUST NOT</strong> add any Fedora trademark assets including the Fedora logo, Fedora logo icons, or graphics that include the Fedora logo. Those assets <strong>MUST</strong> be added to the fedora-logos package. Your packages(s) install the logos by depending on the fedora-logos package. If the upstream contains Fedora trademark assets that you believe are used inappropriately, email <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/" target="_blank" rel="noreferrer">legal@fedoraproject.org</a></p><p>This is because the Fedora logo is a trademark, which are handled under a different legal framework than code. It must only be distributed under terms that protect the trademark. Keeping Fedora trademarks separate in their own package instead of scattered across various other packages is also an essential practice for enabling remixes that necessarily must <a href="https://fedoraproject.org/wiki/Legal:Trademark_guidelines#Secondary_Mark" target="_blank" rel="noreferrer">not use the Fedora trademark</a>, and instead roll their own *-logos package or use the generic-logos package.</p><h2 id="libraries-and-applications" tabindex="-1">Libraries and Applications <a class="header-anchor" href="#libraries-and-applications" aria-label="Permalink to &quot;Libraries and Applications&quot;">​</a></h2><p>Many language- or domain-specific guidelines refer to &quot;libraries&quot;, &quot;modules&quot;, &quot;plug-ins&quot; or other terms specific to the language or domain. This is specifically important to package naming. Some applications may include libraries, and some libraries may include applications, so the distinction is not always clear.</p><h3 id="library-or-application" tabindex="-1">Library or Application? <a class="header-anchor" href="#library-or-application" aria-label="Permalink to &quot;Library or Application?&quot;">​</a></h3><ul><li>If the primary purpose of a package is to provide executables to be run by users, it SHOULD be packaged as an application. If it also includes libraries which may be imported or linked to by other code, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#_mixed_use_packages" target="_blank" rel="noreferrer">Mixed Use Packages</a> below.</li><li>If the primary purpose of a package is to provide libraries intended to be imported or loaded into other code, it is considered a library and MUST be packaged as such. If it contains utility programs that can be run by users as well, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#_mixed_use_packages" target="_blank" rel="noreferrer">Mixed Use Packages</a> below.</li></ul><p>It is left to the packager to determine the primary purpose of a package. Often times upstream will already have done this with their choice of naming and that choice SHOULD be followed by the Fedora packager.</p><h3 id="mixed-use-packages" tabindex="-1">Mixed Use Packages <a class="header-anchor" href="#mixed-use-packages" aria-label="Permalink to &quot;Mixed Use Packages&quot;">​</a></h3><p>Many packages, regardless of their primary purpose, include both applications and libraries. In this case one or both SHOULD be packaged in subpackages in order to allow other applications to depend on only the library and not the associated application(s). Installing an application that depends on a library or service should not automatically pull in other applications associated with that library or service.</p><h2 id="package-independence" tabindex="-1">Package Independence <a class="header-anchor" href="#package-independence" aria-label="Permalink to &quot;Package Independence&quot;">​</a></h2><p>Packages SHOULD be installable independently whenever this is technically feasible, but they MUST specify dependencies of correct type on other packages if necessary, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#_dependency_types" target="_blank" rel="noreferrer">Dependency Types</a> below.</p><p>Desktop applications MUST NOT depend on other desktop applications unless strictly required. In particular, packages that contain a visible <code>.desktop</code> file (a <code>.desktop</code> file that does not contain the line <code>NoDisplay=true</code>) SHOULD NOT have a <code>Requires</code>,<code>Recommends</code>, or <code>Supplements</code> on any other package containing a visible desktop file, directly or indirectly.</p><p>For example, it would be reasonable for a video game level editor to require the associated video game in order to function, or for an application’s plugin to require the associated application. But it would not be reasonable for an application that happens to use a database library to depend on a database management suite associated with that library, or for an application that happens to use a particular programming language to depend on management tools associated with that programming language.</p><p>If a source package provides multiple graphical applications, those applications SHOULD be packaged in separate subpackages when feasible.</p><h2 id="spec-files" tabindex="-1">Spec Files <a class="header-anchor" href="#spec-files" aria-label="Permalink to &quot;Spec Files&quot;">​</a></h2><p>The spec file (&quot;spec&quot;) is a fundamental element in the packaging workflow. Any change that is made to the package will include a change to the spec. Because packages in Fedora are maintained by a community of packagers as well as automated tooling, it is important for the specs to follow certain conventions. The bulk of these packaging guidelines involves what goes into a spec, but here are a few general items.</p><h3 id="spec-file-naming" tabindex="-1">Spec File Naming <a class="header-anchor" href="#spec-file-naming" aria-label="Permalink to &quot;Spec File Naming&quot;">​</a></h3><p>The spec file MUST be named <code>%{name}.spec</code>. That is, if your package is named <code>example</code>, the spec file must be named <code>example.spec</code>.</p><h3 id="spec-legibility" tabindex="-1">Spec Legibility <a class="header-anchor" href="#spec-legibility" aria-label="Permalink to &quot;Spec Legibility&quot;">​</a></h3><p>All spec files MUST be legible and maintained in such a way that the community of packagers is able to understand and work with them.</p><p>To help facilitate legibility, only macros and conditionals for Fedora and EPEL are allowed to be used in Fedora Packages. Use of macros and conditionals for other distributions, including Fedora derivatives, is not permitted in spec files of packages in the main Fedora repositories unless those macros and conditionals are also present in Fedora.</p><h3 id="spec-file-encoding" tabindex="-1">Spec File Encoding <a class="header-anchor" href="#spec-file-encoding" aria-label="Permalink to &quot;Spec File Encoding&quot;">​</a></h3><p>Unless you need to use characters outside the <a href="https://commons.wikimedia.org/wiki/File:Ascii_full.png" target="_blank" rel="noreferrer">ASCII repertoire</a>, you will not need to be concerned about the encoding of the spec file. If you do need non-ASCII characters, save your spec files as UTF-8. If you’re in doubt as to what characters are ASCII, please refer to <a href="https://commons.wikimedia.org/wiki/File:Ascii_full.png" target="_blank" rel="noreferrer">this chart</a>.</p><h4 id="non-ascii-filenames" tabindex="-1">Non-ASCII Filenames <a class="header-anchor" href="#non-ascii-filenames" aria-label="Permalink to &quot;Non-ASCII Filenames&quot;">​</a></h4><p>Similarly, filenames that contain non-ASCII characters must be encoded as UTF-8. Since there’s no way to note which encoding the filename is in, using the same encoding for all filenames is the best way to ensure users can read the filenames properly. If upstream ships filenames that are not encoded in UTF-8 you can use a utility like convmv (from the convmv package) to convert the filename in your %install section.</p><h3 id="spec-maintenance-and-canonicity" tabindex="-1">Spec Maintenance and Canonicity <a class="header-anchor" href="#spec-maintenance-and-canonicity" aria-label="Permalink to &quot;Spec Maintenance and Canonicity&quot;">​</a></h3><p>Fedora’s git repository is the canonical location for Fedora spec files. Maintainers MUST expect that other maintainers and automated tooling will make changes to their packages, potentially without communicating prior to doing so (though communication is always encouraged). If some maintainers are also attempting to keep copies of a spec in an outside repository, they MUST be prepared to merge changes made to the spec in Fedora’s repository, and MUST NOT overwrite those changes with a copy from an external repository or using <code>fedpkg import</code>.</p><h2 id="source-file-verification" tabindex="-1">Source File Verification <a class="header-anchor" href="#source-file-verification" aria-label="Permalink to &quot;Source File Verification&quot;">​</a></h2><p>Where the upstream project publishes OpenPGP signatures of their releases, Fedora packages <strong>SHOULD</strong> verify that signature as part of the RPM build process.</p><p>Although a checksum in the sources file certifies that a file retreived from the lookaside cache is the one that the packager uploaded, it is silent on whether the file is what the upstream project released. A signature by the upstream developers certifies that the source is identical to what they released. Verifying the signature as part of the build ensures that packagers don’t forget to verify it.</p><h3 id="obtaining-the-correct-keys" tabindex="-1">Obtaining the Correct Keys <a class="header-anchor" href="#obtaining-the-correct-keys" aria-label="Permalink to &quot;Obtaining the Correct Keys&quot;">​</a></h3><p>The verification method requires one or more OpenPGP keyring files with public keys from the upstream project. The keyrings shall together contain all the keys that are trusted to certify the authenticity of the sources, and <strong>MUST NOT</strong> contain any other keys.</p><p>Ideally the upstream project publishes such a keyring as a downloadable file. You shall download that file and do everything you reasonably can to verify that it is authentic. Then you shall add it unmodified to the package SCM, and provide its URL in the spec file so that others can verify it. The URL <strong>MUST</strong> use HTTPS or a similarly authenticated protocol if at all possible.</p><p>Even if you are unable to verify the key at the first addition, it still enhances security in a trust-on-first-use way. It will ensure that future attacks will be detected if the key is the right one, or that a current attack will be detected later if future releases are signed by the correct key.</p><h3 id="verifying-signatures" tabindex="-1">Verifying Signatures <a class="header-anchor" href="#verifying-signatures" aria-label="Permalink to &quot;Verifying Signatures&quot;">​</a></h3><p>When source file verification is done, it <strong>MUST</strong> be done first in the <code>%prep</code> section of the spec file, before any potentially compromised code is executed. The verification <strong>MUST</strong> be done with the macro <code>%{gpgverify}</code>, which expands into a command whose parameters shall be the pathnames of the keyring, the signature and the signed file.<code>BuildRequires: gpgverify</code> is necessary for the verification to work.</p><p>Any detached signature file (e.g. foo.tar.gz.asc or foo.tar.gz.sig) must be uploaded to the package lookaside cache alongside the source code, while the keyring must be committed directly to the package SCM.</p><p>The following format must be used:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Source0: ftp://ftp.example.com/pub/foo/%{name}-%{version}.tar.gz</span></span>
<span class="line"><span>Source1: ftp://ftp.example.com/pub/foo/%{name}-%{version}.tar.gz.asc</span></span>
<span class="line"><span>Source2: https://www.example.com/gpgkey-0123456789ABCDEF0123456789ABCDEF.gpg</span></span>
<span class="line"><span>…</span></span>
<span class="line"><span>BuildRequires: gpgverify</span></span>
<span class="line"><span>…</span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>%{gpgverify} --keyring=&#39;%{SOURCE2}&#39; --signature=&#39;%{SOURCE1}&#39; --data=&#39;%{SOURCE0}&#39;</span></span></code></pre></div><p>rpm-spec</p><p>The first source is the actual tarball, the second one is the signature from upstream, and the third one is the keyring.</p><h3 id="exceptions" tabindex="-1">Exceptions <a class="header-anchor" href="#exceptions" aria-label="Permalink to &quot;Exceptions&quot;">​</a></h3><p>If the upstream tarball of a package needs to be modified, for example because it contains forbidden items, then the tarball cannot be verified as part of the build process. In this case the upstream OpenPGP keyring must still be included in the package SCM and the instructions/script used to build the stripped-down tarball needs to verify the upstream source.</p><p>If the upstream project does not publish a keyring file (for example if they publish only a fingerprint on their website and refer to a keyserver network for downloading the key), then you may need to create a keyring after you have verified the key. In this case there is no upstream URL to the keyring, so instead you should document how you created the keyring in a comment in the spec file. A minimal keyring with the key with the fingerprint <code>7D33D762FD6C35130481347FDB4B54CBA4826A18</code> can be created with the following command:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>gpg2 --export --export-options export-minimal 7D33D762FD6C35130481347FDB4B54CBA4826A18 &gt; gpgkey-7D33D762FD6C35130481347FDB4B54CBA4826A18.gpg</span></span></code></pre></div><p>If upstream signed a tarball differently, for example by signing only the uncompressed tarball but distributing a compressed version, then the verification step must be adjusted accordingly, for example:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Source0: ftp://ftp.example.com/pub/foo/%{name}-%{version}.tar.xz</span></span>
<span class="line"><span>Source1: ftp://ftp.example.com/pub/foo/%{name}-%{version}.tar.asc</span></span>
<span class="line"><span>Source2: https://www.example.com/gpgkey-0123456789ABCDEF0123456789ABCDEF.gpg</span></span>
<span class="line"><span>…</span></span>
<span class="line"><span>BuildRequires: gpgverify xz</span></span>
<span class="line"><span>…</span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>xzcat &#39;%{SOURCE0}&#39; | %{gpgverify} --keyring=&#39;%{SOURCE2}&#39; --signature=&#39;%{SOURCE1}&#39; --data=-</span></span></code></pre></div><p>rpm-spec</p><p>If the data and the signature are combined in a single file, then the signed data must be written to an output file:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%{gpgverify} --keyring=&#39;%{SOURCE1}&#39; --data=&#39;%{SOURCE0}&#39; --output=&lt;pathname&gt;</span></span></code></pre></div><p>rpm-spec</p><p>Packages that are vital during bootstrapping of Fedora may use a <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#bootstrapping" target="_blank" rel="noreferrer">bootstrap flag</a> to skip the verification before GPGverify and GnuPG have been built.</p><h3 id="help" tabindex="-1">Help <a class="header-anchor" href="#help" aria-label="Permalink to &quot;Help&quot;">​</a></h3><p>If you need help getting your package compliant to this guideline, or if you do not know what to do if a build fails on a signature verification, then you should seek help on the Fedora devel mailing list before circumventing the check, to make sure that you do not build compromised software.</p><h2 id="architecture-support" tabindex="-1">Architecture Support <a class="header-anchor" href="#architecture-support" aria-label="Permalink to &quot;Architecture Support&quot;">​</a></h2><p>All Fedora packages must successfully compile and build into binary rpms on at least one supported primary architecture, except where the package is useful only on a secondary architecture (such as an architecture-specific boot utility, microcode loader, or hardware configuration tool). Fedora packagers should make every effort to support all <a href="https://fedoraproject.org/wiki/Architectures#Primary_Architectures" target="_blank" rel="noreferrer">primary architectures</a>.</p><p>Content, code which does not need to compile or build, and architecture independent code (noarch) are notable exceptions.</p><h3 id="architecture-build-failures" tabindex="-1">Architecture Build Failures <a class="header-anchor" href="#architecture-build-failures" aria-label="Permalink to &quot;Architecture Build Failures&quot;">​</a></h3><p>If a Fedora package does not successfully compile, build or work on an architecture, then those architectures should be listed in the spec in <code>ExcludeArch</code>. Each architecture listed in <code>ExcludeArch</code> needs to have a bug filed in bugzilla, describing the reason that the package does not compile/build/work on that architecture. The bug number should then be placed in a comment, next to the corresponding <code>ExcludeArch</code> line. New packages will not have bugzilla entries during the review process, so they should put this description in the comment until the package is approved, then file the bugzilla entry, and replace the long explanation with the bug number. The bug should be marked as blocking one (or more) of the following bugs to simplify tracking such issues:</p><h3 id="noarch-with-unported-dependencies" tabindex="-1">Noarch with Unported Dependencies <a class="header-anchor" href="#noarch-with-unported-dependencies" aria-label="Permalink to &quot;Noarch with Unported Dependencies&quot;">​</a></h3><p>Sometimes, you are working on a noarch package that can only run in locations that a different, arched package builds on. This is common for packages written in a scripting language which depend on the language’s interpreter package, for instance. If the arched package that your package deps on isn’t available on all architectures Fedora (or EPEL) targets you run into a situation where you may need to exclude your package from certain architectures&#39; package repositories or prevent it from building on certain architectures in the buildsystem.</p><h4 id="arch-specific-runtime-and-build-time-dependencies" tabindex="-1">Arch-Specific Runtime and Build-Time Dependencies <a class="header-anchor" href="#arch-specific-runtime-and-build-time-dependencies" aria-label="Permalink to &quot;Arch-Specific Runtime and Build-Time Dependencies&quot;">​</a></h4><p>You can limit both the architectures used to build a noarch package, and the repositories to which the built noarch package will be added, by using either the <code>ExcludeArch:</code> or <code>ExclusiveArch:</code> tags:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>BuildArch: noarch</span></span>
<span class="line"><span># List the arches that the dependent package builds on below</span></span>
<span class="line"><span>ExclusiveArch: %{ix86} %{arm} x86_64 noarch</span></span></code></pre></div><p>rpm-spec</p><p>Sometimes a language runtime you are packaging for will provide a macro for the arches it’s available on, for instance,<code>%{nodejs_arches}</code>. If it does exist, then you can use something like <code>ExclusiveArch: %{nodejs_arches} noarch</code> in your spec file. Take a look at the guidelines for the language to see if such a macro exists.</p><h3 id="no-arch-specific-sources-or-patches" tabindex="-1">No Arch-Specific Sources or Patches <a class="header-anchor" href="#no-arch-specific-sources-or-patches" aria-label="Permalink to &quot;No Arch-Specific Sources or Patches&quot;">​</a></h3><p>Packages MUST NOT have <code>Source:</code> or <code>Patch:</code> tags which are conditionalized on architecture. For example, this is forbidden:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%ifarch ppc64</span></span>
<span class="line"><span>Patch0: build-fix-for-ppc64.patch</span></span>
<span class="line"><span>%endif</span></span></code></pre></div><p>rpm-spec</p><p>Conditionalizing <code>Source:</code> or <code>Patch:</code> tags by architecture causes the contents of the source package to differ depending on the architecture which was used to build it.</p><p>Note that this unfortunately prevents <code>%autosetup</code> from being used to apply patches when some of those patches apply only to certain architectures. The best solution is to write patches which simply work on all architectures. If that is not possible, then simply use <code>%autosetup -N</code> and to use the <code>%patch</code> macro to apply each patch using <code>%ifarch</code> or <code>%ifnarch</code> as appropriate. For example:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%prep</span></span>
<span class="line"><span>%autosetup -N</span></span>
<span class="line"><span>%ifarch s390x</span></span>
<span class="line"><span>%patch 0 -p1</span></span>
<span class="line"><span>%endif</span></span></code></pre></div><p>rpm-spec</p><h2 id="filesystem-layout" tabindex="-1">Filesystem Layout <a class="header-anchor" href="#filesystem-layout" aria-label="Permalink to &quot;Filesystem Layout&quot;">​</a></h2><p>Fedora follows the <a href="https://refspecs.linuxfoundation.org/fhs.shtml" target="_blank" rel="noreferrer">Filesystem Hierarchy Standard</a> with regards to filesystem layout, with exceptions noted below. The FHS defines where files should be placed on the system.</p><h3 id="exceptions-1" tabindex="-1">Exceptions <a class="header-anchor" href="#exceptions-1" aria-label="Permalink to &quot;Exceptions&quot;">​</a></h3><ul><li>Fedora allows cross-compilers to place files in <code>/usr/target</code>.</li><li>Fedora does not allow new directories directly under <code>/</code> or <code>/usr</code> without FPC approval.</li></ul><h3 id="libexecdir" tabindex="-1">Libexecdir <a class="header-anchor" href="#libexecdir" aria-label="Permalink to &quot;Libexecdir&quot;">​</a></h3><p>The <a href="https://www.pathname.com/fhs/" target="_blank" rel="noreferrer">Filesystem Hierarchy Standard</a> does not include any provision for libexecdir, but Fedora packages MAY store appropriate files there. Libexecdir (aka, <code>/usr/libexec</code> on Fedora systems) should only be used as the directory for executable programs that are designed primarily to be run by other programs rather than by users.</p><p>Fedora’s rpm includes a macro for libexecdir,<code>%{_libexecdir}</code>. Packagers are highly encouraged to store libexecdir files in a package-specific subdirectory of <code>%{_libexecdir}</code>, such as <code>%{_libexecdir}/%{name}</code>.</p><p>If upstream’s build scripts support the use of <code>%{_libexecdir}</code> then that is the most appropriate place to configure it (e.g., passing <code>--libexecdir=%{_libexecdir}/%{name}</code> to autotools configure). If upstream’s build scripts do not support that,<code>%{_libdir}/%{name}</code> is a valid second choice. If you have to patch support for using one of these directories in, then you should patch in LIBEXECDIR, preferably configurable at build time (so distributions that do not have <code>/usr/libexec</code> can set LIBEXECDIR to another directory more appropriate for their distro).</p><h3 id="multilib-exempt-locations" tabindex="-1">Multilib Exempt Locations <a class="header-anchor" href="#multilib-exempt-locations" aria-label="Permalink to &quot;Multilib Exempt Locations&quot;">​</a></h3><p>If a package is exempt from multilib, it may use <code>%{_prefix}/lib</code> instead of <code>%{_libdir}</code>. Packages that contain architecture specific files that would ordinarily be installed into <code>%{_libexecdir}</code> are always considered ineligible for multilib. However, you should be sure that the (sub)package that they are in does not have other content that would be considered eligible for multilib. If this is not the case for the files you wish to do this in for your package or you are just unsure, ask FESCo for an explicit multilib exemption.</p><h3 id="run" tabindex="-1">/run <a class="header-anchor" href="#run" aria-label="Permalink to &quot;/run&quot;">​</a></h3><p>System services should store small volatile run-time data in <code>/run</code>. This is a tmpfs backed directory that is mounted in very early boot, before any services are started (and before <code>/var</code> is available).<code>/var/run</code> is a legacy symlink to <code>/run</code>.</p><h3 id="no-files-or-directories-under-srv-usr-local-or-home-user" tabindex="-1">No Files or Directories Under /srv, /usr/local, or /home/$USER <a class="header-anchor" href="#no-files-or-directories-under-srv-usr-local-or-home-user" aria-label="Permalink to &quot;No Files or Directories Under /srv, /usr/local, or /home/$USER&quot;">​</a></h3><p>The <a href="https://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM" target="_blank" rel="noreferrer">FHS says</a>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&quot;...no program should rely on a specific subdirectory structure of /srv existing</span></span>
<span class="line"><span>or data necessarily being stored in /srv. However /srv should always exist on FHS</span></span>
<span class="line"><span>compliant systems and should be used as the default location for such data.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Distributions must take care not to remove locally placed files in these</span></span>
<span class="line"><span>directories without administrator permission.&quot;</span></span></code></pre></div><p>The FHS is explicitly handing control of the directory structure under <code>/srv</code> to the system administrator rather than the distribution. Therefore, no Fedora packages can have any files or directories under <code>/srv</code>, come preconfigured to use specific files or directories under <code>/srv</code>, to remove files there, or to modify the files there in any way.</p><p>In addition, no Fedora package can contain files or directories or modify files under:</p><ul><li><code>/usr/local</code> as these directories are not permitted to be used by Distributions in the FHS</li><li><code>/home/$USER</code> as users can arbitrarily modify the files in their home directories and rpm packages that modify those files run the risk of destroying user data. Additionally, sites may be nfs mounting <code>/home</code> on many different types of systems or even network automounting them on demand. Modifying files in home directories that are thus configured will have negative effects in both of these situations.</li></ul><p>It is important to note that the software in a Fedora package, once installed and configured by a user, can use <code>/srv</code> as a location for data. The package simply must not do this out of the box</p><h3 id="limited-usage-of-opt-etc-opt-and-var-opt" tabindex="-1">Limited Usage of /opt, /etc/opt, and /var/opt <a class="header-anchor" href="#limited-usage-of-opt-etc-opt-and-var-opt" aria-label="Permalink to &quot;Limited Usage of /opt, /etc/opt, and /var/opt&quot;">​</a></h3><p><code>/opt</code> and its related directories (<code>/etc/opt</code> and <code>/var/opt</code>) is reserved for the use of vendors in the FHS. We have reserved the <code>fedora</code> name with <a href="https://www.lanana.org/lsbreg/providers/providers.txt" target="_blank" rel="noreferrer">LANANA</a> for our use. If a package installs files into <code>/opt</code> it may only use directories in the <code>/opt/fedora</code> hierarchy. Fedora attempts to organize this directory by allocating a subdirectory of our <code>/opt/fedora</code> directory for specific subsystems. If you think you need to use <code>/opt/fedora</code> please file an FPC ticket to decide whether it’s a valid use of <code>/opt</code> and what subdirectory should be allocated for your use.</p><p>Currently, we have allocated <code>/opt/fedora/scls</code>, <code>/etc/opt/fedora/scls</code>, and <code>/var/opt/fedora/scls</code> for use by <a href="https://fedoraproject.org/wiki/User:Toshio/SCL_Guidelines_(draft)" target="_blank" rel="noreferrer">Software Collections</a>.</p><p>Because the Google-supplied Chrome packaging has chosen a specific file location for extension-specific files which, if used, would conflicts with the above guidelines, the Packaging Committee has approved the following exception: A package MAY install files into the <code>/etc/opt/chrome/native-messaging-hosts</code> directory, and may create that directory hierarchy, as long as package as a whole also supports Chromium. (The Chromium support MAY be in a different subpackage.) If Chrome in the future allows a more standard directory to be used for this purpose, this exception will be removed.</p><h3 id="merged-file-system-layout" tabindex="-1">Merged file system layout <a class="header-anchor" href="#merged-file-system-layout" aria-label="Permalink to &quot;Merged file system layout&quot;">​</a></h3><p>Fedora has merged several directories that historically used to be separate.</p><table tabindex="0"><thead><tr><th>Path</th><th>Merged with</th><th>RPM Macro</th></tr></thead><tbody><tr><td><code>/bin</code></td><td><code>/usr/bin</code></td><td><code>{_bindir}</code></td></tr><tr><td><code>/sbin</code></td><td><code>/usr/bin</code></td><td><code>%{_bindir}</code></td></tr><tr><td><code>/usr/sbin</code></td><td><code>/usr/bin</code></td><td><code>%{_bindir}</code></td></tr><tr><td><code>/lib64</code> or <code>/lib</code></td><td><code>/usr/lib64</code> or <code>/usr/lib</code></td><td><code>%{_libdir}</code></td></tr><tr><td><code>/lib</code></td><td><code>/usr/lib</code></td><td><code>%{_prefix}/lib</code></td></tr></tbody></table><p>For example, end users will find that <code>/bin/sh</code> is the same file as <code>/usr/bin/sh</code>, and <code>/usr/sbin/sendmail</code> is the the same as <code>/usr/bin/sendmail</code>.</p><p>However, rpm file dependencies don’t work according to what’s on the filesystem, they work according to the path specified in the rpm <code>%files</code> section. So an rpm which specified:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%files</span></span>
<span class="line"><span>/bin/sh</span></span></code></pre></div><p>rpm-spec</p><p>would be able to satisfy a file dependency for <code>/bin/sh</code> but not for <code>/usr/bin/sh</code>. Packages <strong>must</strong> use the real filesystem paths in the <code>%files</code> section. If other packages have dependencies on a different path that resolves to the same file, and it is not convenient to update them to the new path, packages <strong>may</strong> use a virtual <code>Provides</code> to list the alternate path.</p><p>For instance:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Provides: /sbin/ifconfig</span></span>
<span class="line"><span>[...]</span></span>
<span class="line"><span>%files</span></span>
<span class="line"><span>%{_bindir}/ifconfig</span></span></code></pre></div><p>rpm-spec</p><h2 id="use-rpmlint" tabindex="-1">Use rpmlint <a class="header-anchor" href="#use-rpmlint" aria-label="Permalink to &quot;Use rpmlint&quot;">​</a></h2><p>Run rpmlint on binary and source rpms to examine them for common errors, and fix them (unless rpmlint is wrong, which can happen, too). If you find rpmlint’s output cryptic, the <code>-e</code> switch to it can be used to get more verbose descriptions of most errors and warnings. Note that rpmlint will perform additional checks if given the name of an installed package. For example,<code>dnf install foo-1.0-1.f20.x86_64.rpm; rpmlint -i foo</code> will perform a set of tests on the foo package that <code>rpmlint foo-1.0-1.f20.x86_64.rpm</code> cannot. A community-maintained page on rpmlint issues can be found <a href="https://fedoraproject.org/wiki/Common_Rpmlint_issues" target="_blank" rel="noreferrer">here</a>.</p><ul><li>The <code>Copyright:</code>, <code>Packager:</code>, <code>Vendor:</code> and <code>PreReq:</code> tags MUST NOT be used.</li><li>The <code>BuildRoot:</code> tag, <code>Group:</code> tag, and <code>%clean</code> section SHOULD NOT be used.</li><li>The contents of the buildroot SHOULD NOT be removed in the first line of <code>%install</code>.</li><li>The <code>Summary:</code> tag value SHOULD NOT end in a period.</li><li>The <code>Source:</code> tags document where to find the upstream sources for the package. In most cases this SHOULD be a complete URL to the upstream tarball. For special cases, please see the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/SourceURL/" target="_blank" rel="noreferrer">SourceURL Guidelines</a>.</li><li>URLs in the <code>URL:</code>, <code>Source:</code> and <code>Patch:</code> tags SHOULD require authentication of the server whenever possible. This typically means writing <code>https:</code> instead of <code>http:</code> or <code>ftp:</code>.</li></ul><h2 id="package-dependencies" tabindex="-1">Package Dependencies <a class="header-anchor" href="#package-dependencies" aria-label="Permalink to &quot;Package Dependencies&quot;">​</a></h2><p>All package dependencies (build-time or runtime, regular, weak or otherwise) MUST ALWAYS be satisfiable within the official Fedora repositories.</p><p>RPM can automatically determine dependencies for most compiled libraries and for some scripting languages such as Perl. Automatically determined dependencies MUST NOT be duplicated by manual dependencies.</p><p>Build dependencies, however, MUST be explicitly listed, unless you are using an automatic build dependency generator (e.g. <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Rust/#_buildrequires" target="_blank" rel="noreferrer">Rust</a> or <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Python/#_build_time_dependency_generator" target="_blank" rel="noreferrer">Python</a>). Refer to the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#buildrequires" target="_blank" rel="noreferrer">Build-Time Dependencies (BuildRequires)</a>.</p><p>Versioned dependencies (build-time or runtime) SHOULD ONLY be used when actually necessary to guarantee that the proper version of a package is present. If a versioned dependency would be satisfied by a version present in three previous Fedora releases then a versioned dependency is not needed and a regular unversioned dependency SHOULD be used instead.</p><p>A versioned dependency on a package with a defined Epoch MUST be included in that dependency. Otherwise the dependency will not function as expected.</p><h3 id="dependency-types" tabindex="-1">Dependency Types <a class="header-anchor" href="#dependency-types" aria-label="Permalink to &quot;Dependency Types&quot;">​</a></h3><p><code>Requires</code> MUST be used if the dependency is required for the software to function correctly.</p><p>If the package functions correctly but in diminished capacity, then <code>Recommends</code> or <code>Suggests</code> SHOULD be used. If the functionality should be available by default for users,<code>Recommends</code> SHOULD be used, and <code>Suggests</code> otherwise. Alternatively, the reverse dependencies <code>Supplements</code> or <code>Enhances</code> may be used in the other package. See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/WeakDependencies/" target="_blank" rel="noreferrer">Packaging:WeakDependencies</a> for guidelines on using those dependency types.</p><h3 id="architecture-specific-dependencies" tabindex="-1">Architecture-specific Dependencies <a class="header-anchor" href="#architecture-specific-dependencies" aria-label="Permalink to &quot;Architecture-specific Dependencies&quot;">​</a></h3><p>A dependency is made arch-specific by appending the macro <code>%{?_isa}</code> to the package name. For example:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Requires: foo</span></span></code></pre></div><p>rpm-spec</p><p>becomes:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Requires: foo%{?_isa}</span></span></code></pre></div><p>rpm-spec</p><p>If the foo-devel package has a foo-config script, you can try doing a foo-config --libs and foo-config --cflags to get strong hints what packages should be marked as foo’s requirements. For example:</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ gtk-config --cflags</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-I/usr/include/gtk-1.2 -I/usr/include/glib-1.2 -I/usr/lib/glib/include -I/usr/X11R6/include</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ gtk-config --libs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-L/usr/lib -L/usr/X11R6/lib -lgtk -lgdk -rdynamic -lgmodule -lglib -ldl -lXi -lXext -lX11 -lm</span></span></code></pre></div><p>This means that gtk+-devel should contain</p><p><code>Requires: glib-devel%{?_isa} libXi-devel%{?_isa} libXext-devel%{?_isa} libX11-devel%{?_isa}</code></p><h3 id="rich-boolean-dependencies" tabindex="-1">Rich/Boolean Dependencies <a class="header-anchor" href="#rich-boolean-dependencies" aria-label="Permalink to &quot;Rich/Boolean Dependencies&quot;">​</a></h3><p>Packages MAY make full use of the <a href="https://rpm-software-management.github.io/rpm/manual/boolean_dependencies.html" target="_blank" rel="noreferrer">rich (or Boolean) dependency feature</a> supported in RPM.</p><h3 id="file-and-directory-dependencies" tabindex="-1">File and Directory Dependencies <a class="header-anchor" href="#file-and-directory-dependencies" aria-label="Permalink to &quot;File and Directory Dependencies&quot;">​</a></h3><p>RPM gives you the ability to depend on arbitrary files or directories instead of packages. Packages MAY include such dependencies for paths inside one of the following directories:</p><ul><li><code>/usr/bin</code></li><li><code>/etc</code></li></ul><p>They also MAY depend on paths listed in an explicit <code>Provides:</code>. They MUST NOT include dependencies on other paths, as that would require downloading of additional repository metadata to be enabled.</p><p>Please also note that it is not uncommon for multiple packages to provide the same directory. Directory dependencies SHOULD ONLY be used to express the dependency on that directory existing, not on any other functionality of any other package that might provide that directory.</p><p>When declaring file and directory dependencies,<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/RPMMacros/#macros_installation" target="_blank" rel="noreferrer">installation path macros</a> like <code>%{_bindir}</code> MUST NOT be used.<code>%{_bindir}</code> of the package that provides <code>sometool</code> may be different from <code>%{_bindir}</code> of a package that requires <code>sometool</code>. In such case, <code>BuildRequires: %{_bindir}/sometool</code> does not work as expected.</p><h3 id="explicit-requires" tabindex="-1">Explicit Requires <a class="header-anchor" href="#explicit-requires" aria-label="Permalink to &quot;Explicit Requires&quot;">​</a></h3><p>Explicit Requires are Requires added manually by the packager in the spec file. Packages must not contain unnecessary explicit Requires on libraries. We generally rely on rpmbuild to automatically add dependencies on library SONAMEs. Modern package management tools are capable of resolving such dependencies to determine the required packages in many cases. However, present versions of rpmbuild only add deps on library SONAMES, not the library’s full version. This can be a problem if a library has added features over the course of time without backwards incompatibilities that would cause SONAMES to be changed. This can lead to a case where the user has an old version of a library installed, the new version of the library with new ABI is built in Fedora and an application using that ABI is built. If the user just attempts to install or update that one application without also updating the library, the application will install fine (because the SONAME dependency is satisfied) but will fail when run because the library installed on the system is missing features it needs.</p><p>Although you do need to add explicit library dependencies to keep this from occurring, there are drawbacks to manually specifying this in all your packages. History has shown that such dependencies add confusion when library/files are moved from one package to another, when packages get renamed, when one out of multiple alternative packages would suffice, and when versioned explicit dependencies become out-of-date and inaccurate. Additionally, in some cases, old explicit dependencies on package names require unnecessary updates/rebuilds. For example, Fedora packages are only required to retain historical provides for two full release cycles.</p><p>Because of this and because we hope to have this fixed in rpmbuild, this is something to be aware of but it’s not required that you explicitly specify the libraries you require with their version information.</p><p>When explicit library Requires are necessary, explicit library dependencies should typically be arch-specific (unless the packages involved are noarch) and there should be a spec file comment justifying it:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># The automatic dependency on libfubar.so.1 is insufficient,</span></span>
<span class="line"><span># as we strictly need at least the release that fixes two segfaults.</span></span>
<span class="line"><span>Requires: libfubar%{?_isa} &gt;= 0:1.2.3-7</span></span></code></pre></div><p>rpm-spec</p><p>Packagers should revisit an explicit dependency as appropriate to avoid it becoming inaccurate and superfluous. For instance in the example above, when no current Fedora release shipped with libfubar &lt; 1.2.3-7, it is no longer necessary to list the explicit, versioned requirement.</p><h3 id="filtering-auto-generated-requires" tabindex="-1">Filtering Auto-Generated Requires <a class="header-anchor" href="#filtering-auto-generated-requires" aria-label="Permalink to &quot;Filtering Auto-Generated Requires&quot;">​</a></h3><p>RPM attempts to auto-generate Requires (and Provides) at build time, but in some situations, the auto-generated Requires/Provides are not correct or not wanted. For more details on how to filter out auto-generated Requires or Provides, please see:<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/AutoProvidesAndRequiresFiltering/" target="_blank" rel="noreferrer">Packaging:AutoProvidesAndRequiresFiltering</a>.</p><h2 id="build-time-dependencies-buildrequires" tabindex="-1">Build-Time Dependencies (BuildRequires) <a class="header-anchor" href="#build-time-dependencies-buildrequires" aria-label="Permalink to &quot;Build-Time Dependencies (BuildRequires)&quot;">​</a></h2><p>It is important that your package list all necessary build dependencies using the <code>BuildRequires:</code> tag. You MAY assume that enough of an environment exists for RPM to function, to build packages and execute basic shell scripts, but you SHOULD NOT assume any other packages are present as RPM dependencies and anything brought into the buildroot by the build system can change over time.</p><h3 id="buildrequires-and-isa" tabindex="-1">BuildRequires and %{_isa} <a class="header-anchor" href="#buildrequires-and-isa" aria-label="Permalink to &quot;BuildRequires and %{\\_isa}&quot;">​</a></h3><p>You MUST NOT use arched BuildRequires. The arch ends up in the built SRPM but SRPMs need to be architecture independent. For instance, if you did this:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Example of what *not* to do</span></span>
<span class="line"><span>BuildRequires:  foo%{?_isa} &gt;= 3.3</span></span></code></pre></div><p>rpm-spec</p><p>Then the SRPM that is built in Fedora would have one of these Requirements depending on what builder the SRPM was created on:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>foo(x86-32) &gt;= 3.3</span></span>
<span class="line"><span># or</span></span>
<span class="line"><span>foo(x86-64) &gt;= 3.3</span></span></code></pre></div><p>This would prevent yum-builddep or similar tools that use the SRPM’s requirements from operating correctly.</p><h3 id="buildrequires-based-on-pkg-config" tabindex="-1">BuildRequires Based on pkg-config <a class="header-anchor" href="#buildrequires-based-on-pkg-config" aria-label="Permalink to &quot;BuildRequires Based on pkg-config&quot;">​</a></h3><p>Fedora packages which use <code>pkg-config</code> to build against a library (e.g. &#39;foo&#39;) on which they depend,<strong>SHOULD</strong> express their build dependency correctly as <code>pkgconfig(foo)</code>. For more information, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/PkgConfigBuildRequires/" target="_blank" rel="noreferrer">Packaging:PkgConfigBuildRequires</a>.</p><h2 id="conditional-build-time-dependencies" tabindex="-1">Conditional Build-Time Dependencies <a class="header-anchor" href="#conditional-build-time-dependencies" aria-label="Permalink to &quot;Conditional Build-Time Dependencies&quot;">​</a></h2><p>If the spec file contains conditional dependencies selected based on presence of optional <code>--with(out) foo</code> arguments to <code>rpmbuild</code>, build the source RPM to be submitted with the default options, i.e., so that none of these arguments are present in the <code>rpmbuild</code> command line. The reason is that those requirements get &quot;serialized&quot; into the resulting source RPM, i.e., the conditionals no longer apply.</p><h2 id="summary-and-description" tabindex="-1">Summary and Description <a class="header-anchor" href="#summary-and-description" aria-label="Permalink to &quot;Summary and Description&quot;">​</a></h2><p>The summary should be a short and concise description of the package. The description should expand upon this.</p><h3 id="dos-and-don-ts" tabindex="-1">Dos and Don’ts <a class="header-anchor" href="#dos-and-don-ts" aria-label="Permalink to &quot;Dos and Don’ts&quot;">​</a></h3><ul><li>Do not end the summary with a period.</li><li>The summary should be 80 characters/columns or less. If you are using something other than ASCII look at a utf length function or something similar to calculate the column count.</li><li>Make sure that there are no lines in the description longer than 80 characters/columns. If you are using something other than ASCII look at a utf length function or something similar to calculate the column count.</li><li>Do not include installation instructions in the description; it is not a manual. If the package requires some manual configuration or there are other important instructions to the user, refer the user to the documentation in the package. Add a <em>README.Fedora</em>, or similar, if you feel this is necessary.</li><li>For consistency, we use the American English spelling and grammar rules in the summary and description. Packages can contain additional translated summary/description for supported Non-English languages, if available.</li></ul><h3 id="trademarks-in-summary-or-description" tabindex="-1">Trademarks in Summary or Description <a class="header-anchor" href="#trademarks-in-summary-or-description" aria-label="Permalink to &quot;Trademarks in Summary or Description&quot;">​</a></h3><p>Packagers should be careful how they use trademarks in Summary or Description. There are a few rules to follow:</p><ul><li>Never use <code>(TM)</code> or <code>(R)</code> (or the Unicode equivalents, ™/®). It is incredibly complicated to use these properly, so it is actually safer for us to not use them at all.</li><li>Use trademarks in a way that is not ambiguous. Avoid phrasing like &quot;similar to&quot; or &quot;like&quot;. Some examples:</li><li><strong>BAD:</strong> It is similar to Adobe Photoshop.</li><li><strong>GOOD:</strong> It supports Adobe Photoshop PSD files, …</li><li><strong>BAD:</strong> A Linux version of Microsoft Office</li><li><strong>GOOD:</strong> A word-processor with support for Microsoft Office DOC files</li></ul><p>If you’re not sure, ask yourself, is there any chance someone may get confused and think that this package is the trademarked item? When in doubt, try to leave the trademark out.</p><h2 id="documentation" tabindex="-1">Documentation <a class="header-anchor" href="#documentation" aria-label="Permalink to &quot;Documentation&quot;">​</a></h2><p>Any relevant documentation included in the source distribution should be included in the package in the proper documentation directory. Irrelevant documentation includes build instructions, the omnipresent <em>INSTALL</em> file containing generic build instructions, or example, and documentation for non-Linux systems, e.g. <em>README.MSDOS</em>. Also pay attention about which subpackage you include documentation in. For example API documentation belongs in the <code>-devel</code> subpackage, not the main one. Or if there’s a lot of documentation, consider putting it into a subpackage. In this case, it is recommended to use <code>*-doc</code> as the subpackage name.</p><p>Marking a <em>relative</em> path with <code>%doc</code> in the <code>%files</code> section will cause RPM to copy the referenced file or directory from <code>%_builddir</code> to the proper location for documentation. Files can also be placed in <code>%_pkgdocdir</code>, and the build scripts of the software being packaged may do this automatically when called in <code>%install</code>. However, mixing these methods is problematic and may result in duplicated or conflicting files, so use of <code>%doc</code> with <em>relative</em> paths and installation of files directly into <code>%_pkgdocdir</code> in the same source package is forbidden.</p><p>Files marked as documentation must not cause the package to pull in more dependencies than it would without the documentation. One simple way to ensure this in most cases is to remove all executable permissions from files in <code>%_pkgdocdir</code>.</p><p>Files located in <code>%_pkgdocdir</code> must not affect the runtime of the packaged software. The software must function properly and with unchanged functionality if those files are modified, removed or not installed at all.</p><p>Although license files are documentation, they are treated specially (including using a different tag). Please see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/LicensingGuidelines/" target="_blank" rel="noreferrer">Licensing Guidelines</a> for how to handle them.</p><h3 id="separate-documentation-packages" tabindex="-1">Separate Documentation Packages <a class="header-anchor" href="#separate-documentation-packages" aria-label="Permalink to &quot;Separate Documentation Packages&quot;">​</a></h3><p>If building documentation requires many additional dependencies then you MAY elect to not build it in the main package and instead create a separate *-doc source package which builds only the documentation. This separately packaged documentation MUST correspond to the version of the packaged software. In other words, if a new release of the software includes changes to the documentation, then the documentation package MUST also be updated. But if the new version of the software does not include documentation changes, then you MAY choose not to update the documentation package.</p><p>A comment SHOULD be added near Version tag of the main package to remind maintainers to update the separate *-doc package when needed.</p><h2 id="changelogs" tabindex="-1">Changelogs <a class="header-anchor" href="#changelogs" aria-label="Permalink to &quot;Changelogs&quot;">​</a></h2><p>The changelog describes the changes to the package that are relevant to the users of the package. This includes new upstream versions, important changes to how the package is built, rebuilds, and other changes affecting the outcome. Changes which are only relevant to packagers should not be mentioned in the changelog. This includes spec file cleanups, build error fixes or workarounds, and other changes which don’t have an effect on content of the binary packages.</p><p>The changelog <strong>should</strong> be generated automatically from git commit logs using the <code>%autochangelog</code> macro:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%changelog</span></span>
<span class="line"><span>%autochangelog</span></span></code></pre></div><p>rpm-spec</p><p>The commit subject (the first line of the commit message) and optionally some additional lines are used to generate the changelog text. The commit author name and email address and the commit timestamp are also used in changelog entry.</p><p>The text in the the commit message which will become part of the changelog should provide a brief summary of the changes relevant for the user. The commit message may contain additional information that is relevant to packagers.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Add README file (rhbz#1000042)</span></span></code></pre></div><p>If a particular commit fixes a CVE, this information should be included too.</p><p>The intent is to give the user a hint as to what changed in a package update without overwhelming them with the technical details. They must never simply contain an entire copy of the source CHANGELOG entries. Links to upstream NEWS files or changelogs can be entered for those who want additional information.</p><p>See <a href="https://fedora-infra.github.io/rpmautospec-docs/autochangelog.html" target="_blank" rel="noreferrer">autochangelog documentation</a> for the details of how the changelog is generated from git commit messages, and how to create multi-line entries or skip entries for certain commits.</p><p>Packagers <strong>may</strong> alternatively use a manual changelog instead of the <code>%autochangelog</code> macro. This is described in <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/manual-changelog/" target="_blank" rel="noreferrer">Manual Changelog</a>.</p><h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h3><p>The packager updates package to version 1.0 and creates a commit</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ git show</span></span>
<span class="line"><span>commit 0000000000001234567890ABCDEF000000000000</span></span>
<span class="line"><span>Author: Joe Packager &lt;joe@example.com&gt;</span></span>
<span class="line"><span>Date:   Wed Jun 14 2003</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    Version 1.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ... (rhbz#1000024)</span></span>
<span class="line"><span>    - Also fixes the slowdown reported in rhbz#1000025</span></span>
<span class="line"><span>    - Upstream changelog: https://example.com/package/NEWS.html#v1.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    Whitespace in the spec file has been cleaned up.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>diff --git package.spec package.spec</span></span>
<span class="line"><span>index 5c77064c03..efcd53a61c 100644</span></span>
<span class="line"><span>--- package.spec</span></span>
<span class="line"><span>+++ package.spec</span></span>
<span class="line"><span>@@ -1,5 +1,5 @@</span></span>
<span class="line"><span> Name:           package</span></span>
<span class="line"><span>-Version:        0.1</span></span>
<span class="line"><span>+Version:        0.2</span></span>
<span class="line"><span> Release:        %autorelease</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>When the package is built, an appropriate changelog entry will be generated. It can be previewed with <code>rpmautospec generate-changelog</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ rpmautospec generate-changelog</span></span>
<span class="line"><span>* Wed Jun 14 2003 Joe Packager &lt;joe@example.com&gt; - 0.2-1</span></span>
<span class="line"><span>- Version 1.0 (rhbz#1000024)</span></span>
<span class="line"><span>- Also fixes the slowdown reported in rhbz#1000025</span></span>
<span class="line"><span>- Upstream changelog: https://example.com/package/NEWS.html#v1.0</span></span></code></pre></div><p>Note that the sentence about whitespace is not included in the changelog.</p><h2 id="manpages" tabindex="-1">Manpages <a class="header-anchor" href="#manpages" aria-label="Permalink to &quot;Manpages&quot;">​</a></h2><p>As man pages are the traditional method of getting help on a Unix system, packages SHOULD contain them for all executables. If some man pages are absent, packagers SHOULD work with upstream to add them. It is also occasionally possible to find pages created by other distributions, or to use the output of the <code>help2man</code> program; those are often useful as a starting point. When installing man pages, note that RPM will re-compress them into its preferred format. So the <code>%files</code> section MUST reference manpages with a pattern that takes this into account:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%files</span></span>
<span class="line"><span>%{_mandir}/man1/foo.1*</span></span></code></pre></div><p>rpm-spec</p><p>Note also that files installed in <code>%{_mandir}</code> are automatically marked by RPM as documentation. Thus it is not necessary to use <code>%doc</code>.</p><p>For localised manpages, use <code>%find_lang --with-man</code> as described in <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#handling_locale_files" target="_blank" rel="noreferrer">Handling Locale Files</a>.</p><h2 id="compiler" tabindex="-1">Compiler <a class="header-anchor" href="#compiler" aria-label="Permalink to &quot;Compiler&quot;">​</a></h2><p>Fedora packages should default to using gcc as the compiler (for all languages that gcc supports) or clang if upstream does not support building with gcc. However, if there is a good technical reason, packagers may choose not to use the default compiler. Examples of valid technical reasons to not use the default compiler, include but are not limited to:</p><ul><li>The default compiler cannot build a package correctly.</li><li>The packager needs to disable a compiler feature (e.g. LTO) in order for the default compiler to correctly compile their package.</li><li>The default compiler takes significantly longer to build a package.</li><li>The default compiler is missing a feature that would benefit the package.</li></ul><p>Packagers choosing to use a non-default compiler should document the reason for this decision in a comment in the spec file.</p><h2 id="compiler-macros" tabindex="-1">Compiler Macros <a class="header-anchor" href="#compiler-macros" aria-label="Permalink to &quot;Compiler Macros&quot;">​</a></h2><p>If clang is being used to build a package, packagers must set the %toolchain macro to clang:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%global toolchain clang</span></span></code></pre></div><p>rpm-spec</p><p>This ensures that Fedora’s clang-specific compiler flags are used when compiling.</p><p>If a packager wants to use conditional macros in a spec file to make it easier to switch between two different compilers, then the following macros names should be used:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%bcond_with toolchain_clang</span></span>
<span class="line"><span>%bcond_with toolchain_gcc</span></span></code></pre></div><p>rpm-spec</p><p>Packagers may also use the %build_cc, %build_cxx, or %build_cpp macros in the spec file in place of hard-coding the compiler name. The values of these variables are controled by setting the %toolchain macro to either clang or gcc.</p><h2 id="compiler-flags" tabindex="-1">Compiler Flags <a class="header-anchor" href="#compiler-flags" aria-label="Permalink to &quot;Compiler Flags&quot;">​</a></h2><p>Compilers used to build packages must honor the applicable compiler flags set in the system rpm configuration. Honoring means that the contents of that variable is used as the basis of the flags actually used by the compiler during the package build.</p><p>For C, C++, and Fortran code, the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/RPMMacros/#build-flags-macros-and-variables" target="_blank" rel="noreferrer">%{optflags} macro</a> contains these flags. Overriding these flags for performance optimizations (for instance, -O3 instead of -O2) is generally discouraged. If you can present benchmarks that show a significant speedup for this particular code, this could be revisited on a case-by-case basis. Adding to and overriding or filtering parts of these flags is permitted if there’s a good reason to do so; the rationale for doing so must be documented in the specfile.</p><p>Packages SHOULD avoid editing the &#39;CFLAGS&#39; etc. environment variables by hand, and instead use methods for compiler flags manipulation described in <a href="https://src.fedoraproject.org/rpms/redhat-rpm-config/blob/rawhide/f/buildflags.md" target="_blank" rel="noreferrer">this documentation</a></p><h3 id="pie" tabindex="-1">PIE <a class="header-anchor" href="#pie" aria-label="Permalink to &quot;PIE&quot;">​</a></h3><p>PIE adds security to executables by composing them entirely of position-independent code. Position-independent code (PIC) is machine instruction code that executes properly regardless of where in memory it resides. PIE allows Exec Shield to use address space layout randomization to prevent attackers from knowing where existing executable code is during a security attack using exploits that rely on knowing the offset of the executable code in the binary, such as return-to-libc attacks.</p><p>In Fedora, PIE is enabled by default. To disable it in your spec, add:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%undefine _hardened_build</span></span></code></pre></div><p>rpm-spec</p><p>If your package meets any of the following criteria you MUST NOT disable the PIE compiler flags:</p><ul><li>Your package is long running. This means it’s likely to be started and keep running until the machine is rebooted, not start on demand and quit on idle.</li><li>Your package has suid binaries, or binaries with capabilities.</li><li>Your package runs as root.</li></ul><h2 id="debuginfo-packages" tabindex="-1">Debuginfo Packages <a class="header-anchor" href="#debuginfo-packages" aria-label="Permalink to &quot;Debuginfo Packages&quot;">​</a></h2><p>Packages should produce useful <code>-debuginfo</code> packages, or explicitly disable them when it is not possible to generate a useful one, but rpmbuild would do it anyway. Whenever a <code>-debuginfo</code> package is explicitly disabled, an explanation why it was done is required in the specfile. Debuginfo packages are discussed in more detail in a separate document,<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Debuginfo/" target="_blank" rel="noreferrer">Packaging:Debuginfo</a>.</p><h2 id="devel-packages" tabindex="-1">Devel Packages <a class="header-anchor" href="#devel-packages" aria-label="Permalink to &quot;Devel Packages&quot;">​</a></h2><p>Fedora packages must be designed with a logical separation of files. Specifically, -devel packages must be used to contain files which are intended solely for development or needed only at build-time. This is done to minimize the install footprint for users. There are some types of files which almost always belong in a -devel package:</p><ul><li>Header files (foo.h), usually found in /usr/include</li><li>Static library files when the package does not provide any matching shared library files. See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#packaging-static-libraries" target="_blank" rel="noreferrer">Packaging Static Libraries</a> for more information about this scenario.</li><li>Unversioned shared system library files, when a matching versioned shared system library file is also present. For example, if your package contains:</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/usr/lib/libfoo.so.3.0.0</span></span>
<span class="line"><span>   /usr/lib/libfoo.so.3</span></span>
<span class="line"><span>   /usr/lib/libfoo.so</span></span></code></pre></div><p>The versioned shared library files (/usr/lib/libfoo.so.3.2.0 and /usr/lib/libfoo.so.3) are necessary for users to run programs linked against libfoo, so they belong in the base package. The other, unversioned, shared library file (/usr/lib/libfoo.so) is only used to actually link libfoo to code being compiled, and is not necessary to be installed on a users system. This means that it belongs in a -devel package. Please note that in most cases, only the fully versioned shared library file (/usr/lib/libfoo.so.3.2.0) is an actual file, all of the other files are symbolic links to it. When a shared library file is only provided in an unversioned format, the packager should ask upstream to consider providing a properly versioned library file. However, in such cases, if the shared library file is necessary for users to run programs linked against it, it must go into the base package. If upstream versions the shared library file at a future point, packagers must be careful to move to the versioned layout described above.</p><h3 id="unversioned-shared-objects" tabindex="-1">Unversioned Shared Objects <a class="header-anchor" href="#unversioned-shared-objects" aria-label="Permalink to &quot;Unversioned Shared Objects&quot;">​</a></h3><p>As an additional complication, some software generates <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Unversioned_shared_objects/" target="_blank" rel="noreferrer">unversioned shared objects</a> which are not intended to be used as system libraries. These files are usually plugins or modular functionality specific to an application, and are not to be located in the ld library paths or cache. These types of unversioned shared objects do not need to go into a -devel package. They are only loaded at runtime and should be included in a private directory of the main package.</p><h3 id="exceptions-2" tabindex="-1">Exceptions <a class="header-anchor" href="#exceptions-2" aria-label="Permalink to &quot;Exceptions&quot;">​</a></h3><p>There are some notable exceptions to this packaging model, specifically:</p><ul><li>compilers often include development files in the main package because compilers are themselves only used for software development, thus, a split package model does not make any sense.</li></ul><p>When in doubt as to whether a file belongs in the base package or in -devel, packagers should consider whether the file is necessary to be present for a user to use or execute the functionality in the base package properly, or if it is only necessary for development. If it is only necessary for development, it must go into a -devel package.</p><p>As with all Fedora Packaging Guidelines, it is recognized that there are unique situations that fall outside of the boundaries of this model. Should you come across such a case, please open a ticket with the <a href="https://pagure.io/packaging-committee" target="_blank" rel="noreferrer">Fedora Packaging Committee</a> and explain it to us so that we can extend the Guidelines to address it.</p><h3 id="pkgconfig-files-foo-pc" tabindex="-1">Pkgconfig Files (foo.pc) <a class="header-anchor" href="#pkgconfig-files-foo-pc" aria-label="Permalink to &quot;Pkgconfig Files (foo.pc)&quot;">​</a></h3><p>The placement of pkgconfig(.pc) files depends on their usecase. Since they are almost always used for development purposes, they should be placed in a -devel package. A reasonable exception is when the main package itself is a development tool not installed in a user runtime, e.g. gcc or gdb.</p><h2 id="requiring-base-package" tabindex="-1">Requiring Base Package <a class="header-anchor" href="#requiring-base-package" aria-label="Permalink to &quot;Requiring Base Package&quot;">​</a></h2><p>Subpackages are often extensions for their base package and in that case they should require their base package. When a subpackage requires the base package, it <strong>MUST</strong> do so using a fully versioned arch-specific (for non-noarch packages) dependency:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Requires: %{name}%{?_isa} = %{version}-%{release}</span></span></code></pre></div><p>rpm-spec</p><p>Devel packages are an example of a package that must require their base packages using a fully versioned dependency. -libs subpackages which only contain shared libraries do not normally need to explicitly depend on their base packages as they usually do not need the base package to be functional libraries.</p><p>If you end up in a situation where the main package depends on the subpackage and the subpackage on the main package you should think carefully about why you don’t have everything in the main package.</p><h2 id="shared-libraries" tabindex="-1">Shared Libraries <a class="header-anchor" href="#shared-libraries" aria-label="Permalink to &quot;Shared Libraries&quot;">​</a></h2><h3 id="listing-shared-library-files" tabindex="-1">Listing Shared Library Files <a class="header-anchor" href="#listing-shared-library-files" aria-label="Permalink to &quot;Listing Shared Library Files&quot;">​</a></h3><p>Shared libraries installed directly into <code>%{_libdir}</code> <strong>SHOULD NOT</strong> be listed in the <code>%files</code> section of the spec by using a glob in a way that conceals important parts of the file name (e.g. <code>libfoo.so*</code>), since changes to the <code>SONAME</code> also result in a changed file name in most cases.</p><p>Otherwise, when the library bumps its <code>SONAME</code> as part of an update, this change might remain unnoticed and cause problems like broken dependencies (see the relevant <a href="https://docs.fedoraproject.org/en-US/fesco/Updates_Policy/" target="_blank" rel="noreferrer">Updates Policy</a> section for further information).</p><p>However, if the use of globs is deemed useful by the packager - for example, if the <code>Y</code> and <code>Z</code> parts of a library named <code>libfoo.so.X.Y.Z</code> change frequently, using something like <code>libfoo.so.X{,.*}</code> is recommended instead, since dependent packages usually don’t have to be rebuilt for changes of this kind.</p><h3 id="downstream-so-name-versioning" tabindex="-1">Downstream.so Name Versioning <a class="header-anchor" href="#downstream-so-name-versioning" aria-label="Permalink to &quot;Downstream.so Name Versioning&quot;">​</a></h3><p>In cases where upstream ships unversioned.so <strong>library</strong> (so this is not needed for plugins, drivers, etc.), the packager <strong>MUST</strong> try to convince upstream to start versioning it.</p><p>If that fails due to unwilling or unresponsive upstream, the packager may start versioning downstream but this must be done with caution and ideally only in rare cases. We don’t want to create a library that could conflict with upstream if they later start providing versioned shared libraries. Under no circumstances should the unversioned library be shipped in Fedora.</p><p>For downstream versioning, the name should be composed like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>libfoobar.so.0.n</span></span></code></pre></div><p>The <em>n</em> should initially be a small integer (for instance, &quot;1&quot;). we use two digits here (&quot;0.n&quot;) because the common practice with upstreams is to use only a single digit here. Using multiple digits helps us avoid potential future conflicts. Do not forget to add the SONAME field (see below) to the library.</p><p>When new versions of the library are released, you should use an <a href="https://fedoraproject.org/wiki/How_to_check_for_ABI_changes_in_a_package" target="_blank" rel="noreferrer">ABI comparison tool</a> to check for ABI differences in the built shared libraries. If it detects any incompatibilities, bump the <em>n</em> number by one.</p><h4 id="soname-handling" tabindex="-1">SONAME Handling <a class="header-anchor" href="#soname-handling" aria-label="Permalink to &quot;SONAME Handling&quot;">​</a></h4><p>When running an executable linked to shared object with SONAME field, the dynamic linker checks for this field instead of filename to determine the object with which it should link. This allows developers to simply link against the unversioned library symlink and the dynamic linker will link against the correct object.</p><p>Keep in mind that although the filename is usually the library’s SONAME plus an incrementing minor version there’s nothing that intrinsically links these. ldconfig uses the SONAME as the value for a symlink to the actual filename. The dynamic linker then uses that symlink to find the library, disregarding the actual filename. The dynamic linker merely does a simple equality check on the field and does not check for ABI incompatibilities or similar problems. This is the main reason for using an <a href="https://fedoraproject.org/wiki/How_to_check_for_ABI_changes_in_a_package" target="_blank" rel="noreferrer">ABI comparison tool</a> and incrementing the SONAME.</p><p>The SONAME field is written to the shared object by linker, using (at least in case of <code>ld</code>) the <code>-soname SONAME</code> flags. This can be passed as an option to <code>gcc</code> like this:</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ gcc $CFLAGS -Wl,-soname,libfoo.so.0.n -o libfoo.so.0.n</span></span></code></pre></div><p>If you want to check if the SONAME field is set and what value it has, use the <code>objdump</code> command (from <code>binutils</code>):</p><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ objdump -p /path/to/libfoo.so.0.n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;SONAME&#39;</span></span></code></pre></div><h2 id="packaging-static-libraries" tabindex="-1">Packaging Static Libraries <a class="header-anchor" href="#packaging-static-libraries" aria-label="Permalink to &quot;Packaging Static Libraries&quot;">​</a></h2><p>Libtool archives, <em>foo.la</em> files, SHOULD NOT be included. Packages using libtool will install these by default even if you configure with <em>--disable-static</em>, so they may need to be removed before packaging. Due to bugs in older versions of libtool or bugs in programs that use it, there are times when it is not always possible to remove *.la files without modifying the program. In most cases it is fairly easy to work with upstream to fix these issues. Note that if you are updating a library in a stable release (not devel) and the package already contains *.la files, removing the *.la files SHOULD be treated as an API/ABI change — i.e., removing them changes the interface that the library gives to the rest of the world thus MUST follow Fedora policies for potentially destabilizing updates.</p><h3 id="packaging-static-libraries-1" tabindex="-1">Packaging Static Libraries <a class="header-anchor" href="#packaging-static-libraries-1" aria-label="Permalink to &quot;Packaging Static Libraries&quot;">​</a></h3><ul><li>In general, packagers SHOULD NOT ship static libraries.</li><li>We want to be able to track which packages are using static libraries (so we can find which packages need to be rebuilt if a security flaw in a static library is fixed, for instance). There are two scenarios in which static libraries are packaged: <ol><li>**Static libraries and shared libraries.**In this case, the static libraries MUST be placed in a <em>*-static</em> subpackage. Separating the static libraries from the other development files in <em>*-devel</em> allow us to track this usage by checking which packages <code>BuildRequire</code> the <em>*-static</em> package. The intent is that whenever possible, packages will move away from using these static libraries, to the shared libraries. If the <em>*-static</em> subpackage requires headers or other files from <em>*-devel</em> in order to be useful it MUST require the <em>*-devel</em> subpackage.</li><li>**Static libraries only.**When a package only provides static libraries you MAY place all the static library files in the <em>*-devel</em> subpackage. When doing this you also MUST have a virtual Provide for the <em>*-static</em> package:<div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%package devel</span></span>
<span class="line"><span>Provides: foo-static = %{version}-%{release}</span></span></code></pre></div>rpm-spec</li></ol></li></ul><p>Packages which explicitly need to link against the static version MUST <code>BuildRequire: foo-static</code>, so that the usage can be tracked.</p><ul><li>If (and only if) a package has shared libraries which require static libraries to be functional, the static libraries can be included in the <em>*-devel</em> subpackage. The devel subpackage must have a virtual Provide for the <em>*-static</em> package, and packages dependent on it must <code>BuildRequire</code> the <em>*-static</em> package.</li></ul><h3 id="packaging-header-only-libraries" tabindex="-1">Packaging Header Only Libraries <a class="header-anchor" href="#packaging-header-only-libraries" aria-label="Permalink to &quot;Packaging Header Only Libraries&quot;">​</a></h3><p>Certain libraries, especially some C++ template libraries, are header only libraries. Since the code is generated during compile time, they act just like static libraries and need to be treated as such.</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%package devel</span></span>
<span class="line"><span>Provides: foo-static = %{version}-%{release}</span></span></code></pre></div><p>rpm-spec</p><h4 id="use-noarch-only-in-subpackages" tabindex="-1">Use noarch only in subpackages <a class="header-anchor" href="#use-noarch-only-in-subpackages" aria-label="Permalink to &quot;Use noarch only in subpackages&quot;">​</a></h4><p>The base package for a header library MUST NOT be marked noarch. This ensures that any tests are run on all architectures, and makes it possible to detect whether the build or install process has modified the headers based on the build architecture.</p><p>When the contents of subpackages, including the <code>-devel</code> package, are actually architecture-independent, they may still be marked noarch. Since the base package for a header library typically has no <code>%files</code> list, this may result in an arched package that builds only noarch rpms. This may require adding <code>%global debug_package %{nil}</code> to the spec file in order to avoid empty <code>debugsourcefiles.list</code> issues.</p><h3 id="statically-linking-executables" tabindex="-1">Statically Linking Executables <a class="header-anchor" href="#statically-linking-executables" aria-label="Permalink to &quot;Statically Linking Executables&quot;">​</a></h3><p>Executables and libraries SHOULD NOT be linked statically against libraries which come from other packages. (It is of course acceptable for files generated during a package’s build process to be linked statically against <code>.a</code> files generated as part of that build process.)</p><p>If it is necessary to link against <code>.a</code> files from a different package, a build dependency on the <code>-static</code> package (not just the <code>-devel</code> package) which provides those files MUST be present so that the usage can be tracked.</p><h2 id="bundling-and-duplication-of-system-libraries" tabindex="-1">Bundling and Duplication of System Libraries <a class="header-anchor" href="#bundling-and-duplication-of-system-libraries" aria-label="Permalink to &quot;Bundling and Duplication of System Libraries&quot;">​</a></h2><p>Fedora packages SHOULD make every effort to avoid having multiple, separate, upstream projects bundled together in a single package.</p><p>All packages whose upstreams allow them to be built against system libraries MUST be built against system libraries. In this case, bundled libraries (and/or their source code) MUST be explicitly deleted during <code>%prep</code>. Build scripts may need to be patched to deal with this situation. Whenever possible, the patch should conditionalize the use of the bundled libraries, so that the patch can be sent upstream for consideration.</p><p>All packages whose upstreams have no mechanism to build against system libraries MAY opt to carry bundled libraries, but if they do, they MUST include an indication of what they bundle. This provides a mechanism for locating libraries with bundled code which can, for example, assist in locating packages which may have particular security vulnerabilities.</p><p>To indicate an instance of bundling, first determine the name and version of the bundled library:</p><ul><li>If the bundled package also exists separately in the distribution, use the name of that package. Otherwise consult the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Naming/" target="_blank" rel="noreferrer">Naming Guidelines</a> to determine an appropriate name for the library as if it were entering the distribution as a separate package.</li><li>Use the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Versioning/" target="_blank" rel="noreferrer">Versioning Guidelines</a> to determine an appropriate version for the library, if possible. If the library has been forked from an upstream, use the upstream version that was most recently merged in or rebased onto, or the version the original library carried at the time of the fork.</li></ul><p>Then at an appropriate place in your spec, add <code>Provides: bundled(&lt;libname&gt;) = &lt;version&gt;</code> where <code>&lt;libname&gt;</code> and <code>&lt;version&gt;</code> are the name and version you determined above. If it was not possible to determine a version, use <code>Provides: bundled(&lt;libname&gt;)</code> instead.</p><p>In addition to indicating bundling in this manner, packages whose upstreams have no mechanism to build against system libraries must be contacted publicly about a path to supporting system libraries. If upstream refuses, this must be recorded in the spec file, either in comments placed adjacent to the Provides: above, or in an additional file checked into the SCM and referenced by a comment placed adjacent to the <code>Provides:</code> above.</p><h3 id="avoid-bundling-of-fonts-in-other-packages" tabindex="-1">Avoid Bundling of Fonts in Other Packages <a class="header-anchor" href="#avoid-bundling-of-fonts-in-other-packages" aria-label="Permalink to &quot;Avoid Bundling of Fonts in Other Packages&quot;">​</a></h3><p>Fonts in general-purpose formats such as Type1, OpenType TT (TTF) or OpenType CFF (OTF) are subject to specific packaging guidelines (<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/FontsPolicy/" target="_blank" rel="noreferrer">Packaging/FontsPolicy</a>), and should always be packaged in the system-wide font repositories instead of private application directories. For more information, see: <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/FontsPolicy/" target="_blank" rel="noreferrer">Packaging/FontsPolicy</a>.</p><h2 id="beware-of-rpath" tabindex="-1">Beware of rpath <a class="header-anchor" href="#beware-of-rpath" aria-label="Permalink to &quot;Beware of rpath&quot;">​</a></h2><p>Sometimes, code will hardcode specific library paths when linking binaries (using the -rpath or -R flag). This is commonly referred to as an rpath. Normally, the dynamic linker and loader (ld.so) resolve the executable’s dependencies on shared libraries and load what is required. However, when -rpath or -R is used, the location information is then hardcoded into the binary and is examined by ld.so in the beginning of the execution. Since the Linux dynamic linker is usually smarter than a hardcoded path, we usually do not permit the use of rpath in Fedora.</p><p>There is a tool called <em>check-rpaths</em> which is included in the <em>rpmdevtools</em> package. It is a good idea to add it to the <code>%__arch_install_post</code> macro in your <code>~/.rpmmacros</code> config file:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%__arch_install_post          \\</span></span>
<span class="line"><span>/usr/lib/rpm/check-rpaths     \\</span></span>
<span class="line"><span>/usr/lib/rpm/check-buildroot</span></span></code></pre></div><p>rpm-spec</p><p>When <em>check-rpaths</em> is run, you might see output like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ERROR   0001: file &#39;/usr/bin/xapian-tcpsrv&#39; contains a standard rpath &#39;/usr/lib64&#39; in [/usr/lib64]</span></span></code></pre></div><p>Any rpath flagged by check-rpaths <strong>MUST</strong> be removed.</p><h3 id="rpath-for-internal-libraries" tabindex="-1">rpath for Internal Libraries <a class="header-anchor" href="#rpath-for-internal-libraries" aria-label="Permalink to &quot;rpath for Internal Libraries&quot;">​</a></h3><p>When a program installs internal libraries they are often not installed in the system path. These internal libraries are only used for the programs that are present in the package (for example, to factor out code that’s common to the executables). These libraries are not intended for use outside of the package. When this occurs, it is acceptable for the programs within the package to use an rpath to find these libraries.</p><p>Example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Internal libraries for myapp are present in:</span></span>
<span class="line"><span>%{_libdir}/myapp/</span></span>
<span class="line"><span>%{_libdir}/myapp/libmyapp.so.0.3.4</span></span>
<span class="line"><span>%{_libdir}/myapp/libmyapp.so</span></span>
<span class="line"><span></span></span>
<span class="line"><span># myapp has an rpath to %{_libdir}/myapp/</span></span>
<span class="line"><span>readelf -d /usr/bin/myapp | grep RPATH</span></span>
<span class="line"><span> 0x0000000f (RPATH)                      Library rpath: [/usr/lib/myapp]</span></span></code></pre></div><table tabindex="0"><thead><tr><th></th><th><strong>Non-Internal Libraries</strong>: When programs outside of the package are supposed to link against the library, it is better to use the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#alternatives-to-rpath" target="_blank" rel="noreferrer">Alternative to Rpath</a> or simply move the libraries into <code>%{_libdir}</code> instead. That way the dynamic linker can find the libraries without having to link all the programs with an rpath.</th></tr></thead></table><h3 id="alternatives-to-rpath" tabindex="-1">Alternatives to rpath <a class="header-anchor" href="#alternatives-to-rpath" aria-label="Permalink to &quot;Alternatives to rpath&quot;">​</a></h3><p>Often, rpath is used because a binary is looking for libraries in a non-standard location (standard locations are /lib, /usr/lib, /lib64, /usr/lib64). If you are storing a library in a non-standard location (e.g. /usr/lib/foo/), you should include a custom config file in /etc/ld.so.conf.d/. For example, if I was putting 32 bit libraries of libfoo in /usr/lib/foo, I would want to make a file called &quot;foo32.conf&quot; in /etc/ld.so.conf.d/, which contained the following:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/usr/lib/foo</span></span></code></pre></div><p>Make sure that you also make a 64bit version of this file (e.g. foo64.conf) as well (unless the package is disabled for 64bit architectures, of course).</p><h3 id="removing-rpath" tabindex="-1">Removing rpath <a class="header-anchor" href="#removing-rpath" aria-label="Permalink to &quot;Removing rpath&quot;">​</a></h3><p>There are several different ways to fix the rpath issue:</p><ul><li>If the application uses configure, try passing the <em>--disable-rpath</em> flag to configure.</li><li>If the application uses a local copy of libtool, add the following lines to the spec after %configure:</li></ul><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%configure</span></span>
<span class="line"><span>sed -i &#39;s|^hardcode_libdir_flag_spec=.*|hardcode_libdir_flag_spec=&quot;&quot;|g&#39; libtool</span></span>
<span class="line"><span>sed -i &#39;s|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g&#39; libtool</span></span></code></pre></div><p>rpm-spec</p><ul><li>Sometimes, the code/Makefiles can be patched to remove the <em>-rpath</em> or <em>-R</em> flag from being called. This is not always easy or sane to do, however.</li><li>As a last resort, Fedora has a package called <em>chrpath</em>. When this package is installed, you can run <code>chrpath --delete</code> on the files which contain rpaths. So, in our earlier example, we’d run:</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>chrpath --delete $RPM_BUILD_ROOT%{_bindir}/xapian-tcpsrv</span></span></code></pre></div><p>Make sure that you remember to add a <strong>BuildRequires: chrpath</strong> if you end up using this method.</p><h2 id="configuration-files" tabindex="-1">Configuration Files <a class="header-anchor" href="#configuration-files" aria-label="Permalink to &quot;Configuration Files&quot;">​</a></h2><p>Configuration files must be marked as such in packages.</p><p>As a rule of thumb, use <code>%config(noreplace)</code> instead of plain <code>%config</code> unless your best, educated guess is that doing so will break things. In other words, think hard before overwriting local changes in configuration files n package upgrades. An example case when <strong>not</strong> to use <code>noreplace</code> is when a package’s configuration file changes so that the new package revision wouldn’t work with the config file from the previous package revision. Whenever plain <code>%config</code> is used, add a brief comment to the specfile explaining why.</p><p>Don’t use %config or %config(noreplace) under /usr. /usr is deemed to not contain configuration files in Fedora.</p><h3 id="configuration-of-package-managers" tabindex="-1">Configuration of Package Managers <a class="header-anchor" href="#configuration-of-package-managers" aria-label="Permalink to &quot;Configuration of Package Managers&quot;">​</a></h3><p>Packages MUST NOT install repository configuration files which violate the <a href="https://docs.fedoraproject.org/en-US/fesco/Third_Party_Repository_Policy/" target="_blank" rel="noreferrer">Third Party Repository Policy</a>, unless those files are installed under <code>%{_docdir}</code>.</p><h2 id="per-product-configuration" tabindex="-1">Per-Product Configuration <a class="header-anchor" href="#per-product-configuration" aria-label="Permalink to &quot;Per-Product Configuration&quot;">​</a></h2><p>In the Fedora.next world, we will have a set of curated Fedora Products as well as the availability of classic Fedora. Historically, we have maintained a single set of configuration defaults for all Fedora installs but different target use-cases have different needs. Please see the <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Per-Product_Configuration/" target="_blank" rel="noreferrer">Per-Product Configuration Guidelines</a> for instructions on how to create packages that need to behave differently between Fedora.next Products.</p><h2 id="initscripts" tabindex="-1">Initscripts <a class="header-anchor" href="#initscripts" aria-label="Permalink to &quot;Initscripts&quot;">​</a></h2><p>SystemV-style initscripts are forbidden in Fedora. Systemd units must be used instead.</p><h2 id="systemd-units" tabindex="-1">Systemd Units <a class="header-anchor" href="#systemd-units" aria-label="Permalink to &quot;Systemd Units&quot;">​</a></h2><p>Detailed guidelines for packaging systemd units and systemd-managed services are <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Systemd/" target="_blank" rel="noreferrer">here</a>.</p><h2 id="desktop-files" tabindex="-1">Desktop Files <a class="header-anchor" href="#desktop-files" aria-label="Permalink to &quot;Desktop Files&quot;">​</a></h2><p>If a package contains a GUI application, then it needs to also include a properly installed.desktop file. For the purposes of these guidelines, a GUI application is defined as any application which draws a window and runs from within that window. Installed.desktop files MUST follow the <a href="https://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html" target="_blank" rel="noreferrer">desktop-entry-spec</a>, paying particular attention to validating correct usage of Name, GenericName,<a href="https://standards.freedesktop.org/menu-spec/latest/apa.html" target="_blank" rel="noreferrer">Categories</a>,<a href="https://standards.freedesktop.org/startup-notification-spec/startup-notification-latest.txt" target="_blank" rel="noreferrer">StartupNotify</a> entries.</p><h3 id="icon-tag-in-desktop-files" tabindex="-1">Icon Tag in Desktop Files <a class="header-anchor" href="#icon-tag-in-desktop-files" aria-label="Permalink to &quot;Icon Tag in Desktop Files&quot;">​</a></h3><p>The icon tag can be specified in two ways:</p><ul><li><p>Full path to specific icon file:</p></li><li><p>Short name without file extension:</p></li></ul><p><code>Icon=comical</code></p><p>The short name without file extension is preferred, because it allows for icon theming (it assumes.png by default, then tries.svg and finally.xpm), but either method is acceptable.</p><h3 id="desktop-file-creation" tabindex="-1">.desktop File Creation <a class="header-anchor" href="#desktop-file-creation" aria-label="Permalink to &quot;.desktop File Creation&quot;">​</a></h3><p>If the package doesn’t already include and install its own.desktop file, you need to make your own. You can do this by including a.desktop file you create as a Source: (e.g. Source3: %{name}.desktop) or generating it in the spec file. Here are the contents of a sample.desktop file (comical.desktop):</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Desktop Entry]</span></span>
<span class="line"><span>Name=Comical</span></span>
<span class="line"><span>GenericName=Comic Archive Reader</span></span>
<span class="line"><span>Comment=Open .cbr &amp; .cbz files</span></span>
<span class="line"><span>Exec=comical</span></span>
<span class="line"><span>Icon=comical</span></span>
<span class="line"><span>Terminal=false</span></span>
<span class="line"><span>Type=Application</span></span>
<span class="line"><span>Categories=Graphics;</span></span></code></pre></div><h3 id="desktop-file-install-usage" tabindex="-1">desktop-file-install Usage <a class="header-anchor" href="#desktop-file-install-usage" aria-label="Permalink to &quot;desktop-file-install Usage&quot;">​</a></h3><p>It is not simply enough to just include the.desktop file in the package, one MUST run <code>desktop-file-install</code> (in <code>%install</code>) OR <code>desktop-file-validate</code> (in <code>%check</code> or <code>%install</code>) and have <code>BuildRequires: desktop-file-utils</code>, to help ensure.desktop file safety and spec-compliance.<code>desktop-file-install</code> MUST be used if the package does not install the file or there are changes desired to the.desktop file (such as add/removing categories, etc).<code>desktop-file-validate</code> MAY be used instead if the.desktop file’s content/location does not need modification. Here are some examples of usage:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>desktop-file-install                                    \\</span></span>
<span class="line"><span>--dir=%{buildroot}%{_datadir}/applications              \\</span></span>
<span class="line"><span>%{SOURCE3}</span></span></code></pre></div><p>rpm-spec</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>desktop-file-install                                    \\</span></span>
<span class="line"><span>--add-category=&quot;AudioVideo&quot;                             \\</span></span>
<span class="line"><span>--delete-original                                       \\</span></span>
<span class="line"><span>--dir=%{buildroot}%{_datadir}/applications              \\</span></span>
<span class="line"><span>%{buildroot}/%{_datadir}/applications/foo.desktop</span></span></code></pre></div><p>rpm-spec</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>desktop-file-validate %{buildroot}/%{_datadir}/applications/foo.desktop</span></span></code></pre></div><p>rpm-spec</p><p>Do <strong>not</strong> apply a vendor tag to.desktop files (using --vendor).</p><h2 id="appdata-files" tabindex="-1">AppData Files <a class="header-anchor" href="#appdata-files" aria-label="Permalink to &quot;AppData Files&quot;">​</a></h2><p>Packages containing graphical applications should include AppData files. See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/AppData/" target="_blank" rel="noreferrer">Packaging:AppData</a> for the relevant guidelines.</p><h2 id="macros" tabindex="-1">Macros <a class="header-anchor" href="#macros" aria-label="Permalink to &quot;Macros&quot;">​</a></h2><p>Packagers are strongly encouraged to use macros instead of hard-coded directory names (see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/RPMMacros/" target="_blank" rel="noreferrer">RPMMacros</a>). However, in situations where the macro is longer than the path it represents, or situations where the packager feels it is cleaner to use the actual path, the packager is permitted to use the actual path instead of the macro. There are several caveats to this approach:</p><ul><li>The package must be consistent. For any given path, within the same spec, use either a hard-coded path or a macro, not a combination of the two.</li><li>%{_libdir} must always be used for binary libraries due to multi-lib, you may not substitute a hard-coded path.</li></ul><p>Macros with names beginning with underscores are generally considered to be implementation details internal to RPM and its associated macro packages and SHOULD NOT be referenced in specfiles except to set their values in order to influence RPM behavior. This implies that macro forms of system executables SHOULD NOT be used. For example, <code>rm</code> should be used in preference to <code>%{__rm}</code>. However, in some cases needed data are simply not provided under names which are not prefixed with underscores. If that is the case, the macro named with leading underscores MAY be used. Authors of macro packages are encouraged to avoid using leading underscores when naming macros which are intended to be used in specfiles (as opposed to being set).</p><p>Having macros in a Source: or Patch: line is a matter of style. Some people enjoy the ready readability of a source line without macros. Others prefer the ease of updating for new versions when macros are used. In all cases, remember to be consistent in your spec file and verify that the URLs you list are valid. spectool (from the rpmdevtools package) can aid you in checking that whether the URL contains macros or not.</p><p>If you need to determine the actual string when it contains macros, you can use rpm. For example, to determine the actual Source: value, you can run:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rpm -q --specfile foo.spec --qf &quot;$(grep -i ^Source foo.spec)\\n&quot;</span></span></code></pre></div><h3 id="autosetup" tabindex="-1">%autosetup <a class="header-anchor" href="#autosetup" aria-label="Permalink to &quot;%autosetup&quot;">​</a></h3><p>As an alternative to the usual <code>%setup</code> macro, the <code>%autosetup</code> can be used. In addition to the normal %setup tasks, it will apply all defined Patch# items in the spec automatically. It is also capable of handling VCS formatted patch files, but this will require additional BuildRequires, and assumes that <em>all</em> patch files in the spec are formatted for that single VCS type. For this reason, it is not recommended that you specify a VCS with <code>%autosetup</code>. For more details on proper use of <code>%autosetup</code>, refer to the <a href="https://rpm-software-management.github.io/rpm/manual/autosetup.html" target="_blank" rel="noreferrer">RPM documentation</a>.</p><h3 id="using-buildroot-and-optflags-vs-rpm-build-root-and-rpm-opt-flags" tabindex="-1">Using %{buildroot} and %{optflags} vs $RPM_BUILD_ROOT and $RPM_OPT_FLAGS <a class="header-anchor" href="#using-buildroot-and-optflags-vs-rpm-build-root-and-rpm-opt-flags" aria-label="Permalink to &quot;Using %{buildroot} and %{optflags} vs $RPM\\_BUILD\\_ROOT and $RPM\\_OPT\\_FLAGS&quot;">​</a></h3><p>There are two styles of defining the rpm Build Root and Optimization Flags in a spec file:</p>`,386),e("table",{tabindex:"0"},[e("thead",null,[e("tr",null,[e("th"),e("th",null,"macro style"),e("th",null,"variable style")])]),e("tbody",null,[e("tr",null,[e("td",null,"Build Root"),e("td",{buildroot:""},"%"),e("td",null,"$RPM_BUILD_ROOT")]),e("tr",null,[e("td",null,"Opt. Flags"),e("td",{optflags:""},"%"),e("td",null,"$RPM_OPT_FLAGS")])])],-1),a(`<p>There is very little value in choosing one style over the other, since they will resolve to the same values in all scenarios. You should pick a style and use it consistently throughout your packaging.</p><p>Mixing the two styles, while valid, is bad from a QA and usability point of view, and should not be done in Fedora packages.</p><h3 id="why-the-makeinstall-macro-should-not-be-used" tabindex="-1">Why the %makeinstall Macro Should Not Be Used <a class="header-anchor" href="#why-the-makeinstall-macro-should-not-be-used" aria-label="Permalink to &quot;Why the %makeinstall Macro Should Not Be Used&quot;">​</a></h3><p>Fedora’s RPM includes a <code>%makeinstall</code> macro but it must <strong>NOT</strong> be used when make install DESTDIR=%{buildroot} works. %makeinstall is a kludge that can work with Makefiles that don’t make use of the DESTDIR variable but it has the following potential issues:</p><ul><li><code>%makeinstall</code> overrides a set of Make variables during &quot;make install&quot; and prepends the %{buildroot} path, i.e. it performs make prefix=&quot;%{buildroot}%{_prefix}&quot; libdir=&quot;%{buildroot}%{_libdir} …&quot;.</li><li>It is error-prone and can have unexpected effects when run against less than perfect Makefiles, e.g., the buildroot path may be included in installed files where variables are substituted at install-time.</li><li>It can trigger unnecessary and wrong rebuilds when executing &quot;make install&quot;, since the Make variables have different values compared with the %build section.</li><li>If a package contains libtool archives, it can cause broken *.la files to be installed.</li></ul><p>Instead, Fedora packages should use: <code>%make_install</code> (Note the &quot;_&quot;!),<code>make DESTDIR=%{buildroot} install</code> or <code>make DESTDIR=$RPM_BUILD_ROOT install</code>. Those all do the same thing.</p><h3 id="source-rpm-buildtime-macros" tabindex="-1">Source RPM Buildtime Macros <a class="header-anchor" href="#source-rpm-buildtime-macros" aria-label="Permalink to &quot;Source RPM Buildtime Macros&quot;">​</a></h3><p>All macros in <code>Summary:</code> and <code>%description</code> need to be expandable at srpm buildtime. Because SRPMs are built without the package’s BuildRequires installed, depending on macros defined outside of the spec file can easily lead to the unexpanded macros showing up in the built SRPM. One way to check is to create a minimal chroot and build the srpm:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mock --init</span></span>
<span class="line"><span>mock --copyin [SRPM] /</span></span>
<span class="line"><span>mock --shell bash</span></span>
<span class="line"><span>rpm -ivh [SRPM]</span></span>
<span class="line"><span>cd /builddir/build/SPECS</span></span>
<span class="line"><span>rpmbuild -bs --nodeps [SRPM]</span></span>
<span class="line"><span>rpm -qpiv /builddir/build/SRPMS/[SRPM]</span></span></code></pre></div><p>Check the <code>rpm</code> output for unexpanded macros (<code>%{foo}</code>) or missing information (when\`%{?foo}\` is expanded to the empty string). Even easier is to simply avoid macros in <code>Summary:</code> and <code>%description</code> unless they are defined in the current spec file.</p><h3 id="improper-use-of-sourcedir" tabindex="-1">Improper Use of %_sourcedir <a class="header-anchor" href="#improper-use-of-sourcedir" aria-label="Permalink to &quot;Improper Use of %\\_sourcedir&quot;">​</a></h3><p>Packages which use files itemized as Source# files, must refer to those files by their <code>Source#</code> macro name, and must not use <code>$RPM_SOURCE_DIR</code> or <code>%{sourcedir}</code> to refer to those files. See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/RPM_Source_Dir/" target="_blank" rel="noreferrer">Packaging:RPM_Source_Dir</a> for full details.</p><h3 id="software-collection-macros" tabindex="-1">Software Collection Macros <a class="header-anchor" href="#software-collection-macros" aria-label="Permalink to &quot;Software Collection Macros&quot;">​</a></h3><p><a href="https://fedoraproject.org/wiki/User:Toshio/SCL_Guidelines_(draft)" target="_blank" rel="noreferrer">Software Collections</a> are to be kept to separate packages from mainstream packages similar to how <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/MinGW/" target="_blank" rel="noreferrer">MingW packages</a> are managed.</p><p>In the past, SCL macros were allowed to be present inside of mainstream packages if they were not used. Since we’re now building SCLs, we are now enforcing a strict separation. Packages <strong>MUST</strong> be updated to restrict SCL macros to only those packages particularly approved as part of an SCL.</p><h3 id="packaging-of-additional-rpm-macros" tabindex="-1">Packaging of Additional RPM Macros <a class="header-anchor" href="#packaging-of-additional-rpm-macros" aria-label="Permalink to &quot;Packaging of Additional RPM Macros&quot;">​</a></h3><p>Additional RPM macros must be stored in %{_rpmmacrodir}. They must be named using the syntax &quot;macros.$PACKAGE&quot; (e.g. macros.perl).</p><p>Normally, these files are packaged in the -devel subpackage, since they are usually only needed for building other packages. However, in some situations, this is not always ideal and packagers are encouraged to use their best judgment when determining the proper package for these files. RPM macro files MUST NOT be marked as <code>%config</code>.</p><h2 id="scripting-inside-of-specfiles" tabindex="-1">Scripting Inside of Specfiles <a class="header-anchor" href="#scripting-inside-of-specfiles" aria-label="Permalink to &quot;Scripting Inside of Specfiles&quot;">​</a></h2><p>Sometimes it is necessary to write a short script (perhaps a one-liner) that is executed in the <code>%prep</code>, <code>%build</code>, or <code>%install</code> sections of a spec file to get some information about the build environment. In order to simplify the dependency graph, spec files should only use the following languages for this purpose:</p><ul><li>Python</li><li>Perl</li><li>Standard programs used in shell programing, for instance gawk or sed</li><li>Lua (as supported by the native lua interpreter in rpm)</li></ul><p>Additionally, if your package cannot build without a specific scripting language (such as Ruby, or Tcl), and therefore already has a BuildRequires on that language, it may also be called from the spec file.</p><p>Note: If you call Perl or Python in your spec file (and it is not already a BuildRequires for the package), you need to explicitly add a BuildRequires for Perl or Python.</p><h2 id="global-preferred-over-define" tabindex="-1">%global Preferred Over %define <a class="header-anchor" href="#global-preferred-over-define" aria-label="Permalink to &quot;%global Preferred Over %define&quot;">​</a></h2><p>Use <code>%global</code> instead of <code>%define</code>, unless you really need only locally defined submacros within other macro definitions (a very rare case).</p><p>Rationale: The two macro defining statements behave the same when they are at the top level of rpm’s nesting level.</p><p>But when they are used in nested macro expansions (like in <code>%{!?foo: ... }</code> constructs,<code>%define</code> theoretically only lasts until the end brace (local scope), while <code>%global</code> definitions have global scope.</p><p>Note that %define and %global differ in more ways than just scope: the body of a %define’d macro is lazily expanded (i.e., when used), but the body of %global is expanded at definition time. It’s possible to use %%-escaping to force lazy expansion of %global.</p><h2 id="handling-locale-files" tabindex="-1">Handling Locale Files <a class="header-anchor" href="#handling-locale-files" aria-label="Permalink to &quot;Handling Locale Files&quot;">​</a></h2><p>Translation files may be handled by different programs for different frameworks. Make sure you add BuildRequires: for the correct package or else your package could fail to generate translation files in the buildroot.</p><p>If the package uses gettext for translations, add</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>BuildRequires: gettext</span></span></code></pre></div><p>rpm-spec</p><p>For Qt-based packages that use the Linguist tool chain, for the localization utilities add the appropriate qtX-linguist package</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>BuildRequires: qt6-linguist</span></span></code></pre></div><p>rpm-spec</p><p>If you have few enough locale files that they can all go into one package, you can use the <code>%find_lang</code> macro. (If you need to split your package into separate language packs, please see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Langpacks/" target="_blank" rel="noreferrer">the langpack guidelines</a>.) This macro will locate all of the them belonging to your package (by name), and put this list in a file. You can then use that file to include all of the locales.<code>%find_lang</code> should be run in the %install section of your spec file, after all of the files have been installed into the buildroot. The correct syntax for <code>%find_lang</code> is usually:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%find_lang %{name}</span></span></code></pre></div><p>rpm-spec</p><p>In some cases, the application may use a different &quot;name&quot; for its locales. You may have to look at the locale files and see what they are named. If they are named <code>myapp.mo</code>, then you will need to pass <code>myapp</code> to <code>%find_lang</code> instead of <code>%{name}</code>. After <code>%find_lang</code> is run, it will generate a file in the active directory (by default, the top level of the source dir). This file will be named based on what you passed as the option to the <code>%find_lang</code> macro. Usually, it will be named <code>%{name}.lang</code>. You should then use this file in the <code>%files</code> list to include the locales detected by <code>%find_lang</code>. To do this, you should include it with the -f parameter to <code>%files</code>.</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%files -f %{name}.lang</span></span>
<span class="line"><span>%{_bindir}/foobar</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>rpm-spec</p><p>Note that <code>%find_lang</code> by default searches for gettext locales, but it can also handle Qt translations, localised manpages and help files.</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%find_lang %{name} --with-gnome</span></span></code></pre></div><p>rpm-spec</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%find_lang %{name} --with-kde</span></span></code></pre></div><p>rpm-spec</p><p>To process Qt’s <code>.qm</code> binary translation files use</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%find_lang %{name} --with-qt</span></span></code></pre></div><p>rpm-spec</p><p>To process localised manpages (doesn’t include the default, non-localised one), use</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%find_lang %{name} --with-man</span></span></code></pre></div><p>rpm-spec</p><p>To see all the options, run <code>/usr/lib/rpm/find-lang.sh</code> in the terminal.</p><p>Names different from <code>%{name}</code> (e.g. multiple manpages) must be handled via separate calls to <code>%find_lang</code>.</p><p>Here is an example of proper usage of <code>%find_lang</code>, in <code>foo.spec</code> with the &quot;foo&quot; application localised using gettext and man pages named &quot;bar&quot; instead of &quot;foo&quot;:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Name: foo</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>%setup -q</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%build</span></span>
<span class="line"><span>%configure --with-cheese</span></span>
<span class="line"><span>make %{?_smp_mflags}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%install</span></span>
<span class="line"><span>make DESTDIR=%{buildroot} install</span></span>
<span class="line"><span>%find_lang %{name}</span></span>
<span class="line"><span>%find_lang bar --with-man</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%files -f %{name}.lang -f bar.lang</span></span>
<span class="line"><span>%license LICENSE</span></span>
<span class="line"><span>%doc README</span></span>
<span class="line"><span>%{_bindir}/%{name}</span></span>
<span class="line"><span>%{_mandir}/man1/bar.1*</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%changelog</span></span>
<span class="line"><span>* Fri Jan 13 2012 Karel Volny &lt;kvolny@redhat.com&gt; 0.1-2</span></span>
<span class="line"><span>- add man pages example</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Thu May 4 2006 Tom &quot;spot&quot; Callaway &lt;tcallawa@redhat.com&gt; 0.1-1</span></span>
<span class="line"><span>- sample spec that uses %%find_lang</span></span></code></pre></div><p>rpm-spec</p><h3 id="why-do-we-need-to-use-find-lang" tabindex="-1">Why do we need to use %find_lang? <a class="header-anchor" href="#why-do-we-need-to-use-find-lang" aria-label="Permalink to &quot;Why do we need to use %find\\_lang?&quot;">​</a></h3><p>Using <code>%find_lang</code> helps keep the spec file simple, and helps avoid several other packaging mistakes.</p><ul><li>Packages that use <code>%{_datadir}/*</code> to grab all the locale files in one line also grab ownership of the locale directories, which is not permitted.</li><li>Most packages that have locales have lots of locales. Using <code>%find_lang</code> is much easier in the spec file than having to do:</li></ul><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%{_datadir}/locale/ar/LC_MESSAGES/%{name}.mo</span></span>
<span class="line"><span>%{_datadir}/locale/be/LC_MESSAGES/%{name}.mo</span></span>
<span class="line"><span>%{_datadir}/locale/cs/LC_MESSAGES/%{name}.mo</span></span>
<span class="line"><span>%{_datadir}/locale/de/LC_MESSAGES/%{name}.mo</span></span>
<span class="line"><span>%{_datadir}/locale/es/LC_MESSAGES/%{name}.mo</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>rpm-spec</p><ul><li>As new locale files appear in later package revisions,<code>%find_lang</code> will automatically include them when it is run, preventing you from having to update the spec any more than is necessary.</li></ul><p>Keep in mind that usage of <code>%find_lang</code> in packages containing locales is a MUST unless the locale files are broken out into langpacks. In which case, you should follow <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Langpacks/" target="_blank" rel="noreferrer">the langpack guidelines</a>.</p><h2 id="log-files" tabindex="-1">Log Files <a class="header-anchor" href="#log-files" aria-label="Permalink to &quot;Log Files&quot;">​</a></h2><p>Packages which generate log files should write out their logfiles in a package-specific (and package owned) directory under %{_localstatedir}/log. Unless the software being packaged rotates its own logs, it must also ship a logrotate config file to rotate its log file(s).</p><h3 id="logrotate-config-file" tabindex="-1">logrotate Config File <a class="header-anchor" href="#logrotate-config-file" aria-label="Permalink to &quot;logrotate Config File&quot;">​</a></h3><p>Logrotate config files should be named in a way that matches the daemon/software which is generating the logs, which is usually (though not always) the same name as the package. When unsure, use &quot;%{name}.conf&quot;. These files must be placed in %{_sysconfdir}/logrotate.d, and should use standard file permissions (0644) and ownership (root:root).</p><p>Since these are config files, they must be marked as %config(noreplace) in the %files list.</p><h4 id="example-minimal-logrotate-config-file" tabindex="-1">Example Minimal logrotate Config File <a class="header-anchor" href="#example-minimal-logrotate-config-file" aria-label="Permalink to &quot;Example Minimal logrotate Config File&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/var/log/example/*log {</span></span>
<span class="line"><span>    missingok       # If the log file is missing, go on to the next one without issuing an error message</span></span>
<span class="line"><span>    notifempty      # Don&#39;t do any rotation if the logfile is empty</span></span>
<span class="line"><span>    compress        # Compress older files with gzip</span></span>
<span class="line"><span>    delaycompress       # Don&#39;t compress yesterdays files</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>When adding file copying commands in the spec file, consider using a command that preserves the files&#39; timestamps, e.g., <code>cp -p</code> or <code>install -p</code>.</p><p>When downloading sources, patches etc., consider using a client that preserves the upstream timestamps. For example <code>wget -N</code> or <code>curl -R</code>. To make the change global for wget, add this to your <code>~/.wgetrc</code>: <code>timestamping = on</code>, and for curl, add to your <code>~/.curlrc</code>: <code>-R</code>.</p><h2 id="parallel-make" tabindex="-1">Parallel Make <a class="header-anchor" href="#parallel-make" aria-label="Permalink to &quot;Parallel Make&quot;">​</a></h2><p>Whenever possible, invocations of <code>make</code> should be done as</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%make_build</span></span></code></pre></div><p>rpm-spec</p><p>This generally speeds up builds and especially on SMP machines.</p><p>Do make sure, however, that the package builds cleanly this way as some make files do not support parallel building. Therefore you should consider adding</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%_smp_mflags -j3</span></span></code></pre></div><p>rpm-spec</p><p>to your <code>~/.rpmmacros</code> file — even on UP machines — as this will expose most of these errors.</p><h2 id="scriptlets" tabindex="-1">Scriptlets <a class="header-anchor" href="#scriptlets" aria-label="Permalink to &quot;Scriptlets&quot;">​</a></h2><p>Packages may contain pieces of run-time code that are triggered during DNF transactions. These are called sriptlets and are documented <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Scriptlets/" target="_blank" rel="noreferrer">here</a>.</p><h2 id="build-scripts" tabindex="-1">Build Scripts <a class="header-anchor" href="#build-scripts" aria-label="Permalink to &quot;Build Scripts&quot;">​</a></h2><p>Build scripts of the packages (%prep, %build, %install, %check and %clean) may only alter files (create, modify, delete) under %{buildroot}, %{_builddir} and valid temporary locations like /tmp, /var/tmp (or $TMPDIR or %{_tmppath} as set by the rpmbuild process) according to the following matrix</p>`,87),e("table",{tabindex:"0"},[e("thead",null,[e("tr",null,[e("th"),e("th",null,"/tmp, /var/tmp, $TMPDIR, %{_tmppath}"),e("th",null,"%{_builddir}"),e("th",{buildroot:""},"%")])]),e("tbody",null,[e("tr",null,[e("td",null,"%prep"),e("td",null,"yes"),e("td",null,"yes"),e("td",null,"no")]),e("tr",null,[e("td",null,"%build"),e("td",null,"yes"),e("td",null,"yes"),e("td",null,"no")]),e("tr",null,[e("td",null,"%install"),e("td",null,"yes"),e("td",null,"yes"),e("td",null,"yes")]),e("tr",null,[e("td",null,"%check"),e("td",null,"yes"),e("td",null,"yes"),e("td",null,"no")]),e("tr",null,[e("td",null,"%clean"),e("td",null,"yes"),e("td",null,"yes"),e("td",null,"yes")])])],-1),a(`<p>Further clarification: That should hold true irrespective of the builder’s uid.</p><h2 id="build-packages-with-separate-user-accounts" tabindex="-1">Build Packages with Separate User Accounts <a class="header-anchor" href="#build-packages-with-separate-user-accounts" aria-label="Permalink to &quot;Build Packages with Separate User Accounts&quot;">​</a></h2><p>When building software, which you have not conducted a full security-audit on, protect sensitive data, such as your GPG private key, in a separate user account.</p><p>The same applies to reviewers/testers. Rebuild src.rpms in a separate account which does not have access to any sensitive data.</p><h2 id="relocatable-packages" tabindex="-1">Relocatable Packages <a class="header-anchor" href="#relocatable-packages" aria-label="Permalink to &quot;Relocatable Packages&quot;">​</a></h2><p>The use of RPM’s facility for generating relocatable packages is strongly discouraged. It is difficult to make work properly, impossible to use from the installer or from yum, and not generally necessary if other packaging guidelines are followed. However, in the unlikely event that you have a good reason to make a package relocatable, you MUST state this intent and reasoning in the request for package review.</p><h2 id="file-and-directory-ownership" tabindex="-1">File and Directory Ownership <a class="header-anchor" href="#file-and-directory-ownership" aria-label="Permalink to &quot;File and Directory Ownership&quot;">​</a></h2><p>Your package should own all of the files that are installed as part of the %install process.</p><p>In most cases, it should not be necessary for multiple packages to contain identical copies of the same file. However, if it is necessary, multiple packages may contain identical copies of the same file, as long as the following requirements are met:</p><ul><li>The packages sharing ownership of the identical files are built from a single SRPM.</li></ul><p>OR</p><ul><li>The packages sharing ownership of the identical files are not in a dependency chain (e.g. if package A requires package B, they should not both contain identical files, either A or B must own the common files, but not both.)</li></ul><p>In addition, identical files are defined as files which are always identical in content, checksum, permissions, and location on the filesystem in each package.</p><p>One notable type of file that is often shared identically between subpackages is the license text. There are certain situations where it is required to duplicate the license text across multiple %files section within a package. For more details, please refer to <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/LicensingGuidelines/#subpackage-licensing" target="_blank" rel="noreferrer">Subpackage Licensing</a>.</p><p>Directory ownership is a little more complex than file ownership. Packages must own all directories they put files in, except for:</p><ul><li>any directories owned by the <code>filesystem</code>, <code>man</code>, or other explicitly created <code>-filesystem</code> packages</li><li>any directories owned by other packages in your package’s natural dependency chain</li></ul><p>In this context, a package’s &quot;natural dependency chain&quot; is defined as the set of packages necessary for that package to function normally. To be specific, you do not need to require a package for the sole fact that it happens to own a directory that your package places files in. If your package already requires that package for other reasons, then your package should not also own that directory.</p><p>In all cases we are guarding against unowned directories being present on a system. Please see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/UnownedDirectories/" target="_blank" rel="noreferrer">Packaging:UnownedDirectories</a> for the details.</p><table tabindex="0"><thead><tr><th></th><th>When co-owning directories, you <strong>must</strong> ensure that the ownership and permissions on the directory match in all packages that own it.</th></tr></thead></table><p>Here are examples that describe how to handle most cases of directory ownership.</p><h3 id="the-directory-is-wholly-contained-in-your-package-or-involves-core-functionality-of-your-package" tabindex="-1">The directory is wholly contained in your package, or involves core functionality of your package <a class="header-anchor" href="#the-directory-is-wholly-contained-in-your-package-or-involves-core-functionality-of-your-package" aria-label="Permalink to &quot;The directory is wholly contained in your package, or involves core functionality of your package&quot;">​</a></h3><p>An example:</p><h3 id="the-directory-is-also-owned-by-a-package-implementing-required-functionality-of-your-package" tabindex="-1">The directory is also owned by a package implementing required functionality of your package <a class="header-anchor" href="#the-directory-is-also-owned-by-a-package-implementing-required-functionality-of-your-package" aria-label="Permalink to &quot;The directory is also owned by a package implementing required functionality of your package&quot;">​</a></h3><p>An example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pam owns the /etc/pam.d directory</span></span>
<span class="line"><span>gdm places files into /etc/pam.d</span></span>
<span class="line"><span>gdm depends on pam to function normally, and would Require: pam (either implicitly or explicitly) separate from the directory ownership.</span></span></code></pre></div><p>Solution: the <code>pam</code> package should own the <code>/etc/pam.d</code> directory, and <code>gdm</code> should <code>Require:</code> the <code>pam</code> package.</p><h3 id="the-directory-is-owned-by-a-package-which-is-not-required-for-your-package-to-function" tabindex="-1">The directory is owned by a package which is not required for your package to function <a class="header-anchor" href="#the-directory-is-owned-by-a-package-which-is-not-required-for-your-package-to-function" aria-label="Permalink to &quot;The directory is owned by a package which is not required for your package to function&quot;">​</a></h3><p>Some packages create and own directories with the intention of permitting other packages to store appropriate files, but those other packages do not need that original package to be present to function properly.</p><p>An example:</p><p>Sometimes, it may be preferable for such directories to be owned by an &quot;artificial filesystem&quot; package, such as <code>mozilla-filesystem</code>. These packages are designed to be explicitly required when other packages store files in their directories, thus, in such situations, these packages should explicitly Require the artificial filesystem package and not multiply own those directories. Packagers should consider the number of affected directories and packages when determining whether to create artificial filesystem packages, and use their own best judgement to determine if this is necessary or not.</p><table tabindex="0"><thead><tr><th></th><th><strong>Rule of Thumb</strong>: When determining whether this exception applies, packagers and reviewers should ask this question: Do the files in this common directory enhance or add functionality to another package, where that other package is not necessary to be present for the primary functionality of this package?</th></tr></thead></table><h3 id="the-package-you-depend-on-to-provide-a-directory-may-choose-to-own-a-different-directory-in-a-later-version-and-your-package-will-run-unmodified-with-that-later-version" tabindex="-1">The package you depend on to provide a directory may choose to own a different directory in a later version and your package will run unmodified with that later version <a class="header-anchor" href="#the-package-you-depend-on-to-provide-a-directory-may-choose-to-own-a-different-directory-in-a-later-version-and-your-package-will-run-unmodified-with-that-later-version" aria-label="Permalink to &quot;The package you depend on to provide a directory may choose to own a different directory in a later version and your package will run unmodified with that later version&quot;">​</a></h3><p>An example involving Perl modules:</p><p>Assume <code>perl-A-B</code> depends on <code>perl-A</code> and installs files into /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/A/B. The base Perl package guarantees that it will own /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi for as long as it remains compatible with version 5.8.8, but a future upgrade of the <code>perl-A</code> package may install into (and thus own) /usr/lib/perl5/vendor_perl/5.9.0/i386-linux-thread-multi/A. So the <code>perl-A-B</code> package needs to own /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/A as well as /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/A/B in order to maintain proper ownership.</p><h3 id="file-permissions" tabindex="-1">File Permissions <a class="header-anchor" href="#file-permissions" aria-label="Permalink to &quot;File Permissions&quot;">​</a></h3><p>Permissions on files MUST be set properly. Inside of /usr, files should be owned by root:root unless a more specific user or group is needed for security. They MUST be universally readable (and executable if appropriate). Outside of /usr, non-config and non-state files SHOULD be owned by root:root, universally readable (and executable if appropriate) unless circumstances require otherwise.</p><p>The default file mode is 0644 or 0755. Directories should be mode 0755. Most well behaved build scripts and rpm will use these defaults. If the directory needs to be group writable, it SHOULD also have the setgid bit set so that files written there are owned by that group. These directories SHOULD have mode 2775.</p><p>The %defattr directive in the %files list SHOULD ONLY be used when setting a non-default value, or to reset to the default value after having set a non-default value.</p><h3 id="explicit-lists" tabindex="-1">Explicit lists <a class="header-anchor" href="#explicit-lists" aria-label="Permalink to &quot;Explicit lists&quot;">​</a></h3><p>In particular, the following <strong>SHOULD NOT</strong> be used in <code>%files</code>:</p><ul><li><code>%{_bindir}/*</code></li><li><code>%{_datadir}/*</code></li><li><code>%{_includedir}/*</code></li><li><code>%{_mandir}/*</code></li><li><code>%{_docdir}/*</code></li></ul><p>This rule serves as a check against common mistakes which are otherwise hard to detect. It does limit some possibilities for automation.</p><p>The most common mistake this rule prevents is upstream adding new commands in <code>%{_bindir}/*</code>. You should always check such changes for <a href="https://docs.fedoraproject.org/en-US/packaging-guidelines/Conflicts/#_common_conflicting_files_cases_and_solutions" target="_blank" rel="noreferrer">conflicts</a>, and keep the list of such files explicit and auditable.</p><h2 id="users-and-groups" tabindex="-1">Users and Groups <a class="header-anchor" href="#users-and-groups" aria-label="Permalink to &quot;Users and Groups&quot;">​</a></h2><p>Some packages require or benefit from dedicated runtime user and/or group accounts. Guidelines for handling these cases are in a <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/UsersAndGroups/" target="_blank" rel="noreferrer">separate document</a>.</p><p>Note that system services packaged for Fedora MUST NOT run as the <code>nobody</code> user, but MUST instead allocate their own system user.</p><h2 id="web-applications" tabindex="-1">Web Applications <a class="header-anchor" href="#web-applications" aria-label="Permalink to &quot;Web Applications&quot;">​</a></h2><ul><li>/var is supposed to contain variable data files and logs. /usr/share is much more appropriate for this.</li><li>Many users already have content in /var/www, and we do not want any Fedora package to step on top of that.</li><li>/var/www is no longer specified by the Filesystem Hierarchy Standard</li></ul><h2 id="conflicts" tabindex="-1">Conflicts <a class="header-anchor" href="#conflicts" aria-label="Permalink to &quot;Conflicts&quot;">​</a></h2><p>Whenever possible, Fedora packages should avoid conflicting with each other. Unfortunately, this is not always possible. For full details on Fedora’s Conflicts policy, see:<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Conflicts/" target="_blank" rel="noreferrer">Conflicts</a>.</p><p>Tools such as Alternatives and Environment Modules can also help prevent package conflicts.</p><h3 id="alternatives" tabindex="-1">Alternatives <a class="header-anchor" href="#alternatives" aria-label="Permalink to &quot;Alternatives&quot;">​</a></h3><p>The &quot;alternatives&quot; tool provides a means for parallel installation of packages which provide the same functionality by maintaining sets of symlinks. For full details on how to properly use alternatives, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Alternatives/" target="_blank" rel="noreferrer">Alternatives</a>.</p><h3 id="environment-modules" tabindex="-1">Environment Modules <a class="header-anchor" href="#environment-modules" aria-label="Permalink to &quot;Environment Modules&quot;">​</a></h3><p>When there are multiple variants that each serve the needs of some user and thus must be available simultaneously by users, the alternatives system simply isn’t enough since it is system-wide. In such situations, use of Environment Modules can avoid conflicts. For full details on how to properly use Environment Modules, see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/EnvironmentModules/" target="_blank" rel="noreferrer">Environment Modules</a>.</p><h2 id="patch-guidelines" tabindex="-1">Patch Guidelines <a class="header-anchor" href="#patch-guidelines" aria-label="Permalink to &quot;Patch Guidelines&quot;">​</a></h2><h3 id="all-patches-should-have-an-upstream-bug-link-or-comment" tabindex="-1">All patches should have an upstream bug link or comment <a class="header-anchor" href="#all-patches-should-have-an-upstream-bug-link-or-comment" aria-label="Permalink to &quot;All patches should have an upstream bug link or comment&quot;">​</a></h3><p>All patches in Fedora spec files <strong>SHOULD</strong> have a comment above them about their upstream status. Any time you create a patch, it is best practice to file it in an upstream bug tracker, and include a link to that in the comment above the patch. For example:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># https://bugzilla.gnome.org/show_bug.cgi?id=12345</span></span>
<span class="line"><span>Patch: gnome-panel-fix-frobnicator.patch</span></span></code></pre></div><p>rpm-spec</p><p>The above is perfectly acceptable; but if you prefer, a brief comment about what the patch does above can be helpful:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Don&#39;t crash with frobnicator applet</span></span>
<span class="line"><span># https://bugzilla.gnome.org/show_bug.cgi?id=12345</span></span>
<span class="line"><span>Patch: gnome-panel-fix-frobnicator.patch</span></span></code></pre></div><p>rpm-spec</p><p>Sending patches upstream and adding this comment will help ensure that Fedora is acting as a good FLOSS citizen (<a href="https://docs.fedoraproject.org/en-US/package-maintainers/Staying_Close_to_Upstream_Projects/" target="_blank" rel="noreferrer">Staying Close to Upstream Projects</a>). It will help others (and even you) down the line in package maintenance by knowing what patches are likely to appear in a new upstream release.</p><h4 id="if-upstream-doesn-t-have-a-bug-tracker" tabindex="-1">If upstream doesn’t have a bug tracker <a class="header-anchor" href="#if-upstream-doesn-t-have-a-bug-tracker" aria-label="Permalink to &quot;If upstream doesn’t have a bug tracker&quot;">​</a></h4><p>You can indicate that you have sent the patch upstream and any known status:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Sent upstream via email 20080407</span></span>
<span class="line"><span>Patch: foobar-fix-the-bar.patch</span></span></code></pre></div><p>rpm-spec</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Upstream has applied this in SVN trunk</span></span>
<span class="line"><span>Patch: foobar-fix-the-baz.patch</span></span></code></pre></div><p>rpm-spec</p><h4 id="fedora-specific-or-rejected-upstream-patches" tabindex="-1">Fedora-specific (or rejected upstream) patches <a class="header-anchor" href="#fedora-specific-or-rejected-upstream-patches" aria-label="Permalink to &quot;Fedora-specific (or rejected upstream) patches&quot;">​</a></h4><p>It may be that some patches truly are Fedora-specific; in that case, say so:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># This patch is temporary until we land the long term System.loadLibrary fix in OpenJDK</span></span>
<span class="line"><span>Patch: jna-jni-path.patch</span></span></code></pre></div><p>rpm-spec</p><h3 id="applying-patches" tabindex="-1">Applying Patches <a class="header-anchor" href="#applying-patches" aria-label="Permalink to &quot;Applying Patches&quot;">​</a></h3><p>Normally, patches to a package SHOULD be listed in <code>PatchN:</code> tags in the RPM spec file and applied using the %patch or %autosetup macros. The files MUST then be checked into the Fedora Package revision control system (currently the git repos on pkgs.fedoraproject.org and commonly accessed via fedpkg). Storing the files in this way allows people to use standard tools to visualize the changes between revisions of the files and track additions and removals without a layer of indirection (as putting them into lookaside would do).</p><p>Applying patches directly from RPM_SOURCE_DIR IS NOT ALLOWED. Please see <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/RPM_Source_Dir/" target="_blank" rel="noreferrer">Packaging:RPM_Source_Dir</a> for the complete rationale.</p><p>The maintainer MAY deviate from this rule when the upstream of the package provides an extremely large patch or a tarball of patches against a base release. In this case the tarball of patches MAY be listed as a <code>SourceN:</code> line and the patches would be applied by untarring the archive and then applying the distributed patch(es) using the regular /usr/bin/patch command. Additional patches to the package (for instance, generated by the Fedora maintainer to fix bugs) MUST still be listed in <code>PatchN:</code> lines and be applied by %patch macros after the patches from the tarball were applied. Maintainers and reviewers should be cautious when exercising this exception as shipping an update as a patchset may be a sign that the patchset is not from the actual upstream or that the patches should be reviewed for correctness rather than simply accepted as the upstream code base.</p><h2 id="use-of-epochs" tabindex="-1">Use of Epochs <a class="header-anchor" href="#use-of-epochs" aria-label="Permalink to &quot;Use of Epochs&quot;">​</a></h2><p>RPM supports a field called &quot;Epoch:&quot;, which is a numeric field, that, if set, adds another qualifier for RPM to use in doing package comparisons. Specifically, if set, the Epoch of a package trumps all other comparisons (except for a larger Epoch). If Epoch is not set in a package, RPM treats it the same as if it was set to 0.</p><p>Example:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Version: 1.2</span></span>
<span class="line"><span>Release: 3%{?dist}</span></span>
<span class="line"><span>Epoch: 1</span></span></code></pre></div><p>rpm-spec</p><p>A package with those definitions would be considered greater than a package with a higher version or a higher release. Since Epoch is confusing to humans (and can never be removed from a package once used), it should only be used in Fedora <strong>as a last resort</strong> to resolve upgrade ordering of a package, and should be avoided wherever possible.</p><p>Also, Epoch complicates normal packaging guidelines. If a package uses an Epoch, it must be referred to in any place where <code>%{version}-%{release}</code> is used. For example, if a package being depended upon has an Epoch, this must be listed when adding a versioned dependency:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Requires: foo = %{epoch}:%{version}-%{release}</span></span></code></pre></div><p>rpm-spec</p><h3 id="epochs-from-third-party-repositories" tabindex="-1">Epochs from Third Party Repositories <a class="header-anchor" href="#epochs-from-third-party-repositories" aria-label="Permalink to &quot;Epochs from Third Party Repositories&quot;">​</a></h3><p>If a package to be imported is or previously was present in a publicly accessible repository, the packager can optionally include an Epoch tag equal to that of the most recent version of the third-party package.</p><h2 id="symlinks" tabindex="-1">Symlinks <a class="header-anchor" href="#symlinks" aria-label="Permalink to &quot;Symlinks&quot;">​</a></h2><p>There are two ways of making a symlink, either as a relative link or an absolute link. In Fedora, neither method is required. Packagers should use their best judgement when deciding which method of symlink creation is appropriate.</p><h3 id="relative-symlinks" tabindex="-1">Relative Symlinks <a class="header-anchor" href="#relative-symlinks" aria-label="Permalink to &quot;Relative Symlinks&quot;">​</a></h3><p>A relative symlink is a symlink which points to a file or directory relative to the position of the symlink. For example, this command would create a relative symlink:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ln -s ../..%{_bindir}/foo %{buildroot}%{_bindir}/bar</span></span></code></pre></div><p>Pros:</p><ul><li>Relative symlinks will point to the same file inside or outside of a chroot.</li></ul><p>Cons:</p><ul><li>Much more complicated to create than absolute symlinks</li><li>Relative symlinks may break or behave unexpectedly when a part of a filesystem is mounted to a custom location.</li><li>Relative symlinks may break when bind mounting or symlinking directories.</li><li>Relative symlinks may make it more difficult to use rpm system macros.</li></ul><h3 id="absolute-symlinks" tabindex="-1">Absolute Symlinks <a class="header-anchor" href="#absolute-symlinks" aria-label="Permalink to &quot;Absolute Symlinks&quot;">​</a></h3><p>An absolute symlink is a symlink which points to an absolute file or directory path. For example, this command would create an absolute symlink:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ln -s %{_bindir}/foo %{buildroot}%{_bindir}/bar</span></span></code></pre></div><p>Pros:</p><ul><li>Much easier to create than relative symlinks.</li><li>Absolute symlinks work properly when bind mounting or symlinking directories.</li><li>Absolute symlinks work well with rpm system macros.</li></ul><p>Cons:</p><ul><li>Absolute symlinks may break when used with chroots.</li></ul><h2 id="replacing-a-symlink-to-a-directory-or-a-directory-to-any-type-file" tabindex="-1">Replacing a Symlink to a Directory or a Directory to Any Type File <a class="header-anchor" href="#replacing-a-symlink-to-a-directory-or-a-directory-to-any-type-file" aria-label="Permalink to &quot;Replacing a Symlink to a Directory or a Directory to Any Type File&quot;">​</a></h2><p>In some cases replacing a symlink to a directory requires special handling. Replacing a directory with any type of file always requires special handling.</p><p>See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Directory_Replacement/" target="_blank" rel="noreferrer">Packaging:Directory_Replacement</a> for information about doing this.</p><h2 id="test-suites" tabindex="-1">Test Suites <a class="header-anchor" href="#test-suites" aria-label="Permalink to &quot;Test Suites&quot;">​</a></h2><p>If the source code of the package provides a test suite, it should be executed in the <code>%check</code> section, whenever it is practical to do so.</p><h2 id="tmpfiles-d" tabindex="-1">tmpfiles.d <a class="header-anchor" href="#tmpfiles-d" aria-label="Permalink to &quot;tmpfiles.d&quot;">​</a></h2><p>There are specific guidelines for handling tmpfiles.d configurations and directories (in /run and /run/lock): <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Tmpfiles.d/" target="_blank" rel="noreferrer">Tmpfiles.d</a>.</p><h2 id="renaming-replacing-or-removing-existing-packages" tabindex="-1">Renaming/Replacing or Removing Existing Packages <a class="header-anchor" href="#renaming-replacing-or-removing-existing-packages" aria-label="Permalink to &quot;Renaming/Replacing or Removing Existing Packages&quot;">​</a></h2><table tabindex="0"><thead><tr><th></th><th><a href="https://docs.fedoraproject.org/en-US/package-maintainers/Package_Renaming_Process/" target="_blank" rel="noreferrer">Package Renaming Process</a> should be followed when renaming an existing package.</th></tr></thead></table><p>In the event that it becomes necessary to rename or replace an existing package, the new package should make the change transparent to end users to the extent applicable.</p><p>If a package is being renamed without any functional changes, or is a compatible-enough replacement to an existing package (where &quot;enough&quot; means that it includes only changes of magnitude that are commonly found in version upgrade changes), provide clean upgrade paths and compatibility with:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Provides: oldpackagename = $provEVR</span></span>
<span class="line"><span>Obsoletes: oldpackagename &lt; $obsEVR</span></span></code></pre></div><p>rpm-spec</p><p>$provEVR refers to an (Epoch-)Version-Release tuple the original unchanged package would have had if it had been version or release bumped. You usually use macros here because the provides EVR should continue to go up as the renamed package advances in version and release. $obsEVR is an (Epoch-)Version-Release tuple arranged so that there is a clean upgrade path but without gratuitously polluting the version space upwards. You usually do not use macros for this as you’re simply trying to advance beyond the last known release under the old name.</p><p>If a package supersedes/replaces an existing package without being a sufficiently compatible replacement as defined above, use only the <code>Obsoletes:</code> line from the above example.</p><table tabindex="0"><thead><tr><th></th><th><strong>Take <code>%{?dist}</code> into account</strong>: When deciding what $obsEVR should be, remember that it needs to be higher than the previous <code>Release:</code>, including the <code>%{?dist}</code> suffix. Example: if the package previously had the release tag of <code>-4.fcNN</code>, the release specified in $obsEVR should be at least 5.</th></tr></thead></table><table tabindex="0"><thead><tr><th></th><th>If the replaced package uses <code>rpmautospec</code>, either look at the built package (e.g. in koji) to find the actual release tag of the latest build, or use <code>rpmautospec calculate-release</code> to calculate just the release number.</th></tr></thead></table><p>If retired packages need to be removed from end user machines because they cause dependency issues which interfere with upgrades or are otherwise harmful, a packager SHOULD request that <code>Obsoletes:</code> be added to <code>fedora-obsolete-packages</code>. Simply file a bugzilla ticket <a href="https://bugzilla.redhat.com/enter_bug.cgi?product=Fedora&amp;version=rawhide&amp;component=fedora-obsolete-packages" target="_blank" rel="noreferrer">here</a>. Please include information on which packages need to be obsoleted, the exact versions which need to be obsoleted, and the reasons why they cannot be allowed to remain installed.</p><p>If the obsoleted package had an Epoch set, it must be preserved in both the <code>Provides:</code> and <code>Obsoletes:</code>. For example, assume foo being renamed to bar, bar is compatible with foo, and the last foo package release being <code>foo-1.0-3.fcNN</code> with <code>Epoch: 2</code>. The following should be added to bar (and similarly for all subpackages as applicable):</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Provides: foo = 2:%{version}-%{release}</span></span>
<span class="line"><span># Important: We set the Obsoletes release to 4 to be higher than the last build of foo</span></span>
<span class="line"><span>Obsoletes: foo &lt; 2:1.0-4</span></span></code></pre></div><p>rpm-spec</p><p>Explicit <code>Provides:</code> need to be aware of whether the package is supplying things that can be used in an arch-independent or arch-specific fashion. For packages that are not noarch,<code>Provides:</code> should be made arch-specific by applying the <code>%{?_isa}</code> macro to the end of the text string in Provides (e.g. <code>Provides: foo%{?_isa} = 2:%{version}-%{release}</code>). Packages that explicitly provide things that can be used in an arch-independent way (for example, those whose dependents don’t need to be of the same arch) need not apply this macro. In some cases, a package will supply multiple elements, some of which may be consumed only by dependents of an identical arch and some which may be consumed by dependents of any arch. In such cases, both arch-specific and arch-independent Provides: are warranted.</p><p>Examples of packages that should explicitly provide only arch-specific <code>Provides:</code> include native code libraries or plug-ins and their associated -devel packages. Packages that should explicitly provide only arch-independent <code>Provides:</code> include most stand-alone programs (in addition to all noarch packages). Even though these programs may themselves be arch-specific, clients that run them should not care about their arch in most cases. A package that explicitly provides, for example, both a native code library as well as an interpreted language interface to that library should have both arch-specific (for clients of the native code library) and arch-independent (for clients of the interpreted language interface) Provides:.</p><p>If there is no standard naming for a package or other long term naming compatibility requirements involved with the rename, the Provides should be assumed to be deprecated and short lived and removed in the distro release after the next one (i.e., if introduced in FC-X, keep in all subsequent package revisions for distros FC-X and FC-(X+1), drop in FC-(X+2)), and the distro version where it is planned to be dropped documented in a comment in the specfile. Maintainers of affected packages should be notified and encouraged to switch to use the new name. Forward compatibility Provides: in older distro branches can be considered in order to make it possible for package maintainers to keep same simple specfiles between branches but still switch to the newer name.</p><p>For packages that are not usually pulled in by using the package name as the dependency such as library only packages (which are pulled in through library soname depenencies), there’s usually no need to add the Provides. Note however that the -devel subpackages of lib packages are pulled in as build dependencies using the package name, so adding the Provides is often appropriate there.</p><h3 id="one-to-many-replacement" tabindex="-1">One-to-Many Replacement <a class="header-anchor" href="#one-to-many-replacement" aria-label="Permalink to &quot;One-to-Many Replacement&quot;">​</a></h3><p>Sometimes a package is split into two or more packages (either subpackages or separate source packages) to make some components optional, but users of the optional parts shall be able to upgrade without losing the functionality. Thus the new packages need to be pulled in on upgrade from a version before the split. If some are later removed, they shall not be pulled in again on further upgrades.</p><p>This is achieved by putting an <code>Obsoletes:</code> tag like above in each of the packages that together replace the original package. If the name of the original package still exists after the split, that package needs to obsolete itself. Even if an optional split-out package requires the original package, the original package still must obsolete itself. Otherwise the split-out package won’t be pulled in.</p><p>Example: Foo version 3 contains Bar as a non-essential component. In version 4, Bar is moved to a subpackage. Bar shall not disappear on upgrade.</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Name:      foo</span></span>
<span class="line"><span>Version:   4</span></span>
<span class="line"><span>Release:   1%{?dist}</span></span>
<span class="line"><span>Obsoletes: foo &lt; 4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%package bar</span></span>
<span class="line"><span>Requires:  foo%{?_isa} = %{version}-%{release}</span></span>
<span class="line"><span>Obsoletes: foo &lt; 4</span></span></code></pre></div><p>rpm-spec</p><table tabindex="0"><thead><tr><th></th><th>Packages pulled in this way are not marked as user-installed by DNF 4, so <code>dnf autoremove</code> will remove them. This appears to be fixed in DNF 5.</th></tr></thead></table><h2 id="deprecating-packages" tabindex="-1">Deprecating Packages <a class="header-anchor" href="#deprecating-packages" aria-label="Permalink to &quot;Deprecating Packages&quot;">​</a></h2><p>A procedure exists for indicating that a package is deprecated and may leave the distribution in the future. See <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/deprecating-packages/" target="_blank" rel="noreferrer">Deprecating Packages</a>.</p><h2 id="networking-support" tabindex="-1">Networking Support <a class="header-anchor" href="#networking-support" aria-label="Permalink to &quot;Networking Support&quot;">​</a></h2><p>If an application contains native and stable support for both IPv4 and IPv6, and support for IPv6 does not negatively affect IPv4 then both MUST be enabled in the Fedora package.</p><h2 id="cron-files" tabindex="-1">Cron Files <a class="header-anchor" href="#cron-files" aria-label="Permalink to &quot;Cron Files&quot;">​</a></h2><p>For details on how to package cron files, refer to:<a href="https://docs.fedoraproject.org/ru/packaging-guidelines/CronFiles/" target="_blank" rel="noreferrer">CronFiles</a>.</p><h2 id="security-updates-to-resolve-known-cve-issues" tabindex="-1">Security Updates to Resolve Known CVE Issues <a class="header-anchor" href="#security-updates-to-resolve-known-cve-issues" aria-label="Permalink to &quot;Security Updates to Resolve Known CVE Issues&quot;">​</a></h2><p>If an update to your package resolves a known security concern (at the time of the update) with a Common Vulnerabilities and Exposures (CVE) number assigned to it, you should mention the CVE number in the RPM changelog entry.</p><h2 id="build-time-network-access" tabindex="-1">Build Time Network Access <a class="header-anchor" href="#build-time-network-access" aria-label="Permalink to &quot;Build Time Network Access&quot;">​</a></h2><p>Packages in the Fedora buildsystem are built in a mock chroot with no access to the internet. Packages must not depend or or use any network resources that they don’t themselves create (i.e., for tests). In no cases should source code be downloaded from any external sources, only from the lookaside cache and/or the Fedora git repository.</p><h2 id="bootstrapping" tabindex="-1">Bootstrapping <a class="header-anchor" href="#bootstrapping" aria-label="Permalink to &quot;Bootstrapping&quot;">​</a></h2><p>If your package introduces build time circular dependencies, you should use this macro to bootstrap your package:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># When we are bootstrapping, we drop some dependencies, and/or build time tests.</span></span>
<span class="line"><span>%bcond_with bootstrap</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%if %{without bootstrap}</span></span>
<span class="line"><span># dependencies for %%check</span></span>
<span class="line"><span>BuildRequires: foo</span></span>
<span class="line"><span>%endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%if %{without bootstrap}</span></span>
<span class="line"><span>%check</span></span>
<span class="line"><span>make check</span></span>
<span class="line"><span>%endif</span></span></code></pre></div><p>rpm-spec</p><table tabindex="0"><thead><tr><th></th><th>Since Fedora 30, as a nice side-effect, when bootstrapping mode is enabled, the <code>~bootstrap</code> suffix is appended to the dist tag. This avoids the need to bump release between bootstrap and final build. You can temporarily enable bootstrapping by commit, which changes <code>%bcond_with bootstrap</code> to <code>%bcond_without bootstrap</code> and later reverting the commit to do final build.</th></tr></thead></table><table tabindex="0"><thead><tr><th></th><th>Since Fedora 31, you can disable the automatic suffix addition by specifying <code>%global __bootstrap %{nil}</code> in your spec file.</th></tr></thead></table><p>If your package explicitly <code>Provides:</code> some functionality that is missing when bootstrapped, then that <code>Provides:</code> should look like:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%if %{without bootstrap}</span></span>
<span class="line"><span>Provides: bar(some_functionality)</span></span>
<span class="line"><span>%endif</span></span></code></pre></div><p>rpm-spec</p><p>Please note that usage of pre-built binaries in bootstrap still needs an exception from the Packaging Committee as stated in <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/#_general_exception_policy" target="_blank" rel="noreferrer">General Exception Policy</a>.</p><h2 id="system-cryptographic-policies" tabindex="-1">System Cryptographic Policies <a class="header-anchor" href="#system-cryptographic-policies" aria-label="Permalink to &quot;System Cryptographic Policies&quot;">​</a></h2><p>Applications which make use the SSL or TLS cryptographic protocols MUST follow <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/CryptoPolicies/" target="_blank" rel="noreferrer">Crypto Policies</a>.</p><h2 id="shebang-lines" tabindex="-1">Shebang Lines <a class="header-anchor" href="#shebang-lines" aria-label="Permalink to &quot;Shebang Lines&quot;">​</a></h2><p>When packaging script files, where the interpreter to be used is specified in the first line of the script (the shebang line) following <code>#!</code>, the following rules apply:</p><ul><li><code>env</code>, <code>/bin/env</code> and <code>/usr/bin/env</code> MUST NOT be used. The interpreter used to run packaged applications cannot depend upon what the user has in their personal <code>$PATH</code>.</li><li>Files which are not installed as executables SHOULD NOT have shebang lines.</li><li>Language-specific guidelines may have additional restrictions.</li></ul><p>Shebang lines for executable scripts are automatically modified to convert calls to <code>env</code> into direct use of the proper executable in <code>/usr/bin</code>. Various checks are also applied to verify that the shebang lines are valid, and the build process can fail as a result of these. Finally, other language-specific modifications may also be made. It is thus generally unnecessary to manually modify executable scripts to fix <code>env</code> usage as long as this functionality is enabled.</p><p>If the automatic checks and modifications break a package, there are two primary options:</p><ul><li>The packager can elect to fix the shebang lines manually (using patches, scripting via sed, or other similar methods).</li><li>The packager can remove the executable permission from the script so that the checks and modifications are not made.</li></ul><p>If (and only if) the script needs to remain executable and cannot be modified to pass the checks, then the maintainer MAY elect to disable the checks and modifications. It is also possible to disable the functionality for specific paths or for specific shebang lines by setting <code>%__brp_mangle_shebangs_exclude_from</code> and <code>%__brp_mangle_shebangs_exclude</code>, respectively, using the same syntax as the settings described in <a href="https://docs.fedoraproject.org/ru/packaging-guidelines/AutoProvidesAndRequiresFiltering/" target="_blank" rel="noreferrer">Packaging:AutoProvidesAndRequiresFiltering</a>. It is also possible to disable the functionality entirely by adding <code>%undefine __brp_mangle_shebangs</code> near the beginning of the specfile.</p><h2 id="brp-buildroot-policy-scripts" tabindex="-1">BRP (BuildRoot Policy) Scripts <a class="header-anchor" href="#brp-buildroot-policy-scripts" aria-label="Permalink to &quot;BRP (BuildRoot Policy) Scripts&quot;">​</a></h2><p>BRP scripts are injected at the end of <code>%install</code> (via the <code>%__os_install_post</code> macro) and perform some automatic sanity checks of, or adjustments to, files installed in the build root.</p><p>All packages SHOULD always be subject to all the BRP scripts, but sometimes it is necessary for a package to opt-out of certain ones. It is possible to disable any BRP script simply by defining the corresponding variable to <code>%{nil}</code>. For example, to disable the <code>brp-python-bytecompile</code> script:</p><div class="language-rpm-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">rpm-spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Turn off Python bytecode compilation because this is a Jython</span></span>
<span class="line"><span># package and we will generate JVM bytecode instead</span></span>
<span class="line"><span>%global __brp_python_bytecompile %{nil}</span></span></code></pre></div><p>rpm-spec</p><p>Any package that disables a BRP script this way MUST also note the reason in an accompanying comment. For a list of the BRP scripts run by default, invoke:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sed -r -n &#39;/^%.?__os_install_post/,/%.?nil/p&#39; /usr/lib/rpm/redhat/macros</span></span></code></pre></div><p>For a list of all BRP scripts, invoke:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rpmbuild --eval &#39;%dump&#39; |&amp; grep &#39;: __brp_&#39;</span></span></code></pre></div><h3 id="removal-of-common-sources-of-build-irreproducibility" tabindex="-1">Removal of common sources of build irreproducibility <a class="header-anchor" href="#removal-of-common-sources-of-build-irreproducibility" aria-label="Permalink to &quot;Removal of common sources of build irreproducibility&quot;">​</a></h3><p>One of the BRP scripts that is invoked by default is <code>%__os_install_post_build_reproducibility</code>. Its purpose is to normalize installed files by removing unwanted embedded metadata that is dependent on the build environment and may cause different builds from the same sources to be irreproducible.</p><p>See <code>/usr/lib/rpm/macros.d/macros.build-reproducibility</code> for details about how it can be configured.</p><h2 id="packaging-for-epel" tabindex="-1">Packaging for EPEL <a class="header-anchor" href="#packaging-for-epel" aria-label="Permalink to &quot;Packaging for EPEL&quot;">​</a></h2><p>For the most part, these guidelines and the application-specific guidelines below cover packaging for both Fedora and EPEL. However, there are necessarily some differences. When packaging for EPEL, please also consult <a href="https://fedoraproject.org/wiki/EPEL:Packaging" target="_blank" rel="noreferrer">the EPEL packaging guidelines</a> for additional information.</p><h2 id="domain-specific-guidelines" tabindex="-1">Domain Specific Guidelines <a class="header-anchor" href="#domain-specific-guidelines" aria-label="Permalink to &quot;Domain Specific Guidelines&quot;">​</a></h2><p>Some applications, languages and build systems have specific guidelines written for them, located on their own pages:</p><ul><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Ada/" target="_blank" rel="noreferrer">Ada</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/BLAS_LAPACK/" target="_blank" rel="noreferrer">BLAS/LAPACK</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/C_and_C++/" target="_blank" rel="noreferrer">C and C++</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/CMake/" target="_blank" rel="noreferrer">CMake</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/D/" target="_blank" rel="noreferrer">D</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Drupal7/" target="_blank" rel="noreferrer">Drupal7</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Emacs/" target="_blank" rel="noreferrer">Emacs</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/FontsPolicy/" target="_blank" rel="noreferrer">Fonts</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Fortran/" target="_blank" rel="noreferrer">Fortran</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/GAP/" target="_blank" rel="noreferrer">GAP</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Haskell/" target="_blank" rel="noreferrer">Haskell</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Java/" target="_blank" rel="noreferrer">Java</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/JavaScript/" target="_blank" rel="noreferrer">JavaScript</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Langpacks/" target="_blank" rel="noreferrer">Language packs</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/LibreOfficeExtensions/" target="_blank" rel="noreferrer">LibreOffice Extensions</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Lisp/" target="_blank" rel="noreferrer">Lisp</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Meson/" target="_blank" rel="noreferrer">Meson</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/MinGW/" target="_blank" rel="noreferrer">MinGW</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Mono/" target="_blank" rel="noreferrer">Mono</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/MPI/" target="_blank" rel="noreferrer">MPI</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Node.js/" target="_blank" rel="noreferrer">Node.js</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/OCaml/" target="_blank" rel="noreferrer">OCaml</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Octave/" target="_blank" rel="noreferrer">Octave</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Perl/" target="_blank" rel="noreferrer">Perl</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/PHP/" target="_blank" rel="noreferrer">PHP</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Python/" target="_blank" rel="noreferrer">Python</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/R/" target="_blank" rel="noreferrer">R</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Ruby/" target="_blank" rel="noreferrer">Ruby</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Rust/" target="_blank" rel="noreferrer">Rust</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/SugarActivityGuidelines/" target="_blank" rel="noreferrer">Sugar activities</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Tcl/" target="_blank" rel="noreferrer">Tcl/Tk extensions</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Tree-sitter/" target="_blank" rel="noreferrer">Tree-sitter parsers</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/Web_Assets/" target="_blank" rel="noreferrer">Web Assets</a></li><li><a href="https://docs.fedoraproject.org/ru/packaging-guidelines/WordPress_plugin_packaging_guidelines/" target="_blank" rel="noreferrer">WordPress extensions</a></li></ul><p>Want to help? <a href="https://docs.fedoraproject.org/en-US/fedora-docs/contributing-docs/" target="_blank" rel="noreferrer">Learn how to contribute to Fedora Docs ›</a></p>`,184)]))}const m=i(n,[["render",r]]);export{g as __pageData,m as default};
