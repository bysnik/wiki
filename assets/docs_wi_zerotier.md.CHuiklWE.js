import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.D4Vqf8I7.js";const c=JSON.parse('{"title":"ZeroTier","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/zerotier.md","filePath":"docs/wi/zerotier.md","lastUpdated":1759307451000}'),l={name:"docs/wi/zerotier.md"};function n(p,s,h,r,o,d){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="zerotier" tabindex="-1">ZeroTier <a class="header-anchor" href="#zerotier" aria-label="Permalink to &quot;ZeroTier&quot;">​</a></h1><p><img src="https://www.zerotier.com/wp-content/uploads/2025/01/Default-OG-Image.jpg" alt=""></p><p><a href="https://habr.com/ru/companies/ruvds/articles/484178/" target="_blank" rel="noreferrer">https://habr.com/ru/companies/ruvds/articles/484178/</a></p><p><a href="https://habr.com/ru/companies/ruvds/articles/485914/" target="_blank" rel="noreferrer">https://habr.com/ru/companies/ruvds/articles/485914/</a></p><p><a href="https://habr.com/ru/companies/ruvds/articles/488184/" target="_blank" rel="noreferrer">https://habr.com/ru/companies/ruvds/articles/488184/</a></p><p>ссылка на последнюю версю пакета для Альт Линукс <a href="https://git.altlinux.org/tasks/337183/build/100/x86_64/rpms/zerotier-one-1.12.2-alt1.x86_64.rpm" target="_blank" rel="noreferrer">https://git.altlinux.org/tasks/337183/build/100/x86_64/rpms/zerotier-one-1.12.2-alt1.x86_64.rpm</a></p><p>Сейчас последняя версия это 1.16.0, а для альта - 1.12.2, так как он был удалён из репозитория <a href="https://packages.altlinux.org/ru/sisyphus/srpms/zerotier-one/" target="_blank" rel="noreferrer">https://packages.altlinux.org/ru/sisyphus/srpms/zerotier-one/</a></p><p>Думаю, не сильной проблемой будет собрать последнюю версию из исходников, возможно, даже спеку переписывать не придётся: <a href="https://git.altlinux.org/gears/z/zerotier-one.git?a=tree;hb=0e3d36293e616990f7386343b4c6777782b71158" target="_blank" rel="noreferrer">https://git.altlinux.org/gears/z/zerotier-one.git?a=tree;hb=0e3d36293e616990f7386343b4c6777782b71158</a> и <a href="https://github.com/zerotier/ZeroTierOne" target="_blank" rel="noreferrer">https://github.com/zerotier/ZeroTierOne</a></p><p>Вот графический интерфейс: <a href="https://github.com/key-networks/ztncui" target="_blank" rel="noreferrer">https://github.com/key-networks/ztncui</a></p><p>Я пытался с ним работать при сборке zerotier-one из исходников и это жопа, но вот с пакетированной версией гуишка заработала сразу как надо</p><p>Минус zerotier - отсутствие GUI в Linux для подключения к сети (как в винде). Подключиться можно только через консоль: <code>sudo zerotier-cli join &lt;Network ID&gt;</code></p><h2 id="мои-вроде-как-успешные-потуги-по-сборке-последнеи-версии" tabindex="-1">Мои, вроде как, успешные потуги по сборке последней версии <a class="header-anchor" href="#мои-вроде-как-успешные-потуги-по-сборке-последнеи-версии" aria-label="Permalink to &quot;Мои, вроде как, успешные потуги по сборке последней версии&quot;">​</a></h2><ol><li>Устновка необходимых пакетов (скорее всего тут перечислены не все)</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpmdevtools</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm-build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc-c++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git-core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gem-ronn-ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gem-ronn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ronn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libstdc++-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libminiupnpc-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rust</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rust-cargo</span></span></code></pre></div><ol start="2"><li>Незнаю почему, но я не использовал GEAR, так что собирал чисто с помощью rpmbuild. Подготавливаем дерево каталогов для сборки:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpmdev-setuptree</span></span></code></pre></div><ol start="3"><li>Просто куда-нибудь клонируем два репозитория: Один с исходниками и готовой спекой для 1.12 версии, и второй - последняя версия от разработчиков:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://git.altlinux.org/gears/z/zerotier-one.git</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/zerotier/ZeroTierOne.git</span></span></code></pre></div><ol start="4"><li>Переходим в директорию с 1.12 версией и начинаем шаманить:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one</span></span></code></pre></div><ul><li>Редактируем спеку, меняем только версию (можно ещё changelog написать, если охота):</li></ul><div class="language-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Version: 1.16.0</span></span></code></pre></div><ul><li>Копируем спеку в директорию сборки:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one.spec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/</span></span></code></pre></div><ul><li>Создаем директорию:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-development-1.16.0</span></span></code></pre></div><ul><li>Копируем какие-то растовские файлы:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one/zeroidc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-development-1.16.0/</span></span></code></pre></div><ul><li>Проваливаемся в скопированные файлы:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-development/zeroidc</span></span></code></pre></div><ul><li>Генерируем директорию vendor:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cargo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor</span></span></code></pre></div><ul><li>Переносим сгенерированную директорию:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./vendor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../</span></span></code></pre></div><p>Должна получиться следующая структура:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zerotier-one-development-1.16.0/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zeroidc</span></span></code></pre></div><ul><li>Поднимаемся на уровень выше:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span></code></pre></div><ul><li>Архивируем директорию и сразу переносим её в нашу сборочницу:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/zerotier-one-development-1.16.0.tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-development-1.16.0</span></span></code></pre></div><ol start="5"><li>Теперь работаем с исходниками.</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span></code></pre></div><ul><li>После клонирования должна быть директория ZeroTierOne. Переименовываем её:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ZeroTierOne</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-1.16.0</span></span></code></pre></div><ul><li>Архивируем директорию и сразу переносим её в нашу сборочницу:c</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/zerotier-one-1.16.0.tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotier-one-1.16.0</span></span></code></pre></div><ol start="6"><li>Если всё сделано правильно и я нигде не ошибся при описании, то можно проводить сборку пакета:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpmbuild</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpmbuild</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/zerotier-one.spec</span></span></code></pre></div><ol start="7"><li>По завершению сборки должен появиться пакет ~/RPM/RPMS/x86_64/zerotier-one-1.16.0-alt1.x86_64.rpm, который можно попробовать установить:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/RPMS/x86_64/zerotier-one-1.16.0-alt1.x86_64.rpm</span></span></code></pre></div><ol start="8"><li>Проверьте его статус после установки и действуйте:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zerotie-one</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Эта инструкция далеко не истина в последней инстанции. Я вообще устанавливал этот пакет поверх уже установленной версии 1.12.2, и вот что плохое у меня случилось:</p><ol><li>Вроде как, консольные утилиты раньше можно было использовать не под рутом, а теперь они работают только под рутом (по хорошему перепроверить бы).</li><li>После обновления ztncui, не смотря на то, что увидел контроллер zerotier, выдает ошибку HTTPError: Response code 404 (Not Found), но при этом ZeroTier version 1.16.0 он определяет.</li></ol><p>Но при этом у меня продолжила спокойно работать сеть, созданная на сайте zerotier.com, панель управления увидила, что у меня последняя версия.</p></div><p>В принципе, я считаю, что шалость удалась. Вот сама собранная rpm если кому надо: <a href="https://raw.githubusercontent.com/bysnik/wiki/main/rpms/zerotier-one-1.16.0-alt1.x86_64.rpm" target="_blank" rel="noreferrer">zerotier-one-1.16.0-alt1.x86_64.rpm</a></p>`,54)]))}const g=i(l,[["render",n]]);export{c as __pageData,g as default};
