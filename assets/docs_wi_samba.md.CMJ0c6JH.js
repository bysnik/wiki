import{_ as e,c as s,o as t,ag as n}from"./chunks/framework.D4Vqf8I7.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/samba.md","filePath":"docs/wi/samba.md","lastUpdated":1761123796000}'),i={name:"docs/wi/samba.md"};function d(o,a,c,p,l,r){return t(),s("div",null,a[0]||(a[0]=[n(`<p>Я столкнулся с подставой при создании домена samba с bind. Да, как и описано в документации:</p><blockquote><p>Если при установке системы в настройках сети было указано полное доменное имя (например, dc1.test.alt), система может автоматически создать зону test.alt, что приведет к конфликту с Samba при запуске bind:</p><p>мая 03 14:25:13 dc1 named[3825]: samba_dlz: Failed to configure zone &#39;test.alt&#39; мая 03 14:25:13 dc1 named[3825]: loading configuration: already exists мая 03 14:25:13 dc1 named[3825]: exiting (due to fatal error) мая 03 14:39:44 dc1 named[4309]: Loading &#39;AD DNS Zone&#39; using driver dlopen</p><p>Для решения проблемы необходимо закомментировать все строки в файле /etc/bind/local.conf или удалить его.</p></blockquote><p>Блин! Не удаляйте этот файл!!! Просто очистите его.</p><p>Суть: начались проблемы с файлом /etc/named.conf. Если нет всех инклюдов, которые прописаны в нём (если что файл /etc/named.conf это символическая ссылка на файл /etc/bind/named.conf), тогда будет ошибка всегда типа <code>/etc/named.conf не существует</code> Это первый момент.</p><p>Второй момент: Почему то этот файл сгенерировался с ошибкой в последней строке инклюда: было двоеточие, а не точка с запятой. Из-за этого файл считается битым.</p><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- include &quot;/var/lib/samba/bind-dns/named.conf&quot;:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ include &quot;/var/lib/samba/bind-dns/named.conf&quot;;</span></span></code></pre></div><p>Пасаны, проверяйте этот файл командой:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">named-checkconf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/named.conf</span></span></code></pre></div>`,8)]))}const b=e(i,[["render",d]]);export{m as __pageData,b as default};
