import{_ as n,c as a,o as p,ag as e}from"./chunks/framework.D4Vqf8I7.js";const b=JSON.parse('{"title":"Znuny OTRS","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"docs/wi/znuny.md","filePath":"docs/wi/znuny.md","lastUpdated":1765880064000}'),l={name:"docs/wi/znuny.md"};function i(r,s,t,c,o,h){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="znuny-otrs" tabindex="-1">Znuny OTRS <a class="header-anchor" href="#znuny-otrs" aria-label="Permalink to &quot;Znuny OTRS&quot;">​</a></h1><p><img src="https://media.licdn.com/dms/image/v2/D4D12AQEkvB14kAEA1A/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1689080388968?e=2147483647&amp;v=beta&amp;t=H2PcishkaF5cppDy5pkpwBUhSe2dY43ZQWnn0X8XDPY" alt=""></p><p>Znuny — это сообщество-ориентированная версия популярной системы управления запросами и инцидентами, изначально известной как OTRS (Open-source Ticket Request System). После того как оригинальный проект OTRS перешёл к коммерческой модели и ограничил функциональность бесплатной версии, сообщество разработчиков и пользователей создало Znuny как полностью открытый и свободный форк OTRS. Znuny сохраняет все ключевые возможности системы: управление тикетами, интеграцию с почтой, гибкие правила обработки обращений, поддержку SLA, а также расширенные возможности для настройки под нужды конкретной организации.</p><p>Znuny активно развивается сообществом и остаётся совместимым с большим количеством существующих модулей и расширений, созданных для OTRS. Это делает его привлекательным решением для компаний и ИТ-отделов, которым нужна надёжная, гибкая и бесплатная система поддержки без зависимости от коммерческих лицензий. Znuny можно развернуть как внутренний сервис поддержки, так и использовать для взаимодействия с клиентами — благодаря веб-интерфейсу, API и возможностям интеграции с другими системами.</p><h2 id="установка-версии-6-0-38-из-репозитория" tabindex="-1">Установка версии 6.0.38 из репозитория <a class="header-anchor" href="#установка-версии-6-0-38-из-репозитория" aria-label="Permalink to &quot;Установка версии 6.0.38 из репозитория&quot;">​</a></h2><p>Для работы системы необходима база данных и веб-сервер, в примере используется <code>PostgreSQL</code> и <code>Apache</code>. Все команды необходимо выполнять с правами администратора системы.</p><p>Устанавливаем необходимые пакеты:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-DBD-Pg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otrs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otrs-apache2</span></span></code></pre></div><h3 id="настроика-сервера-базы-данных" tabindex="-1">Настройка сервера базы данных <a class="header-anchor" href="#настроика-сервера-базы-данных" aria-label="Permalink to &quot;Настройка сервера базы данных&quot;">​</a></h3><p>Лично я всеми руками за <code>PostgreSQL</code>, но на всякий оставляю тут инструкцию и для <code>MySQL</code>.</p><h4 id="настроика-postgresql" tabindex="-1">Настройка PostgreSQL <a class="header-anchor" href="#настроика-postgresql" aria-label="Permalink to &quot;Настройка PostgreSQL&quot;">​</a></h4><p>Устанавливаем <code>PostgreSQL Server</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql17-server</span></span></code></pre></div><p>Создание конфигурационных файлов <code>PostgreSQL</code> и создание пароля администратора:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/etc/init.d/postgresql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> initdb</span></span></code></pre></div><p>Запуск сервиса <code>postgresql</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span></span></code></pre></div><h4 id="настроика-mysql" tabindex="-1">Настройка MySQL <a class="header-anchor" href="#настроика-mysql" aria-label="Permalink to &quot;Настройка MySQL&quot;">​</a></h4><p>Устанавливаем <code>MySQL Server</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MySQL-server</span></span></code></pre></div><p>В файл <code>/var/lib/mysql/my.cnf</code> добавляем директиву из файла-рекомедации: <code>max_allowed_packet=50M</code></p><p>Включаем автостарт сервиса при загрузке системы и запускаем его:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysqld</span></span></code></pre></div><p>Для настройки безопасности после запуска <code>MySQL</code> необходимо выполнить скрипт</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/bin/mysql_secure_installation</span></span></code></pre></div><p>Скрипт задаст Вам несколько вопросов.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Skip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#По умолчанию пароль для root пустой, поэтому просто нажмите Enter.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> security</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Задайте пароль для root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Do</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> an</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anonymous</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Удалим анонимного пользователя</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Do</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disallow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connections</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Не запрещаем коннект к базе с удаленных серверов </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#(если, конечно, эта опция вам нужна, в другом случае, запретите ее)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Do</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Тестовая база нам не нужна - удаляйте ее</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Do</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> privileges</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Перегрузим привилегии для их активации</span></span></code></pre></div><p>Пароль <code>root</code> от <code>MySQL</code>: используется тот что вы задали в предыдущем пункте</p><h3 id="настроика-apache2" tabindex="-1">Настройка Apache2 <a class="header-anchor" href="#настроика-apache2" aria-label="Permalink to &quot;Настройка Apache2&quot;">​</a></h3><p>Включаем использование каталога с расширениями для <code>apache2</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a2enextra</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> httpd-addon.d</span></span></code></pre></div><p>Кроме того, в пакете <code>apache2</code> присутствует <code>010-httpd-addon.d.conf</code>, содержащий <code>httpd-addon.d=no</code>, что приводит к отключению <code>httpd-addon.d</code> при запуске <code>a2chkconfig</code>. Следует переопределить это значение, например, так:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> httpd-addon.d=yes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/httpd2/conf/extra-start.d/999-otrs.conf</span></span></code></pre></div><p>Не беда, если следующие шаги (блок <code>Дополнительные настройки</code>) вы выполнять не будете. Далее все эти моменты можно отследить на страницу &quot;Admin Support Data Collector (Сбор данных для поддержки)&quot; на странице Администрирования.</p><details class="details custom-block"><summary>Дополнительные настройки</summary><p>Вообще, эта заррраза ругается на всякую фигню: ой ой, у тебя не установлен модуль <code>perl</code> для <code>Oracle SQL</code> и <code>MS SQL</code>, вот жешь ты плохой. У тебя не установлена поддержка китайских символов. Ну ты и хад! Ну и т.д.</p><p><img src="https://www.meme-arsenal.com/memes/b23f273efb17fcd5536ef8eb129fbad7.jpg" alt=""></p><p>Да, плюсом там руготня про оптимизацию.</p><p>Так что ниже будут все доп моменты чтобы убрать все ошибки. КРОМЕ ОДНОЙ: Znuny не может определить Линукс - Он не знает про Альт(</p><p>Устанавливаем дополнительные компоненты:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-CSS-Minifier-XS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-Pg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-JavaScript-Minifier-XS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-NTLM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-DBD-ODBC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-ldap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-Crypt-Random-Source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-Encode-HanExtra</span></span></code></pre></div><p>Активируем модули <code>apache2</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deflate</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> filter</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a2enmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> headers</span></span></code></pre></div><p>Установка <code>prefork MPM</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2-httpd-prefork</span></span></code></pre></div><p>Удаление <code>worker MPM</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2-httpd-worker</span></span></code></pre></div><p>Проверка:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apachectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mpm</span></span></code></pre></div></details><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>На текущий момент мне осталось решить проблоемы с:</p><ul><li>Размер подкачки более 200МВ - Ну каапец</li><li>Теоретически должен быть пакет Аля perl-DBD-Oracle, но у Альта его нет (походу из-за проприетарности)</li></ul></div><p>Запускаем демон веб-сервера и устанавливаем его на автозапуск:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> httpd2</span></span></code></pre></div><h3 id="первоначальные-настроики" tabindex="-1">Первоначальные настройки <a class="header-anchor" href="#первоначальные-настроики" aria-label="Permalink to &quot;Первоначальные настройки&quot;">​</a></h3><p>Открываем браузер, в адресную строку вводим <code>http://ip_вашего_сервера/otrs/installer.pl</code>, следуем инструкциям для инсталляции.</p><p>После входа будет видна ошибка, что демон <code>Cron</code> не запущен. Запуск <code>Cron</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/www/webapps/otrs/bin/Cron.sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otrs</span></span></code></pre></div><h2 id="клиенты" tabindex="-1">Клиенты <a class="header-anchor" href="#клиенты" aria-label="Permalink to &quot;Клиенты&quot;">​</a></h2><p>Ссылка для клиентов: <code>http://ip_вашего_сервера/otrs/customer.pl</code></p><h2 id="сборка-rpm-пакета-версии-7-2-3" tabindex="-1">Сборка RPM-пакета версии 7.2.3 <a class="header-anchor" href="#сборка-rpm-пакета-версии-7-2-3" aria-label="Permalink to &quot;Сборка RPM-пакета версии 7.2.3&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Это, на 14.10.2025г. последняя версия (дата выпуска: 2025-09-24)</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Итак, после кучи тестов я жёстко дописал спеку, это новая версия пакетов</p><p>Вот ссылка на собранные пакеты:</p><ul><li>otrs-7.2.3: <a href="https://raw.githubusercontent.com/bysnik/wiki/main/rpms/otrs-7.2.3-alt1.noarch.rpm" target="_blank" rel="noreferrer">otrs-7.2.3-alt1.noarch.rpm</a></li><li>otrs-apache2-7.2.3: <a href="https://raw.githubusercontent.com/bysnik/wiki/main/rpms/otrs-apache2-7.2.3-alt1.noarch.rpm" target="_blank" rel="noreferrer">otrs-apache2-7.2.3-alt1.noarch.rpm</a></li></ul></div><ol><li>Скачиваем архив с необходимой версией:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://download.znuny.org/releases/znuny-7.2.3.tar.bz2</span></span></code></pre></div><ol start="2"><li>Переносим его в сборочнику:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> znuny-7.2.3.tar.bz2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCE/</span></span></code></pre></div><ol start="3"><li>Клонируем репозиторий со старой версией:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://git.altlinux.org/gears/o/otrs.git</span></span></code></pre></div><ol start="4"><li>Переходим в этот репозиторий:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./otrs</span></span></code></pre></div><ol start="5"><li>Редактируем файл <code>apache2.conf</code>:</li></ol><p>Строку</p><div class="language-apache vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">apache</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /otrs-web/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/www/webapps/otrs/var/httpd/htdocs/&quot;</span></span></code></pre></div><p>меняем на</p><div class="language-apache vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">apache</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /znuny-web/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/var/www/webapps/otrs/var/httpd/htdocs/&quot;</span></span></code></pre></div><ol start="6"><li>Переносим в сборочницу дополнительные файлы:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> README.ALT.rus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otrs-hold.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache2.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/</span></span></code></pre></div><ol start="7"><li>Правим spec-файл и копируем его в сборочницу:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otrs.spec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/</span></span></code></pre></div><details class="details custom-block"><summary>Обновлённая спека</summary><p>УУУУ, очень сильно редактируем спеку:</p><div class="language-spec vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%define _unpackaged_files_terminate_build 1</span></span>
<span class="line"><span>%define installdir %webserver_webappsdir/%name</span></span>
<span class="line"><span>%define otrs_user otrs</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Name: otrs</span></span>
<span class="line highlighted"><span>Version: 7.2.3</span></span>
<span class="line"><span>Release: alt1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Summary: Open source Ticket Request System Community Edition</span></span>
<span class="line"><span>Group: Networking/WWW</span></span>
<span class="line"><span>License: GPL-3.0-only</span></span>
<span class="line"><span>Url: https://www.znuny.org/en</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Source0: https://download.znuny.org/releases/znuny-%version.tar.bz2</span></span>
<span class="line"><span>Source1: README.ALT.rus</span></span>
<span class="line"><span>Source2: otrs-hold.conf</span></span>
<span class="line"><span>Source3: apache2.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>BuildArch: noarch</span></span>
<span class="line"><span></span></span>
<span class="line"><span>BuildRequires(pre): rpm-macros-webserver-common rpm-macros-apache2 &gt;= 3.9</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Requires: webserver-common </span></span>
<span class="line"><span></span></span>
<span class="line"><span># requires for perl</span></span>
<span class="line highlighted"><span>Requires: perl-CGI perl-DBI perl-DateTime perl-Template perl-Unicode-Collate perl-Moo perl-Archive-Tar perl-Archive-Zip perl-TimeDate perl-Net-DNS perl-YAML-LibYAML perl-CSS-Minifier-XS perl-Pg perl-JavaScript-Minifier-XS perl-NTLM perl-DBD-ODBC perl-ldap perl-Crypt-Random-Source perl-Encode-HanExtra perl-CSS-Minifier perl-JavaScript-Minifier perl-Data-UUID perl-Email-Valid perl-Crypt-PasswdMD5 perl-Pod-Strip perl-CPAN perl-Math-Random-Secure perl-Crypt-Eksblowfish perl-Crypt-SSLeay perl-JSON-XS perl-Mail-IMAPClient perl-IO-Socket-SSL perl-Text-CSV_XS perl-XML-LibXSLT perl-XML-Parser perl-CPAN-Meta perl-Spreadsheet-XLSX perl-DBD-mysql perl-DBD-Pg</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%add_findreq_skiplist */bin/*</span></span>
<span class="line"><span>%add_findreq_skiplist */Kernel/*</span></span>
<span class="line"><span>%add_findreq_skiplist */scripts/*</span></span>
<span class="line"><span>%add_findreq_skiplist */examples/*</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%description</span></span>
<span class="line"><span>OTRS is an Open source Ticket Request System (also well known</span></span>
<span class="line"><span>as trouble ticket system) with many features to manage customer</span></span>
<span class="line"><span>telephone calls and e-mails. The system is built to allow your</span></span>
<span class="line"><span>support, sales, pre-sales, billing, internal IT, helpdesk, e.t.c.</span></span>
<span class="line"><span>departments to react quickly to inbound inquiries.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>This is the ((OTRS)) Community Edition Fork by Znuny GmbH</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%package apache2</span></span>
<span class="line"><span>Summary: Apache 2.x web-server configuration for %name</span></span>
<span class="line"><span>Group: Networking/WWW</span></span>
<span class="line"><span>Requires: %name = %version-%release, apache2, apache2-mod_perl perl-Apache-DBI</span></span>
<span class="line"><span>%description apache2</span></span>
<span class="line"><span>Apache 2.x web-server configuration for %name</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>%setup -n znuny-%version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%install</span></span>
<span class="line"><span># install apache config</span></span>
<span class="line"><span>install -pD -m0644 %SOURCE3 %buildroot%_sysconfdir/httpd2/conf/addon.d/A.%name.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># install apt&#39;s hold file</span></span>
<span class="line"><span>install -pD -m0644 %SOURCE2 %buildroot%_sysconfdir/apt/apt.conf.d/%name-hold.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># install otrs</span></span>
<span class="line"><span>mkdir -p %buildroot%installdir</span></span>
<span class="line"><span>cp -rp * %buildroot%installdir/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#install docs</span></span>
<span class="line"><span>install -pD -m0644 %SOURCE1 README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#replace &#39;/opt/otrs&#39; to &#39;/var/www/webapps/otrs&#39; in all files</span></span>
<span class="line"><span>find %buildroot%installdir -type f -exec sed -i -e &quot;s/\\/opt\\/otrs/\\/var\\/www\\/webapps\\/otrs/g&quot; {} \\;</span></span>
<span class="line"><span></span></span>
<span class="line highlighted"><span># add use lib &#39;/var/www/webapps/otrs&#39;; in bin/cgi-bin/installer.pl</span></span>
<span class="line highlighted"><span>sed -i &#39;/^use lib/a use lib &quot;/var/www/webapps/otrs&quot;;&#39; %buildroot%installdir/bin/cgi-bin/installer.pl</span></span>
<span class="line"><span></span></span>
<span class="line"><span># remove files</span></span>
<span class="line"><span>find %buildroot%installdir -name &#39;*.spec&#39; -delete</span></span>
<span class="line"><span>find %buildroot%installdir -name &#39;*.conf&#39; -delete</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#install default config</span></span>
<span class="line"><span>cp %buildroot%installdir/Kernel/Config.pm.dist %buildroot%installdir/Kernel/Config.pm</span></span>
<span class="line"><span># cd %buildroot%installdir/Kernel/Config/</span></span>
<span class="line"><span># for foo in *.dist; do cp $foo \`basename $foo .dist\`; done</span></span>
<span class="line"><span>cd %buildroot%installdir/var/cron/</span></span>
<span class="line"><span>for foo in *.dist; do cp $foo \`basename $foo .dist\`; done</span></span>
<span class="line"><span></span></span>
<span class="line highlighted"><span># replace home path</span></span>
<span class="line highlighted"><span>sed -i &quot;s|/opt/znuny|%installdir|g&quot; %buildroot%installdir/Kernel/Config.pm</span></span>
<span class="line"><span></span></span>
<span class="line"><span># all needed files packaged from %%builddir</span></span>
<span class="line"><span>rm -f %buildroot%installdir/ARCHIVE</span></span>
<span class="line"><span>rm -f %buildroot%installdir/AUTHORS.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/CHANGES.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/CONTRIBUTING.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/COPYING</span></span>
<span class="line"><span>rm -f %buildroot%installdir/COPYING-Third-Party</span></span>
<span class="line"><span>rm -f %buildroot%installdir/INSTALL.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/README.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/SECURITY.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/UPDATING.md</span></span>
<span class="line"><span>rm -f %buildroot%installdir/Custom/README</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%pre</span></span>
<span class="line"><span>if id %otrs_user &gt;/dev/null 2&gt;&amp;1; then</span></span>
<span class="line"><span>    # update groups</span></span>
<span class="line"><span>    usermod -g %webserver_group %otrs_user</span></span>
<span class="line"><span>    # update home dir</span></span>
<span class="line"><span>    usermod -d %installdir %otrs_user</span></span>
<span class="line"><span>else</span></span>
<span class="line"><span>   %_sbindir/useradd -r  -g %webserver_group -c &#39;OTRS User&#39; -d %installdir -s &#39;/dev/null&#39; %otrs_user &gt;/dev/null 2&gt;&amp;1 || :</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%post</span></span>
<span class="line"><span>cd %installdir/bin/</span></span>
<span class="line"><span></span></span>
<span class="line highlighted"><span>./znuny.SetPermissions.pl \\</span></span>
<span class="line highlighted"><span>    --znuny-user=%otrs_user \\</span></span>
<span class="line highlighted"><span>    --web-group=%webserver_group \\</span></span>
<span class="line highlighted"><span>    --skip-regex=&quot;Config.pm&quot; \\</span></span>
<span class="line highlighted"><span>    %installdir || :</span></span>
<span class="line highlighted"><span>./Cron.sh start %otrs_user || :</span></span>
<span class="line"><span></span></span>
<span class="line highlighted"><span># create symlink for Kernel Modules</span></span>
<span class="line highlighted"><span>if [ ! -e /opt/znuny ]; then</span></span>
<span class="line highlighted"><span>    ln -sf /var/www/webapps/otrs /opt/znuny || :</span></span>
<span class="line highlighted"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%files</span></span>
<span class="line"><span>%doc AUTHORS.md</span></span>
<span class="line"><span>%doc CHANGES.md</span></span>
<span class="line"><span>%doc CONTRIBUTING.md</span></span>
<span class="line"><span>%doc COPYING</span></span>
<span class="line"><span>%doc COPYING-Third-Party</span></span>
<span class="line"><span>%doc INSTALL.md</span></span>
<span class="line"><span>%doc README.md</span></span>
<span class="line"><span>%doc README.ALT.rus</span></span>
<span class="line"><span>%doc SECURITY.md</span></span>
<span class="line"><span>%doc UPDATING.md</span></span>
<span class="line"><span>%doc Custom/README</span></span>
<span class="line"><span>%defattr(0775,root, %webserver_group)</span></span>
<span class="line"><span>%dir %installdir</span></span>
<span class="line"><span>%config(noreplace) %attr(0660,root,%webserver_group) %installdir/Kernel/Config.pm</span></span>
<span class="line"><span>#config(noreplace) %attr(0660,root,%webserver_group) %installdir/Kernel/Config/GenericAgent.pm</span></span>
<span class="line"><span>%installdir/Kernel</span></span>
<span class="line"><span>%installdir/bin</span></span>
<span class="line"><span>%installdir/scripts</span></span>
<span class="line"><span>%installdir/doc</span></span>
<span class="line"><span>%installdir/var</span></span>
<span class="line"><span>%installdir/i18n</span></span>
<span class="line"><span>%installdir/RELEASE</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%config(noreplace) %attr(0644,root,root) %_sysconfdir/apt/apt.conf.d/%name-hold.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%files apache2</span></span>
<span class="line"><span>%config(noreplace) %attr(0644,root,root) %_sysconfdir/httpd2/conf/addon.d/A.%name.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%changelog</span></span>
<span class="line highlighted"><span>* Wed Oct 15 2025 Nikita Bystrov &lt;bystrovno@basealt.ru&gt; 7.2.3-alt1</span></span>
<span class="line highlighted"><span>- Updated to Znuny 7.2.3</span></span>
<span class="line highlighted"><span>- Added use lib &#39;/var/www/webapps/otrs&#39; to installer.pl for correct module loading</span></span>
<span class="line highlighted"><span>- Patched Kernel/Config.pm to use correct $Self-&gt;{Home}</span></span>
<span class="line highlighted"><span>- Added compatibility symlink /opt/znuny → /var/www/webapps/otrs in %post for Kernel Modules</span></span>
<span class="line highlighted"><span>- Adjusted file permissions via znuny.SetPermissions.pl in %post</span></span>
<span class="line highlighted"><span>- Kept package name &#39;otrs&#39; for upgrade compatibility from OTRS 6.0.x</span></span>
<span class="line highlighted"><span>- Added most required Perl dependencies for Znuny 7.2.3; some may still require manual installation via CPAN</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Sun Oct 31 2021 Sergey Y. Afonin &lt;asy@altlinux.org&gt; 6.0.38-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Wed Sep 29 2021 Sergey Y. Afonin &lt;asy@altlinux.org&gt; 6.0.36-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>  the &quot;((OTRS)) Community Edition Fork&quot; by Znuny GmbH</span></span>
<span class="line"><span>- changed URL</span></span>
<span class="line"><span>- updated README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Mon Sep 27 2021 Sergey Y. Afonin &lt;asy@altlinux.org&gt; 6.0.30-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>  final release of &quot;((OTRS)) Community Edition 6&quot; from OTRS AG</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri May 21 2021 Anton Farygin &lt;rider@altlinux.ru&gt; 6.0.29-alt2</span></span>
<span class="line"><span>- removed all apache post scripts (they moved to filetriggers from apache2)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Aug 21 2020 Sergey Y. Afonin &lt;asy@altlinux.org&gt; 6.0.29-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- updated License tag to SPDX syntax</span></span>
<span class="line"><span>- updated README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Oct 25 2019 Sergey Y. Afonin &lt;asy@altlinux.org&gt; 6.0.23-alt1</span></span>
<span class="line"><span>- New version (ALT #37331)</span></span>
<span class="line"><span>- changed License (GAGPLv3 to GPLv3)</span></span>
<span class="line"><span>- updated Apache 2 configuration</span></span>
<span class="line"><span>- updated README.ALT.rus</span></span>
<span class="line"><span>- removed otrs-InnoDBLogFileSize.patch</span></span>
<span class="line"><span>- updated Requires</span></span>
<span class="line"><span>- removed Packager field</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Nov 10 2017 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.23-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Thu May 04 2017 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.17-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- added */examples/* to findreq_skiplist</span></span>
<span class="line"><span>- updated description for Apache 2.4 in README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue May 31 2016 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.10-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- added description for Apache 2.4 to README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Mon Mar 14 2016 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.7-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Feb 05 2016 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.6-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Oct 23 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 5.0.1-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- updated otrs-InnoDBLogFileSize.patch</span></span>
<span class="line"><span>- updated README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Oct 16 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 4.0.13-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- fixed otrs-hold.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Wed Sep 16 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 4.0.12-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- added perl-Archive-Tar to Requires</span></span>
<span class="line"><span>- updated README.ALT.rus</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Mon Aug 03 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 4.0.10-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- added mpm_itk_module section to configuration of apache2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue Jun 09 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 4.0.8-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Sat Apr 25 2015 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 4.0.7-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Sat Nov 08 2014 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.3.10-alt1</span></span>
<span class="line"><span>- New version (ALT #30453)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue Sep 02 2014 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.3.8-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue Mar 18 2014 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.3.5-alt2</span></span>
<span class="line"><span>- added to Requires: perl-Time-Piece</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Wed Mar 12 2014 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.3.5-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri May 17 2013 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.2.6-alt2</span></span>
<span class="line"><span>- added to Requires:</span></span>
<span class="line"><span>  perl-Term-ANSIColor perl-TimeDate perl-YAML-LibYAML</span></span>
<span class="line"><span>- added apt&#39;s hold file for the package otrs</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri May 17 2013 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.2.6-alt1</span></span>
<span class="line"><span>- New version (ALT #28490)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Sun Mar 10 2013 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.2.2-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>- disabled doc-admin-de-pdf subpackage (missed in this release)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue Oct 09 2012 Sergey Y. Afonin &lt;asy@altlinux.ru&gt; 3.1.10-alt1</span></span>
<span class="line"><span>- New version</span></span>
<span class="line"><span>   Warning: OTRS 3.1 supports only UTF-8 as internal character set.</span></span>
<span class="line"><span>            Non-UTF-8 installations of OTRS must switch to UTF-8.</span></span>
<span class="line"><span>- added perl-Unicode-Normalize to Requires</span></span>
<span class="line"><span>- described GenericAgent.pm as %%config</span></span>
<span class="line"><span>- used %%post_apache2_rpma2chkconfigfile instead of &quot;httpd2 condreload&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Tue Feb 07 2012 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.11-alt1.2</span></span>
<span class="line"><span>- spec fixes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Fri Sep 30 2011 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.11-alt1.1</span></span>
<span class="line"><span>- spec fixes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Thu Sep 29 2011 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.11-alt1</span></span>
<span class="line"><span>- Security fixes:</span></span>
<span class="line"><span>  + Vulnerabilities in OTRS-Core allows read access to any file on local file system;</span></span>
<span class="line"><span>    CVE-2011-2746 (ALT #26186)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Mon Oct 25 2010 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.9-alt1</span></span>
<span class="line"><span>- Security fixes:</span></span>
<span class="line"><span>  + AgentTicketZoom is vulnerable to XSS attacks from HTML e-mails;</span></span>
<span class="line"><span>    OSA-2010-03 (ALT #24419)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Wed Sep 22 2010 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.8-alt1</span></span>
<span class="line"><span>- New version 2.4.8</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Sun Feb 21 2010 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.7-alt1</span></span>
<span class="line"><span>- Security fixes:</span></span>
<span class="line"><span>  + Vulnerability in OTRS-Core allows SQL-Injection;</span></span>
<span class="line"><span>    CVE-2010-0438 (ALT #22947)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>* Thu Jan 21 2010 Pavel Zilke &lt;zidex at altlinux dot org&gt; 2.4.6-alt1</span></span>
<span class="line"><span>- Initial build for ALT Linux</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br></div></div></details><ol start="7"><li>Устанавливаем дополнительные пакеты для сборки:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm-macros-webserver-common</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm-macros-apache2</span></span></code></pre></div><ol start="8"><li>Производим сборку:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpmbuild</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/otrs.spec</span></span></code></pre></div><ol start="9"><li>В результате получаем файлы:</li></ol><ul><li><code>~/RPM/RPMS/noarch/otrs-7.2.3-alt1.noarch.rpm</code></li><li><code>~/RPM/RPMS/noarch/otrs-apache2-7.2.3-alt1.noarch.rpm</code></li></ul><h3 id="особенности-установки-этои-версии" tabindex="-1">Особенности установки этой версии <a class="header-anchor" href="#особенности-установки-этои-версии" aria-label="Permalink to &quot;Особенности установки этой версии&quot;">​</a></h3><ol><li>Устанавливаем зависимости для <code>cpan</code>:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-devel</span></span></code></pre></div><ol start="2"><li>Устанавливаем недостающие модули <code>perl</code>:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cpan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Crypt::JWT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Hash::Merge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> iCal::Parser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jq</span></span></code></pre></div><p>Там просто всё по умолчанию жмакаете.</p><ol start="3"><li><p>Дополнительные компоненты <code>perl</code> из инструкции для версии 6 устанавливать не нужно, они подтягиваются сами как зависимости.</p></li><li><p>Ну и, соответсвенно, установка необходимых основных пакетов, будет примерно такая:</p></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql17-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./otrs-7.2.3-alt1.noarch.rpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./otrs-apache2-7.2.3-alt1.noarch.rpm</span></span></code></pre></div><ol start="5"><li>Насчёт <code>Cron</code> - пакет при установке автоматически должен запускать <code>Cron</code> и типа через 5 минут после запуска <code>Znuny</code> ошибка пропадёт.</li></ol>`,82)]))}const u=n(l,[["render",i]]);export{b as __pageData,u as default};
