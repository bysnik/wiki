import{_ as a,c as i,o as n,ag as e}from"./chunks/framework.D4Vqf8I7.js";const k=JSON.parse('{"title":"perl-DBD-Oracle","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/oracle-dbd.md","filePath":"docs/wi/oracle-dbd.md","lastUpdated":1760521565000}'),l={name:"docs/wi/oracle-dbd.md"};function p(t,s,h,c,r,d){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="perl-dbd-oracle" tabindex="-1">perl-DBD-Oracle <a class="header-anchor" href="#perl-dbd-oracle" aria-label="Permalink to &quot;perl-DBD-Oracle&quot;">​</a></h1><p>Тут мы кумекаем над данным пакетом</p><p><a href="https://github.com/perl5-dbi/DBD-Oracle" target="_blank" rel="noreferrer">https://github.com/perl5-dbi/DBD-Oracle</a></p><p><a href="https://github.com/perl5-dbi/DBD-Oracle/archive/refs/tags/v1.91_2.tar.gz" target="_blank" rel="noreferrer">https://github.com/perl5-dbi/DBD-Oracle/archive/refs/tags/v1.91_2.tar.gz</a></p><p><a href="https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html?spm=a2ty_o01.29997173.0.0.6f79c921eTugMg" target="_blank" rel="noreferrer">https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html?spm=a2ty_o01.29997173.0.0.6f79c921eTugMg</a></p><hr><ol><li>Подготовка окружения</li></ol><p>1.1 Убедись, что установлены базовые зависимости:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl-DBI</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm-build</span></span></code></pre></div><p>1.2 Установи Oracle Instant Client (минимум: Basic + SDK)</p><p>Скачай с <a href="https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html" target="_blank" rel="noreferrer">официального сайта Oracle</a>:</p><ul><li><code>oracle-instantclient-basic-*.rpm</code></li><li><code>oracle-instantclient-devel-*.rpm</code></li></ul><p>Установи их:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ivh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle-instantclient-basic-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.rpm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ivh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oracle-instantclient-devel-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.rpm</span></span></code></pre></div><p>1.3 Настрой переменные окружения (временно для сборки):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORACLE_HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/usr/lib/oracle/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">версия</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/client64</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ORACLE_HOME/lib:$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ORACLE_HOME/bin:$PATH</span></span></code></pre></div><p>Замени <code>&lt;версия&gt;</code> на актуальную (например, <code>21.13</code>).</p><p>Проверь, что <code>sqlplus</code> работает:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqlplus</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /nolog</span></span></code></pre></div><ol start="2"><li>Получение исходников DBD::Oracle</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/perl5-dbi/DBD-Oracle/archive/refs/tags/v1.91_2.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.91_2.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DBD-Oracle-1.91_2</span></span></code></pre></div><ol start="3"><li>Сборка Perl-модуля (локально, для проверки)</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">perl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Makefile.PL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre></div><p>Если сборка прошла успешно — можно переходить к созданию <code>.spec</code>-файла.</p><ol start="4"><li>Создание <code>.spec</code>-файла</li></ol><p>Создай файл <code>perl-DBD-Oracle.spec</code> в <code>~/RPM/SPECS/</code>:</p><div class="language-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Name: perl-DBD-Oracle</span></span>
<span class="line"><span>Version: 1.91</span></span>
<span class="line"><span>Release: alt2</span></span>
<span class="line"><span>Summary: Oracle database driver for the Perl DBI</span></span>
<span class="line"><span>License: Artistic 1.0 or GPL</span></span>
<span class="line"><span>Group: Development/Perl</span></span>
<span class="line"><span>Url: https://metacpan.org/release/DBD-Oracle</span></span>
<span class="line"><span>Source0: https://github.com/perl5-dbi/perl-DBD-Oracle/archive/refs/tags/v%{version}_%(echo %{release} | cut -d_ -f2).tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>BuildRequires: perl perl-devel perl-DBI gcc make</span></span>
<span class="line"><span>Requires: perl-DBI, oracle-instantclient-basic</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%description</span></span>
<span class="line"><span>DBD::Oracle is a Perl module which works with the DBI module to provide</span></span>
<span class="line"><span>access to Oracle databases.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>%setup -q -n DBD-Oracle-%{version}_%(echo %{release} | cut -d_ -f2).tar.gz</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%build</span></span>
<span class="line"><span>perl Makefile.PL INSTALLDIRS=vendor</span></span>
<span class="line"><span>make %{?_smp_mflags}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%install</span></span>
<span class="line"><span>make pure_install DESTDIR=%{buildroot}</span></span>
<span class="line"><span>find %{buildroot} -type f -name .packlist -exec rm -f {} \\;</span></span>
<span class="line"><span>find %{buildroot} -depth -type d -exec rmdir {} 2&gt;/dev/null \\;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%files</span></span>
<span class="line"><span>%doc README* COPYRIGHT Changes</span></span>
<span class="line"><span>%{perl_vendorlib}/DBD/</span></span>
<span class="line"><span>%{perl_vendorarch}/auto/DBD/Oracle/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%changelog</span></span>
<span class="line"><span>* Tue Oct 14 2025 Nikita Bystrov &lt;bystrovno@basealt.ru&gt; 1.91-alt2</span></span>
<span class="line"><span>- Initial build for ALT Linux from v1.91_2</span></span></code></pre></div><ol start="5"><li>Сборка RPM</li></ol><p>Помести <code>.spec</code> в <code>~/RPM/SPECS/</code>, а архив — в <code>~/RPM/SOURCES/</code>.</p><p>Запусти сборку:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpmbuild</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/perl-DBD-Oracle.spec</span></span></code></pre></div><p>Можно также попробовать упаковать:</p><ul><li>oracle-instantclient-basic</li><li>oracle-instantclient-basiclite</li><li>oracle-instantclient-sqlplus</li><li>oracle-instantclient-devel</li><li>oracle-instantclient-jdbc</li><li>oracle-instantclient-odbc</li></ul>`,33)]))}const g=a(l,[["render",p]]);export{k as __pageData,g as default};
