import{_ as a,c as i,o as t,ag as e}from"./chunks/framework.D4Vqf8I7.js";const h="data:image/png;base64,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",p="/wiki/assets/harbor-minio-hell.C4oAWqJw.png",l="/wiki/assets/harbor-minio-encrypt.3puIztw9.png",y=JSON.parse('{"title":"Harbor","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"docs/wi/harbor.md","filePath":"docs/wi/harbor.md","lastUpdated":1755772200000}'),n={name:"docs/wi/harbor.md"};function r(o,s,k,d,c,g){return t(),i("div",null,s[0]||(s[0]=[e(`<h1 id="harbor" tabindex="-1">Harbor <a class="header-anchor" href="#harbor" aria-label="Permalink to &quot;Harbor&quot;">​</a></h1><p><img src="https://habrastorage.org/r/w1560/webt/to/ed/6i/toed6ijlvl_n0r90t6rgvmzbixa.png" alt=""></p><p>Harbor — это бесплатный реестр для хранения Docker и Podman образов c открытым исходным кодом, который предоставляет доступ к образам с помощью политик, а также умеет сканировать образы на наличие уязвимостей.</p><p>Он состоит из набора взаимосвязанных контейнеров.</p><p><a href="https://goharbor.io/docs/1.10/administration/" target="_blank" rel="noreferrer">Жёстко читаем документацию</a> - там информации кот наплакал.</p><h2 id="установка" tabindex="-1">Установка <a class="header-anchor" href="#установка" aria-label="Permalink to &quot;Установка&quot;">​</a></h2><h3 id="шаг-1-установка-docker-и-docker-compose" tabindex="-1">Шаг 1. Установка docker и docker-compose <a class="header-anchor" href="#шаг-1-установка-docker-и-docker-compose" aria-label="Permalink to &quot;Шаг 1. Установка docker и docker-compose&quot;">​</a></h3><p><a href="./docker.html">Установите Docker и Docker Compose.</a></p><h3 id="шаг-2-скачивание-архива-офлаин-установщика" tabindex="-1">Шаг 2. Скачивание архива офлайн установщика <a class="header-anchor" href="#шаг-2-скачивание-архива-офлаин-установщика" aria-label="Permalink to &quot;Шаг 2. Скачивание архива офлайн установщика&quot;">​</a></h3><p>На сервере перейдите на страницу релизов Harbor и скачайте архив <code>harbor-offline-installer-vX.Y.Z.tgz</code>, или в терминале выполните следующую команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/goharbor/harbor/releases/download/vX.Y.Z/harbor-offline-installer-vX.Y.Z.tgz</span></span></code></pre></div><p>В место vX.Y.Z необходимо подставить версию, например v2.13.2.</p><p>Распакуйте архив на сервере, где будет производиться установка и скопируйте конфигурационный файл по умолчанию <code>harbor.yml.tmpl</code> в <code>harbor.yml</code>. Для этого выполните команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> harbor-offline-installer-vX.Y.Z.tgz</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> harbor</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> harbor.yml.tmpl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> harbor.yml</span></span></code></pre></div><h3 id="шаг-3-заполнение-конфигурационного-фаила-harbor-yml" tabindex="-1">Шаг 3. Заполнение конфигурационного файла harbor.yml <a class="header-anchor" href="#шаг-3-заполнение-конфигурационного-фаила-harbor-yml" aria-label="Permalink to &quot;Шаг 3. Заполнение конфигурационного файла harbor.yml&quot;">​</a></h3><p>Заполните переменные в файле <code>harbor.yml</code>.</p><p>Для этого зададим в параметре hostname домен FQDN или ip адрес, по которому будет доступен реестр, например, зададим доменное имя <code>registry.example.com</code>.</p><p>Определите протоколы, по которым будет доступен репозиторий.</p><p>Если реестр должен быть доступен только по протоколу <code>http</code>, закомментируйте параметры секции <code>https</code> и в параметре <code>trivy.insecure</code> выставьте значение <code>true</code>.</p><p>Номера портов для параметров <code>http.port</code> и <code>https.port</code>:</p><ul><li>80 для HTTP;</li><li>443 для HTTPS.</li></ul><p>Укажите путь до файла открытого сертификата в параметре <code>https.certificate</code> и в <code>https.private_key</code> укажите путь до файла закрытого ключа.</p><p>Задайте пароль для пользователя <code>admin</code> в параметре <code>harbor_admin_password</code>. При необходимости в параметре <code>data_volume</code> измените путь до каталога, где будут храниться образы.</p><p>Настройте остальные параметры согласно вашей политике безопасности и предполагаемой нагрузке.</p><h4 id="s3-хранилище" tabindex="-1">S3 Хранилище <a class="header-anchor" href="#s3-хранилище" aria-label="Permalink to &quot;S3 Хранилище&quot;">​</a></h4><p>Если вы планируете использовать хранилище S3, в данном случае, <a href="./minio.html">MinIO</a>, добавьте следующие строки в файл <code>harbor.yml</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">storage_service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  s3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    region</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">us-east-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    bucket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">testbucket</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    accesskey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MINIO_ROOT_USER</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    secretkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MINIO_ROOT_PASSWORD</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    secure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    regionendpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://minio1.example.com:9000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    v4auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    chunksize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5242880</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    rootdirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    encrypt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><ol><li><p>Регион <code>ru-central-1</code> работать не будет. Как я понял, отрабатывают ТОЛЬКО <a href="https://github.com/aws/aws-sdk-go/blob/v1.44.130/aws/endpoints/defaults.go#L141" target="_blank" rel="noreferrer">стандартные AWS регионы</a>. Иначе вот такая ошибка: <img src="`+h+'" alt="alt text"></p></li><li><p>Вот эта ошибка происходит если использовать <code>endpoint</code>, а не <code>regionendpoint</code> (можно указывать и IP в качестве URL, главное протокол и порт не забудьте): <img src="'+p+'" alt="alt text"></p></li><li><p>Если у Вас кластер - он должен быть за балансировщиком, или, если по простому, указать только одну ноду, иначе не работает - синтаксис не позволяет указать несколько нод.</p></li><li><p>Кажется, эта ошибка вознокает, если аналогичный Image уже лежит в проекте (в смысле, один образ с разными тегами): <img src="'+l+'" alt="alt text"></p></li></ol><p>P.S. Чисто чтобы понимали - это единственная <a href="https://blog.min.io/how-to-use-vmware-harbor-with-minio/" target="_blank" rel="noreferrer">более-менее официальная документация по настройки связки Harbor-MinIO</a></p><h3 id="шаг-4-установка-harbor" tabindex="-1">Шаг 4. Установка Harbor <a class="header-anchor" href="#шаг-4-установка-harbor" aria-label="Permalink to &quot;Шаг 4. Установка Harbor&quot;">​</a></h3><p>Установите Harbor, выполнив следующую команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span></span></code></pre></div><p>Если вы хотите подключить сканер уязвимостей <a href="./altsp/15.trivy.html">Trivy</a>, добавьте параметр при запуске <code>install.sh</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-trivy</span></span></code></pre></div><p>Чтобы установить Harbor со службой <a href="https://github.com/canonical/notary" target="_blank" rel="noreferrer">Notary</a>, добавьте параметр при запуске <code>install.sh</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-notary</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Для установки со службой <a href="https://github.com/canonical/notary" target="_blank" rel="noreferrer">Notary</a> необходимо настроить Harbor на использование HTTPS.</p></div><p>Чтобы установить Harbor со службой репозитория <a href="https://chartmuseum.com/" target="_blank" rel="noreferrer">ChartMuseum</a>, добавьте параметр при запуске <code>install.sh</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./install.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with-chartmuseum</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Чтобы использовать несколько служб, просто используйте одновременно несколько параметров.</p></div><p>Дождитесь окончания работы скрипта установки.</p><p>Запустите браузер и откройте страницу входа в Harbor по адресу <a href="http://hostname" target="_blank" rel="noreferrer">http://hostname</a> или <a href="https://hostname" target="_blank" rel="noreferrer">https://hostname</a>. Параметр <code>hostname</code> указывали при заполнении в файле конфигурации <code>harbor.ym</code> на шаге заполнение конфигурационного файла.</p><p>В данном примере адрес страницы входа в Harbor — <a href="https://registry.example.com" target="_blank" rel="noreferrer">https://registry.example.com</a>.</p><p>Войдите в систему с именем пользователя <code>admin</code> и паролем, установленным в файле <code>harbor.yml</code> в параметре <code>harbor_admin_password</code>.</p><p>Откроется окно проектов в Harbor.</p><p>Установка приватного реестра Harbor закончена.</p><h2 id="пушим-docker-образ-в-harbor" tabindex="-1">Пушим Docker образ в Harbor <a class="header-anchor" href="#пушим-docker-образ-в-harbor" aria-label="Permalink to &quot;Пушим Docker образ в Harbor&quot;">​</a></h2><p>Прежде чем вы сможете пушить образ в Harbor, вы должны создать соответствующий проект в интерфейсе Harbor. По умолчанию уже существует проект <code>library</code></p><p>Необходимо залогиниться в Harbor:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">harbor_addres</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Затем введите свое имя пользователя и пароль, когда вас попросят.</p><p>Если видите ошибку: <code>Error response from daemon: Get https://myregistrydomain.com/v1/users/: dial tcp myregistrydomain.com:443 getsockopt: connection refused.</code>, тогда обратитесь к <a href="./docker.html#настроика-подключения-клиента-docker-к-репозиторию-по-http">гайду</a>.</p><p>Создаем тэг.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">image_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">harbor_addres</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">project_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">image_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Пушим образ.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">harbor_addres</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">project_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">image_nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h2 id="пушим-podman-образ-в-harbor" tabindex="-1">Пушим Podman образ в Harbor <a class="header-anchor" href="#пушим-podman-образ-в-harbor" aria-label="Permalink to &quot;Пушим Podman образ в Harbor&quot;">​</a></h2><p>Прежде чем вы сможете пушить образ в Harbor, вы должны создать соответствующий проект в интерфейсе Harbor. По умолчанию уже существует проект <code>library</code></p><p>Используйте команду <code>podman login</code> с URL Harbor и именем_пользователя/паролем. Например:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> login</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-harbor-domain.com</span></span></code></pre></div><p>Затем введите свое имя пользователя и пароль, когда вас попросят.</p><p>Используйте команду <code>podman push</code> с полным именем образа, которое включает URL Harbor, имя проекта и имя образа. Например:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-image:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-harbor-domain.com/my-project/my-image:latest</span></span></code></pre></div><p>В этом примере:</p><ul><li>my-image:latest - это локальный образ, который вы хотите отправить.</li><li>your-harbor-domain.com - это URL вашего Harbor.</li><li>my-project - это имя проекта в Harbor.</li><li>my-image:latest - это имя образа в Harbor, которое может отличаться от локального.</li></ul>',65)]))}const F=a(n,[["render",r]]);export{y as __pageData,F as default};
