import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.D4Vqf8I7.js";const c=JSON.parse('{"title":"Podman","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/podman.md","filePath":"docs/wi/podman.md","lastUpdated":1759236490000}'),t={name:"docs/wi/podman.md"};function p(l,s,h,d,k,o){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="podman" tabindex="-1">Podman <a class="header-anchor" href="#podman" aria-label="Permalink to &quot;Podman&quot;">​</a></h1><p><img src="https://basis.gnulinux.pro/ru/latest/_images/podman.png" alt=""></p><p>Podman – это инструмент с открытым исходным кодом для поиска, сборки, передачи и запуска приложений. Является утилитой командной строки с аналогичными docker командами, однако не требует дополнительный сервис для работы и может работать без прав доступа root. По умолчанию использует в качестве Container Runtime crun (ранее runc).</p><p>Возможность работать с контейнерами без прав root приводит к нескольким особенностям:</p><ul><li>все файлы Podman (образы, контейнеры и др.) пользователей с правами доступа root хранятся в каталоге <code>/var/lib/containers</code>, без прав доступа root – в <code>~/.local/share/containers</code></li><li>пользователи без root прав по умолчанию не могут использовать привилегированные порты и полноценно использовать некоторые команды</li></ul><p><a href="/wiki/public/static/ContainerCommandosColoringBook.pdf">Официальная комикс-раскраска про Podman от RedHat</a></p><h2 id="установка-podman" tabindex="-1">Установка Podman <a class="header-anchor" href="#установка-podman" aria-label="Permalink to &quot;Установка Podman&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman-compose</span></span></code></pre></div><p>Если Вам нужен Docker-совместимый сокет (например, для Docker CLI или других инструментов), включите службу:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman.socket</span></span></code></pre></div><p>Для rootless (пользовательский режим):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman.socket</span></span></code></pre></div><h2 id="rootless-режим" tabindex="-1">Rootless режим <a class="header-anchor" href="#rootless-режим" aria-label="Permalink to &quot;Rootless режим&quot;">​</a></h2><p>Для использования podman непривилегированными пользователями, необходимо произвести ряд дополнительных действий по настройке прав:</p><p>Проверить наличие разрешения на создание пользовательских пространств имён:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kernel.unprivileged_userns_clone</span></span></code></pre></div><p>Если отсутствует, то разрешаем (устанавливаем пакет с необходимой конфигурацией)</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl-conf-userns</span></span></code></pre></div><p>Предоставить права на запуск исполняемых файлов <code>/usr/bin/newuidmap</code> и <code>/usr/bin/newgidmap</code> пользователям, не являющимся владельцами файла и не принадлежащим к группе владельца файла:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> newgidmap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> newuidmap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span></span></code></pre></div><p>Поскольку эти исполняемые файлы обращаются к системным вызовам <code>setuid()</code> и <code>setgid()</code>, чтобы лишний раз не выдавать SUID бит, задайте этим файлам соответствующие file capabilities:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setcap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cap_setuid+ep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/newuidmap</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setcap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cap_setgid+ep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/newgidmap</span></span></code></pre></div><p>Если при попытке работы с podman под непривилегированным пользователем (например, <code>&quot;$ podman images&quot;</code>) выдаётся ошибка <code>&quot;Error: kernel does not support overlay fs: &#39;overlay&#39; is not supported ...&quot;</code>, то нужно донастроить <code>Fuse</code>:</p><p>Под пользователем root:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fuse-overlayfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fusermount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fuseonly</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -aG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fuse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your_unprivileged_user_her</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Далее нужно перезайти под непривилегированным пользователем и проверить, что нет ошибок - вывод должен быть примерно такого вида:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fusermount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># fusermount version: 2.9.9</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fusermount3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># fusermount3 version: 3.16.2</span></span></code></pre></div><p>Этих действий достаточно для запуска podman непривилегированными пользователями.</p><div class="tip custom-block"><p class="custom-block-title">Примечание:</p><p>Чтобы podman могли запускать непривилегированные пользователи, для каждого такого пользователя должна существовать запись конфигурации subuid и subgid. Новые пользователи, созданные после установки podman, имеют эти записи по умолчанию.</p><p>Для пользователей, у которых нет записей в <code>/etc/subuid</code> и <code>/etc/subgid</code>, можно создать запись с помощью команды <code>usermod</code>, например:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-subuids</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100000-165535</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-subgids</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100000-165535</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> имя_пользователя</span></span></code></pre></div><p>Данная команда выделяет заданный диапазон UID и GID пользователю, что позволит пользователю и группе с именем пользователя запускать контейнеры Podman.</p><p>В случае попытки добавить доменного пользователя, имя пользователя вносится в <code>/etc/subuid</code> и <code>/etc/subgid</code> вручную.</p><p>Указанный выше диапазон UID и GID уже может быть занят другим пользователем, т.к. это диапазон по умолчанию для первого пользователя. Просмотреть занятые диапазоны можно в файлах <code>/etc/subuid</code> и <code>/etc/subgid</code>, например:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/subuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># user:100000:65536</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># user2:165536:65536</span></span></code></pre></div><p>Многим образам требуется 65536 uid/gid для сопоставления. Рекомендуется выделять как минимум столько uid/gid для каждого пользователя.</p><p>Для применения изменений в <code>subuid</code> и <code>subgid</code> необходимо выполнить команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span></code></pre></div></div><h2 id="запуск-образов" tabindex="-1">Запуск образов <a class="header-anchor" href="#запуск-образов" aria-label="Permalink to &quot;Запуск образов&quot;">​</a></h2><p>Podman предоставляет совместимый с Docker интерфейс CLI, а следовательно допустимо настроить при необходимости <code>alias docker=podman</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;alias docker=podman&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span></span></code></pre></div><p>Загрузка образа из репозитория:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry.altlinux.org/alt/alt</span></span></code></pre></div><p>Запуск контейнера из образа:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry.altlinux.org/alt/alt</span></span></code></pre></div><h2 id="podman-desktop" tabindex="-1">Podman Desktop <a class="header-anchor" href="#podman-desktop" aria-label="Permalink to &quot;Podman Desktop&quot;">​</a></h2><p><img src="https://podman-desktop.io/img/features/homepage.webp" alt=""></p><p>Документация - <a href="https://podman-desktop.io/docs/intro" target="_blank" rel="noreferrer">https://podman-desktop.io/docs/intro</a></p><h3 id="шаг-1-установка-необходимых-компонентов" tabindex="-1">Шаг 1. Установка необходимых компонентов <a class="header-anchor" href="#шаг-1-установка-необходимых-компонентов" aria-label="Permalink to &quot;Шаг 1. Установка необходимых компонентов&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flatpak</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> podman-compose</span></span></code></pre></div><h3 id="шаг-2-установка-podman-desktop" tabindex="-1">Шаг 2. Установка Podman Desktop <a class="header-anchor" href="#шаг-2-установка-podman-desktop" aria-label="Permalink to &quot;Шаг 2. Установка Podman Desktop&quot;">​</a></h3><p>Скачайте последнюю версию <a href="https://podman-desktop.io/downloads/linux" target="_blank" rel="noreferrer">Podman Desktop</a></p><p>Далее нужно установить скаченный файл:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flatpak</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/Downloads/podman-desktop-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.flatpak</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Альтернативный вариант</p><p>Добавляем новый репозиторий FlatHub:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flatpak</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --if-not-exists</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flathub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://flathub.org/repo/flathub.flatpakrepo</span></span></code></pre></div><p>Устанавливаем через FlatHub:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flatpak</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flathub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> io.podman_desktop.PodmanDesktop</span></span></code></pre></div></div><h3 id="шаг-3-инициализация-podman-machine" tabindex="-1">Шаг 3. Инициализация Podman machine <a class="header-anchor" href="#шаг-3-инициализация-podman-machine" aria-label="Permalink to &quot;Шаг 3. Инициализация Podman machine&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span></code></pre></div><h3 id="шаг-4-запуск-podman-machine" tabindex="-1">Шаг 4. Запуск Podman Machine <a class="header-anchor" href="#шаг-4-запуск-podman-machine" aria-label="Permalink to &quot;Шаг 4. Запуск Podman Machine&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p>Если при <code>podman machine start</code> есть ошибка:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> machine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;podman-machine-default&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gvproxy&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [/usr/local/libexec/podman </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/usr/local/lib/podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/libexec/podman</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib/podman].</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  To</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resolve</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> error,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helper_binaries_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`[engine]\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> section</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containers.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> directory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> binaries.</span></span></code></pre></div><p>Тогда нужно сделать следующее:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.github.com/repos/containers/gvisor-tap-vsock/releases/latest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BEGIN { FS = &quot;\\&quot;\\\\s*:\\\\s*&quot; } /browser_download_url/ &amp;&amp; /linux-amd64/ {print $2}&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gvproxy-linux-amd64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./gvproxy-linux-amd64</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/lib/podman/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gvproxy-linux-amd64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/lib/podman/gvproxy</span></span></code></pre></div><p>Если появляется ошибка:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtiofsd:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;virtiofsd&quot;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> executable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> found</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $PATH</span></span></code></pre></div><p>Тогда:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtiofsd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/libexec/virtiofsd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/virtiofsd</span></span></code></pre></div><h3 id="шаг-5-запуск-podman-desktop" tabindex="-1">Шаг 5. Запуск Podman Desktop <a class="header-anchor" href="#шаг-5-запуск-podman-desktop" aria-label="Permalink to &quot;Шаг 5. Запуск Podman Desktop&quot;">​</a></h3><p>Либо через терминал:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flatpak</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> io.podman_desktop.PodmanDesktop</span></span></code></pre></div><p>Либо в меню найти <code>Podman Desktop</code></p><p>Далее, необходимо просто следовать указаниям.</p><h3 id="вкладка-kubernetes-kind-создание-кластера" tabindex="-1">Вкладка Kubernetes (Kind) - создание кластера <a class="header-anchor" href="#вкладка-kubernetes-kind-создание-кластера" aria-label="Permalink to &quot;Вкладка Kubernetes (Kind) - создание кластера&quot;">​</a></h3><p>Если у Вас при создании кластера появляется ошибка:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>using podman due to KIND_EXPERIMENTAL_PROVIDER</span></span>
<span class="line"><span>enabling experimental podman provider</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Creating cluster &quot;kind-cluster&quot; ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span> • Ensuring node image (kindest/node:v1.33.1) 🖼  ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span> ✓ Ensuring node image (kindest/node:v1.33.1) 🖼</span></span>
<span class="line"><span> • Preparing nodes 📦   ...</span></span>
<span class="line"><span></span></span>
<span class="line"><span> ✗ Preparing nodes 📦 </span></span>
<span class="line"><span></span></span>
<span class="line"><span>Deleted nodes: [&quot;kind-cluster-control-plane&quot;]</span></span>
<span class="line"><span>ERROR: failed to create cluster: command &quot;podman run --name kind-cluster-control-plane --hostname kind-cluster-control-plane --label io.x-k8s.kind.role=control-plane --privileged --tmpfs /tmp --tmpfs /run --volume 159a433f83bcdfb6ee583e25aabfe42b633ae24e418a0cf5e05da0c372f3b603:/var:suid,exec,dev --volume /lib/modules:/lib/modules:ro -e KIND_EXPERIMENTAL_CONTAINERD_SNAPSHOTTER --detach --tty --net kind --label io.x-k8s.kind.cluster=kind-cluster -e container=podman --cgroupns=private --volume /dev/mapper:/dev/mapper --device /dev/fuse --publish=0.0.0.0:9090:80/tcp --publish=0.0.0.0:9443:443/tcp --publish=127.0.0.1:34193:6443/tcp -e KUBECONFIG=/etc/kubernetes/admin.conf docker.io/kindest/node@sha256:050072256b9a903bd914c0b2866828150cb229cea0efe5892e2b644d5dd3b34f&quot; failed with error: exit status 126</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Command Output: Error: setting up Pasta: pasta failed with exit code 1:</span></span>
<span class="line"><span>Failed to open() /dev/net/tun: Permission denied</span></span>
<span class="line"><span>Failed to set up tap device in namespace</span></span></code></pre></div><p>В качестве решения данной проблемы, измените права:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 666</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/net/tun</span></span></code></pre></div>`,68)]))}const F=i(t,[["render",p]]);export{c as __pageData,F as default};
