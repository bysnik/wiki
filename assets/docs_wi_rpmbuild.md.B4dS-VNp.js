import{_ as a,c as n,o as p,ag as i}from"./chunks/framework.D4Vqf8I7.js";const g=JSON.parse('{"title":"RPMBUILD","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"docs/wi/rpmbuild.md","filePath":"docs/wi/rpmbuild.md","lastUpdated":1763126763000}'),e={name:"docs/wi/rpmbuild.md"};function l(t,s,c,h,o,d){return p(),n("div",null,s[0]||(s[0]=[i(`<h1 id="rpmbuild" tabindex="-1">RPMBUILD <a class="header-anchor" href="#rpmbuild" aria-label="Permalink to &quot;RPMBUILD&quot;">​</a></h1><h2 id="подготовка-rpm-окружения" tabindex="-1">Подготовка RPM-окружения <a class="header-anchor" href="#подготовка-rpm-окружения" aria-label="Permalink to &quot;Подготовка RPM-окружения&quot;">​</a></h2><p>Установите необходимые пакеты:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpmdevtools</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpm-build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc-c++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git-core</span></span></code></pre></div><p>Создайте дерево сборки:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpmdev-setuptree</span></span></code></pre></div><p>Проверьте, присутствует ли в системе директория RPM, введя команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ∼/</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Если директория не присутствует в системе, то введите:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ∼/rpmbuild</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ∼/RPM</span></span></code></pre></div></div><p>Откройте файл <code>∼/.rpmmacros</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.rpmmacros</span></span></code></pre></div><p>Если в файле есть другие строки, то удалите их. При заполнении файла применяйте только латинские символы. Содержимое файла должно иметь вид:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%_topdir %homedir/RPM</span></span>
<span class="line"><span>%packager Your_name Your_lastname &lt;name@mail.domain&gt;</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Дополнение</p><p>Для того, чтобы можно было подписывать пакеты, я добавляю следующие строки в файл <code>∼/.rpmmacros</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%__gpg /usr/bin/gpg</span></span>
<span class="line"><span>%__gpg_sign_cmd %{__gpg} --batch --no-verbose --no-armor --no-secmem-warning -u &quot;%{_gpg_name}&quot; -sbo %{__signature_filename} %{__plaintext_filename}</span></span></code></pre></div></div><h2 id="сборка-пакета-с-простыми-фаилами" tabindex="-1">Сборка пакета с простыми файлами <a class="header-anchor" href="#сборка-пакета-с-простыми-фаилами" aria-label="Permalink to &quot;Сборка пакета с простыми файлами&quot;">​</a></h2><p>Пример простого RPM-пакета для <strong>ALT Linux</strong>, который устанавливает <strong>обои рабочего стола</strong> и может использоваться как <strong>branding-пакет</strong> (например, <code>mycompany-wallpapers</code>).</p><h3 id="пример-структуры-архива" tabindex="-1">Пример структуры архива <a class="header-anchor" href="#пример-структуры-архива" aria-label="Permalink to &quot;Пример структуры архива&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mycompany-wallpapers-1.0/</span></span>
<span class="line"><span>├── README</span></span>
<span class="line"><span>├── wallpaper1.jpg</span></span>
<span class="line"><span>├── wallpaper2.png</span></span>
<span class="line"><span>└── themes/</span></span>
<span class="line"><span>    ├── dark.jpg</span></span>
<span class="line"><span>    └── light.jpg</span></span></code></pre></div><h3 id="mycompany-wallpapers-spec" tabindex="-1"><code>mycompany-wallpapers.spec</code> <a class="header-anchor" href="#mycompany-wallpapers-spec" aria-label="Permalink to &quot;\`mycompany-wallpapers.spec\`&quot;">​</a></h3><div class="language-spec vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">spec</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%define wallpaper_dir /usr/share/backgrounds/mycompany</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Name:           mycompany-wallpapers</span></span>
<span class="line"><span>Version:        1.0</span></span>
<span class="line"><span>Release:        alt1</span></span>
<span class="line"><span>Summary:        MyCompany Branding Wallpapers</span></span>
<span class="line"><span>Group:          User Interface/Desktops</span></span>
<span class="line"><span>License:        Proprietary</span></span>
<span class="line"><span>Url:            https://mycompany.example.com/</span></span>
<span class="line"><span>BuildArch:      noarch</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Source0:        %{name}-%{version}.tar.gz</span></span>
<span class="line"><span>BuildRequires:  rpm-build</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%description</span></span>
<span class="line"><span>Official wallpapers for MyCompany desktop branding.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%prep</span></span>
<span class="line"><span>%setup -q</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%install</span></span>
<span class="line"><span># Создаём корневой каталог для обоев</span></span>
<span class="line"><span>install -d -m 0755 %{buildroot}%{wallpaper_dir}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Копируем всё содержимое (включая подкаталоги) в целевой каталог</span></span>
<span class="line"><span>cp -r ./* %{buildroot}%{wallpaper_dir}/</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Убеждаемся, что права корректны</span></span>
<span class="line"><span>chmod -R u+rwX,go+rX,go-w %{buildroot}%{wallpaper_dir}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%files</span></span>
<span class="line"><span>%doc %{wallpaper_dir}/README</span></span>
<span class="line"><span>%{wallpaper_dir}/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>%changelog</span></span>
<span class="line"><span>* Wed Oct 15 2025 Nikita Bystrov &lt;bystrovno@basealt.ru&gt; 1.0-alt1</span></span>
<span class="line"><span>- Initial wallpaper package with archive-based source</span></span></code></pre></div><h3 id="сборка-пакета" tabindex="-1">Сборка пакета <a class="header-anchor" href="#сборка-пакета" aria-label="Permalink to &quot;Сборка пакета&quot;">​</a></h3><p>Скопируйте spec и источники</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mycompany-wallpapers.spec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mycompany-wallpapers-1.0.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SOURCES/</span></span></code></pre></div><p>Соберите пакет</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rpmbuild</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ba</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/RPM/SPECS/mycompany-wallpapers.spec</span></span></code></pre></div><p>Готовый RPM будет в <code>~/RPM/RPMS/noarch/</code>.</p><h3 id="как-использовать-обои" tabindex="-1">Как использовать обои <a class="header-anchor" href="#как-использовать-обои" aria-label="Permalink to &quot;Как использовать обои&quot;">​</a></h3><p>После установки:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mycompany-wallpapers-1.0-alt1.noarch.rpm</span></span></code></pre></div><p>Файлы окажутся в:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/usr/share/backgrounds/</span></span></code></pre></div><p>Пользователи (или системный администратор) могут указать его как обои через настройки рабочего стола (в GNOME, KDE, XFCE и т.д.) или, например, через Групповые Политики.</p>`,32)]))}const k=a(e,[["render",l]]);export{g as __pageData,k as default};
