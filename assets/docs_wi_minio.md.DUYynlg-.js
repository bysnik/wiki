import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.D4Vqf8I7.js";const e="/wiki/assets/minio-cluster-status.DzIU87qW.png",l="/wiki/assets/minio.Dhz9KRMY.png",g=JSON.parse('{"title":"MinIO","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"docs/wi/minio.md","filePath":"docs/wi/minio.md","lastUpdated":1759766555000}'),h={name:"docs/wi/minio.md"};function p(k,s,o,d,r,c){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="minio" tabindex="-1">MinIO <a class="header-anchor" href="#minio" aria-label="Permalink to &quot;MinIO&quot;">​</a></h1><p><img src="https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F1kco4frqn1sh3y3umvye.png" alt=""></p><p>MinIO — это высокопроизводительное, легковесное объектное хранилище данных с открытым исходным кодом, совместимое с Amazon S3 API, предназначенное для работы в облачных и локальных средах. Оно обеспечивает масштабируемое и отказоустойчивое хранение больших объёмов неструктурированных данных, таких как изображения, видео, логи и резервные копии, поддерживая при этом высокую скорость доступа и минимальные задержки. Благодаря модульной архитектуре и простоте развёртывания MinIO идеально подходит для Kubernetes, edge-устройств и гибридных инфраструктур, предлагая инструменты для репликации, шифрования и управления доступом через IAM-подобную политику. Его эффективность и низкие требования к ресурсам делают его популярным выбором для DevOps, разработчиков и компаний, ищущих S3-совместимое решение без сложностей традиционных облачных хранилищ.</p><p><a href="https://packages.altlinux.org/ru/p11/binary/minio/x86_64/" target="_blank" rel="noreferrer">https://packages.altlinux.org/ru/p11/binary/minio/x86_64/</a> Да, пакет есть, но я решил использовать общепринятый вариант установки, а не пакетированный.</p><div class="danger custom-block"><p class="custom-block-title">Внимание</p><p>Инструкции по установке это лишь примеры. Вы можете делать (почти) любую конфигурацию. Главное, чтобы на всех нодах были одинаковые диски и их было одинаковое количество.</p><p>А на единственной ноде можете делать сколь угодно ОДИНАКОВЫХ дисков.</p><p>Если диски будут разные по объему, то, как и в RAID-массивах, доступный объем будет расчитан по самому маленькому диску.</p><p>Для обеспечения лучшей производительности используйте файловую систему XFS. В MinIO не различаются типы дисков и не используются смешанные типы хранилищ, поэтому на всех нодах должен использоваться одинаковый тип дисков (NVMe, SSD или HDD) с одинаковой ёмкостью, например, N ТБ.</p><p>В MinIO ограничивается размер используемого диска до самого маленького диска в развёртывании. Например, если в развёртывании есть 15 дисков по 10 ТБ и 1 диск по 1 ТБ, в MinIO ёмкость каждого диска ограничится до 1 ТБ.</p></div><h2 id="установка-одна-нода-два-диска" tabindex="-1">Установка: одна нода, два диска <a class="header-anchor" href="#установка-одна-нода-два-диска" aria-label="Permalink to &quot;Установка: одна нода, два диска&quot;">​</a></h2><h3 id="шаг-1-подготовка-дисков" tabindex="-1">Шаг 1. Подготовка дисков <a class="header-anchor" href="#шаг-1-подготовка-дисков" aria-label="Permalink to &quot;Шаг 1. Подготовка дисков&quot;">​</a></h3><p>Создайте каталоги для монтирования дисков:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio/data1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio/data2</span></span></code></pre></div><p>Подготовьте файловую систему XFS на дисках (например, для дисков <code>/dev/sdb</code> и <code>/dev/sdc</code>):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISK1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISK2</span></span></code></pre></div><p>Добавьте точки монтирования дисков в файле <code>/etc/fstab</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LABEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DISK1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /var/lib/minio/data1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> defaults,noatime</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LABEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DISK2</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /var/lib/minio/data2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> defaults,noatime</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><p>Проверьте монтирование подготовленных дисков:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -av</span></span></code></pre></div><h3 id="шаг-2-установка-minio" tabindex="-1">Шаг 2. Установка MinIO <a class="header-anchor" href="#шаг-2-установка-minio" aria-label="Permalink to &quot;Шаг 2. Установка MinIO&quot;">​</a></h3><p>Загрузите последний стабильный binary-файл MinIO:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.min.io/server/minio/release/linux-amd64/minio</span></span></code></pre></div><p>Дайте файлу права на выполнение:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio</span></span></code></pre></div><p>Переместите файл в системную директорию:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre></div><h3 id="шаг-3-установка-minio-client" tabindex="-1">Шаг 3. Установка MinIO Client <a class="header-anchor" href="#шаг-3-установка-minio-client" aria-label="Permalink to &quot;Шаг 3. Установка MinIO Client&quot;">​</a></h3><p>Загрузите последний стабильный binary-файл MinIO Client:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.min.io/client/mc/release/linux-amd64/mc</span></span></code></pre></div><p>Дайте файлу права на выполнение:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mc</span></span></code></pre></div><p>Переместите файл в системную директорию:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Предупреждение</p><p>В Альте есть предустановленный Midnight Commander (команда <code>mc</code>), поэтому либо удалите его, если не нужен, либо переименуйте minio-client (файл <code>mc</code>), ну либо в дальнейшем обращайтесь к клиенту по полному пути: <code>/usr/local/bin/mc</code></p></div><h3 id="шаг-4-создание-пользователя-и-группы-minio-user" tabindex="-1">Шаг 4. Создание пользователя и группы minio-user <a class="header-anchor" href="#шаг-4-создание-пользователя-и-группы-minio-user" aria-label="Permalink to &quot;Шаг 4. Создание пользователя и группы minio-user&quot;">​</a></h3><p>Создайте группу и пользователя:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -M</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span></span></code></pre></div><p>Создайте директории для хранения TLS-сертификатов:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/minio/certs/CAs</span></span></code></pre></div><p>Задайте разрешения на доступ к каталогам:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user:minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user:minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> u+rxw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio</span></span></code></pre></div><h3 id="шаг-5-создание-фаила-сервиса-для-systemd" tabindex="-1">Шаг 5. Создание файла сервиса для systemd <a class="header-anchor" href="#шаг-5-создание-фаила-сервиса-для-systemd" aria-label="Permalink to &quot;Шаг 5. Создание файла сервиса для systemd&quot;">​</a></h3><p>Загрузите официальный файл сервиса MinIO:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service</span></span></code></pre></div><p>Проверьте содержимое minio.service и переместите файл:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">Бууу, опасссно</p><p>На этом шаге не запускайте <code>minio.service</code>.</p></div><h3 id="шаг-6-создание-фаила-окружения-для-minio" tabindex="-1">Шаг 6. Создание файла окружения для MinIO <a class="header-anchor" href="#шаг-6-создание-фаила-окружения-для-minio" aria-label="Permalink to &quot;Шаг 6. Создание файла окружения для MinIO&quot;">​</a></h3><p>Создайте файл окружения в <code>/etc/default/minio</code>. Пример содержимого:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Set the hosts and volumes MinIO uses at startup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_VOLUMES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/lib/minio/data1/minio /var/lib/minio/data2/minio&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Set all MinIO server options</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--certs-dir /etc/minio/certs --console-address :9001&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_REGION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ru-central-1&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_ROOT_USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_ROOT_USER&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_ROOT_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_ROOT_PASSWORD&quot;</span></span></code></pre></div><h3 id="шаг-7-запуск-сервиса-minio" tabindex="-1">Шаг 7. Запуск сервиса MinIO <a class="header-anchor" href="#шаг-7-запуск-сервиса-minio" aria-label="Permalink to &quot;Шаг 7. Запуск сервиса MinIO&quot;">​</a></h3><p>Выполните команды для запуска службы:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span></code></pre></div><p>Убедитесь, что сервис запустился без ошибок:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span></code></pre></div><h3 id="шаг-8-настроика-подключения-к-minio" tabindex="-1">Шаг 8. Настройка подключения к MinIO <a class="header-anchor" href="#шаг-8-настроика-подключения-к-minio" aria-label="Permalink to &quot;Шаг 8. Настройка подключения к MinIO&quot;">​</a></h3><p>После запуска сервиса вы сможете открыть браузер и перейти на страницу <code>http://&lt;IP-адрес сервера&gt;:9001</code> — там откроется панель управления хранилищем S3.</p><p>Логин по умолчанию: minioadmin Пароль по умолчанию: minioadmin</p><h2 id="установка-две-ноды-два-диска" tabindex="-1">Установка: две ноды, два диска <a class="header-anchor" href="#установка-две-ноды-два-диска" aria-label="Permalink to &quot;Установка: две ноды, два диска&quot;">​</a></h2><h3 id="шаг-1-подготовка-нод-серверов" tabindex="-1">Шаг 1. Подготовка нод (серверов) <a class="header-anchor" href="#шаг-1-подготовка-нод-серверов" aria-label="Permalink to &quot;Шаг 1. Подготовка нод (серверов)&quot;">​</a></h3><p>Создайте две ноды (сервера) с последовательно пронумерованными именами хостов (Если есть DNS), например:</p><ul><li>minio1.example.com;</li><li>minio2.example.com;</li></ul><h3 id="шаг-2-подготовка-дисков" tabindex="-1">Шаг 2. Подготовка дисков <a class="header-anchor" href="#шаг-2-подготовка-дисков" aria-label="Permalink to &quot;Шаг 2. Подготовка дисков&quot;">​</a></h3><p>На каждой ноде создайте два каталога для монтирования двух дисков:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio/data1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio/data2</span></span></code></pre></div><p>На каждой ноде подготовьте на дисках файловую систему XFS:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISK1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DISK2</span></span></code></pre></div><p>На каждой ноде добавьте точки монтирования четырёх дисков в файле <code>/etc/fstab</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LABEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DISK1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      /var/lib/minio/data1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     defaults,noatime</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LABEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DISK2</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      /var/lib/minio/data2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     defaults,noatime</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       2</span></span></code></pre></div><p>Проверьте монтирование ранее подготовленных дисков:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -av</span></span></code></pre></div><h3 id="шаг-3-установка-minio" tabindex="-1">Шаг 3. Установка MinIO <a class="header-anchor" href="#шаг-3-установка-minio" aria-label="Permalink to &quot;Шаг 3. Установка MinIO&quot;">​</a></h3><p>На каждой ноде загрузите последний стабильный binary-файл MinIO и установите его в систему:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.min.io/server/minio/release/linux-amd64/minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre></div><h3 id="шаг-4-установка-minio-client" tabindex="-1">Шаг 4. Установка MinIO Client <a class="header-anchor" href="#шаг-4-установка-minio-client" aria-label="Permalink to &quot;Шаг 4. Установка MinIO Client&quot;">​</a></h3><p>На ноде minio1.example.com загрузите последний стабильный binary-файл MinIO Client и установите его в систему:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.min.io/client/mc/release/linux-amd64/mc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre></div><p>Не забудьте решить проблему с Midnight Commander&#39;ом</p><h3 id="шаг-5-создание-пользователя-и-группы-minio-user" tabindex="-1">Шаг 5. Создание пользователя и группы minio-user <a class="header-anchor" href="#шаг-5-создание-пользователя-и-группы-minio-user" aria-label="Permalink to &quot;Шаг 5. Создание пользователя и группы minio-user&quot;">​</a></h3><p>На каждой ноде создайте пользователя и группу <code>minio-user</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -M</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user</span></span></code></pre></div><p>На каждой ноде cоздайте директории для хранения TLS сертификатов, выполнив команду:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/minio/certs/CAs</span></span></code></pre></div><p>На каждой ноде задайте разрешения на доступ к каталогам, предназначенным для использования в MinIO:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user:minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio-user:minio-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> u+rxw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/minio</span></span></code></pre></div><h3 id="шаг-6-создание-фаила-сервиса-для-systemd" tabindex="-1">Шаг 6. Создание файла сервиса для systemd <a class="header-anchor" href="#шаг-6-создание-фаила-сервиса-для-systemd" aria-label="Permalink to &quot;Шаг 6. Создание файла сервиса для systemd&quot;">​</a></h3><p>На каждой ноде загрузите официальный файл сервиса MinIO:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/minio/minio-service/master/linux-systemd/minio.service</span></span></code></pre></div><p>Проверьте содержимое minio.service перед его использованием и переместите этот файл в каталог конфигурации systemd:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">Бууу, опассноссс</p><p>На этом шаге не запускайте <code>minio.service</code>.</p></div><h3 id="шаг-7-создание-фаила-окружения-для-minio" tabindex="-1">Шаг 7. Создание файла окружения для MinIO <a class="header-anchor" href="#шаг-7-создание-фаила-окружения-для-minio" aria-label="Permalink to &quot;Шаг 7. Создание файла окружения для MinIO&quot;">​</a></h3><p>На каждой ноде создайте файл окружения в <code>/etc/default/minio</code>. Служба MinIO использует этот файл в качестве источника всех переменных окружения, используемых MinIO и файлом <code>minio.service</code>.</p><p>Пример файла окружения в <code>/etc/default/minio</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_VOLUMES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://minio{1...2}.example.com:9000/var/lib/minio/data{1...2}/minio&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_OPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--certs-dir /etc/minio/certs --console-address :9001&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_REGION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ru-central-1&quot;</span></span></code></pre></div><h3 id="шаг-8-запуск-сервиса-minio" tabindex="-1">Шаг 8. Запуск сервиса MinIO <a class="header-anchor" href="#шаг-8-запуск-сервиса-minio" aria-label="Permalink to &quot;Шаг 8. Запуск сервиса MinIO&quot;">​</a></h3><p>Выполните следующие команды на каждой ноде, чтобы запустить службу MinIO:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span></code></pre></div><p>Убедитесь в том, что сервис <code>minio.service</code> запустился и работает без ошибок:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minio.service</span></span></code></pre></div><h3 id="шаг-9-просмотр-статуса-minio" tabindex="-1">Шаг 9. Просмотр статуса MinIO <a class="header-anchor" href="#шаг-9-просмотр-статуса-minio" aria-label="Permalink to &quot;Шаг 9. Просмотр статуса MinIO&quot;">​</a></h3><p>Создайте <code>alias</code> для minio на ноде <code>minio1.example.com</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://minio1.example.com:9000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MINIO_ROOT_USE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MINIO_ROOT_PASSWOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Просмотр статуса:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio</span></span></code></pre></div><p><img src="`+e+'" alt="minio-cluster-status"></p><h3 id="шаг-10-создание-бакета" tabindex="-1">Шаг 10. Создание бакета <a class="header-anchor" href="#шаг-10-создание-бакета" aria-label="Permalink to &quot;Шаг 10. Создание бакета&quot;">​</a></h3><p>Чтобы создать бакет c наименованием <code>testbucket</code>, используйте команду на ноде <code>minio1.example.com</code>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio/testbucket</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --region=ru-central-1</span></span></code></pre></div><h2 id="настроика-включения-tls-ssl-в-minio" tabindex="-1">Настройка включения TLS/SSL в MinIO <a class="header-anchor" href="#настроика-включения-tls-ssl-в-minio" aria-label="Permalink to &quot;Настройка включения TLS/SSL в MinIO&quot;">​</a></h2><p>Для включения поддержки TLS/SSL в MinIO нужно на каждой ноде:</p><ol><li>В файле окружения <code>/etc/default/minio</code> изменить протокол с HTTP на HTTPS в параметре <code>MINIO_VOLUMES</code>.</li><li>Положить файл сертификата и файл закрытого ключа в каталог <code>/etc/minio/certs</code>.</li><li>Все ноды имеют уникальные доменные имена. Сертификаты должны быть выпущены для каждой ноды индивидуально.</li><li>Переименовать файл сертификата сервера в <code>public.crt</code>.</li><li>Переименовать файл закрытого ключа в <code>private.key</code>.</li></ol><p>При использовании самоподписанных сертификатов положить файл корневого CA в каталог <code>/etc/minio/certs/CAs</code>.</p><h2 id="проблема-отсутствие-панели-администратора-в-веб-интерфеисе" tabindex="-1">Проблема: отсутствие панели администратора в веб-интерфейсе <a class="header-anchor" href="#проблема-отсутствие-панели-администратора-в-веб-интерфеисе" aria-label="Permalink to &quot;Проблема: отсутствие панели администратора в веб-интерфейсе&quot;">​</a></h2><p><img src="'+l+`" alt="minio-console"></p><div class="tip custom-block"><p class="custom-block-title">Цитата со страницы <a href="https://docs.min.io/community/minio-object-store/administration/minio-console.html" target="_blank" rel="noreferrer">документации</a></p><p>Изменено в версии <code>RELEASE.2025-05-24T17-08-30Z</code>: Консоль теперь предоставляет только возможности обозревателя объектов, аналогичные доступным в <code>mc</code> инструменте. Для административных действий, таких как управление пользователями, используйте команду <code>mc admin</code></p></div><p>Вот и вся проблема. Они тупо вырезали весь административный интерфейс из веб-консоли. Ну огонь вообще.</p><p>Теперь в графике можно создавать и удалять бакеты, и загружать/удалять из них файлы, ну и по мелочи ещё.</p><div class="tip custom-block"><p class="custom-block-title">Примечание</p><p>Последняя версия, где есть полнофункциональный веб-интерфейс - от 22 апреля 2025 года. Ссылка: <a href="https://dl.min.io/server/minio/release/linux-amd64/archive/minio.RELEASE.2025-04-22T22-12-26Z" target="_blank" rel="noreferrer">https://dl.min.io/server/minio/release/linux-amd64/archive/minio.RELEASE.2025-04-22T22-12-26Z</a></p></div><h2 id="моментики" tabindex="-1">Моментики <a class="header-anchor" href="#моментики" aria-label="Permalink to &quot;Моментики&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">Гайды устарели!</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_ACCESS_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_ACCESS_KEY&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MINIO_SECRET_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_SECRET_KEY&quot;</span></span></code></pre></div><p>Эти переменные являются устаревшими, с ними MinIO не запустится. Вместо них используются логин/пароль от любого пользователя. Главное не забыть выдать этому пользователю необходимые права доступа.</p></div><div class="tip custom-block"><p class="custom-block-title">Ох уж этот S3</p><p>По опыту работы с MinIO в связке с <a href="./harbor.html#s3-хранилище">Harbor</a> была получена информация, что работают ТОЛЬКО <a href="https://github.com/aws/aws-sdk-go/blob/v1.44.130/aws/endpoints/defaults.go#L141" target="_blank" rel="noreferrer">стандартные AWS регионы</a>. Так что будьте внимательны!</p></div><h2 id="openmaxio-ui" tabindex="-1">OpenMaxIO UI <a class="header-anchor" href="#openmaxio-ui" aria-label="Permalink to &quot;OpenMaxIO UI&quot;">​</a></h2><p><a href="https://github.com/OpenMaxIO/openmaxio-object-browser" target="_blank" rel="noreferrer">https://github.com/OpenMaxIO/openmaxio-object-browser</a></p><p>Это форк MinIO Console. Это проект, поддерживаемый сообществом, и он не связан с MinIO, Inc.</p><p>OpenMaxIO — это поддерживаемый сообществом форк MinIO, созданный в ответ на удаление ключевых функций из дистрибутива MinIO с открытым исходным кодом. Наша цель проста: сохранить полностью открытый, полнофункциональный и готовый к производству сервер объектного хранения, сохраняющий верность изначальному духу минимализма, производительности и свободы.</p><p>Когда-то MinIO означал минималистичное, высокопроизводительное объектное хранилище с открытым исходным кодом. Но недавние изменения перенесли основные возможности в сферу коммерческой лицензии. Мы считаем, что экосистема открытого исходного кода заслуживает лучшего.</p><p>OpenMaxIO возвращает то, что было удалено, и оставляет это открытым навсегда.</p><h3 id="сборка-из-исходников" tabindex="-1">Сборка из исходников <a class="header-anchor" href="#сборка-из-исходников" aria-label="Permalink to &quot;Сборка из исходников&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/OpenMaxIO/openmaxio-object-browser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openmaxio-object-browser/web-app</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.7.6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span></code></pre></div><h3 id="подключение-к-minio" tabindex="-1">Подключение к MinIO <a class="header-anchor" href="#подключение-к-minio" aria-label="Permalink to &quot;Подключение к MinIO&quot;">​</a></h3><p>Чтобы подключить OpenMaxIO UI к существующему серверу Minio, выполните эту команду (замените 1.2.3.4:9000 на свой адрес)</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CONSOLE_MINIO_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://1.2.3.4:9000</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ./console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span></code></pre></div><h3 id="setup" tabindex="-1">Setup <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h3><p>All <code>console</code> needs is a MinIO user with admin privileges and URL pointing to your MinIO deployment.</p><blockquote><p>Note: We don&#39;t recommend using MinIO&#39;s Operator Credentials</p></blockquote><h4 id="_1-create-a-user-console-using-mc" tabindex="-1">1. Create a user <code>console</code> using <code>mc</code> <a class="header-anchor" href="#_1-create-a-user-console-using-mc" aria-label="Permalink to &quot;1. Create a user \`console\` using \`mc\`&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Key:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Key:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxxxxxxx</span></span></code></pre></div><h4 id="_2-create-a-policy-for-console-with-admin-access-to-all-resources-for-testing" tabindex="-1">2. Create a policy for <code>console</code> with admin access to all resources (for testing) <a class="header-anchor" href="#_2-create-a-policy-for-console-with-admin-access-to-all-resources-for-testing" aria-label="Permalink to &quot;2. Create a policy for \`console\` with admin access to all resources (for testing)&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	&quot;Version&quot;: &quot;2012-10-17&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	&quot;Statement&quot;: [{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Action&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">				&quot;admin:*&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Effect&quot;: &quot;Allow&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Sid&quot;: &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">		},</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">		{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Action&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;s3:*&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Effect&quot;: &quot;Allow&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Resource&quot;: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">				&quot;arn:aws:s3:::*&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			&quot;Sid&quot;: &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">		}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> policy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consoleAdmin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin.json</span></span></code></pre></div><h4 id="_3-set-the-policy-for-the-new-console-user" tabindex="-1">3. Set the policy for the new <code>console</code> user <a class="header-anchor" href="#_3-set-the-policy-for-the-new-console-user" aria-label="Permalink to &quot;3. Set the policy for the new \`console\` user&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> policy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> attach</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myminio</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consoleAdmin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user=console</span></span></code></pre></div><blockquote><p>NOTE: Additionally, you can create policies to limit the privileges for other <code>console</code> users, for example, if you want the user to only have access to dashboard, buckets, notifications and watch page, the policy should look like this:</p></blockquote><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2012-10-17&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Statement&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;admin:ServerInfo&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Effect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Allow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Sid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:ListenBucketNotification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:PutBucketNotification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:GetBucketNotification&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:ListMultipartUploadParts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:ListBucketMultipartUploads&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:ListBucket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:HeadBucket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:GetObject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:GetBucketLocation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:AbortMultipartUpload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:CreateBucket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:PutObject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:DeleteObject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:DeleteBucket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:PutBucketPolicy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:DeleteBucketPolicy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;s3:GetBucketPolicy&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Effect&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Allow&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;arn:aws:s3:::*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Sid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="start-console-service" tabindex="-1">Start Console service: <a class="header-anchor" href="#start-console-service" aria-label="Permalink to &quot;Start Console service:&quot;">​</a></h3><p>Before running console service, following environment settings must be supplied</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Salt to encrypt JWT payload</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONSOLE_PBKDF_PASSPHRASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SECRET</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Required to encrypt JWT payload</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONSOLE_PBKDF_SALT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SECRET</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MinIO Endpoint</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONSOLE_MINIO_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://localhost:9000</span></span></code></pre></div><p>Now start the console service.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>./console server</span></span>
<span class="line"><span>2021-01-19 02:36:08.893735 I | 2021/01/19 02:36:08 server.go:129: Serving console at http://localhost:9090</span></span></code></pre></div><p>By default <code>console</code> runs on port <code>9090</code> this can be changed with <code>--port</code> of your choice.</p><h3 id="start-console-service-with-tls" tabindex="-1">Start Console service with TLS: <a class="header-anchor" href="#start-console-service-with-tls" aria-label="Permalink to &quot;Start Console service with TLS:&quot;">​</a></h3><p>Copy your <code>public.crt</code> and <code>private.key</code> to <code>~/.console/certs</code>, then:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2021-01-19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:36:08.893735</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2021/01/19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:36:08</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.go:129:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Serving</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://[::]:9090</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2021-01-19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:36:08.893735</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> I</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2021/01/19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 02:36:08</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server.go:129:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Serving</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://[::]:9443</span></span></code></pre></div><p>For advanced users, <code>console</code> has support for multiple certificates to service clients through multiple domains.</p><p>Following tree structure is expected for supporting multiple domains:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> certs/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  │</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ├─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ├─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private.key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  │</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ├─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   │</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ├─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  │</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private.key</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  └─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foobar.org/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     │</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     ├─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     └─</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private.key</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  ...</span></span></code></pre></div><h3 id="connect-console-to-a-minio-using-tls-and-a-self-signed-certificate" tabindex="-1">Connect Console to a Minio using TLS and a self-signed certificate <a class="header-anchor" href="#connect-console-to-a-minio-using-tls-and-a-self-signed-certificate" aria-label="Permalink to &quot;Connect Console to a Minio using TLS and a self-signed certificate&quot;">​</a></h3><p>Copy the MinIO <code>ca.crt</code> under <code>~/.console/certs/CAs</code>, then:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONSOLE_MINIO_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://localhost:9000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span></span></code></pre></div><p>You can verify that the apis work by doing the request on <code>localhost:9090/api/v1/...</code></p><h3 id="debug-logging" tabindex="-1">Debug logging <a class="header-anchor" href="#debug-logging" aria-label="Permalink to &quot;Debug logging&quot;">​</a></h3><p>In some cases it may be convenient to log all HTTP requests. This can be enabled by setting the <code>CONSOLE_DEBUG_LOGLEVEL</code> environment variable to one of the following values:</p><ul><li><code>0</code> (default) uses no logging.</li><li><code>1</code> log single line per request for server-side errors (status-code 5xx).</li><li><code>2</code> log single line per request for client-side and server-side errors (status-code 4xx/5xx).</li><li><code>3</code> log single line per request for all requests (status-code 4xx/5xx).</li><li><code>4</code> log details per request for server-side errors (status-code 5xx).</li><li><code>5</code> log details per request for client-side and server-side errors (status-code 4xx/5xx).</li><li><code>6</code> log details per request for all requests (status-code 4xx/5xx).</li></ul><p>A single line logging has the following information:</p><ul><li>Remote endpoint (IP + port) of the request. Note that reverse proxies may hide the actual remote endpoint of the client&#39;s browser.</li><li>HTTP method and URL</li><li>Status code of the response (websocket connections are hijacked, so no response is shown)</li><li>Duration of the request</li></ul><p>The detailed logging also includes all request and response headers (if any).</p>`,163)]))}const u=i(h,[["render",p]]);export{g as __pageData,u as default};
