import{_ as s,c as t,o as n,ag as e}from"./chunks/framework.D4Vqf8I7.js";const h=JSON.parse('{"title":"Apache Guacamole","description":"","frontmatter":{},"headers":[],"relativePath":"docs/wi/apacheguacamole.md","filePath":"docs/wi/apacheguacamole.md","lastUpdated":1762440400000}'),l={name:"docs/wi/apacheguacamole.md"};function p(o,a,i,c,r,u){return n(),t("div",null,a[0]||(a[0]=[e(`<h1 id="apache-guacamole" tabindex="-1">Apache Guacamole <a class="header-anchor" href="#apache-guacamole" aria-label="Permalink to &quot;Apache Guacamole&quot;">​</a></h1><p><a href="https://www.altlinux.org/Guacamole" target="_blank" rel="noreferrer">https://www.altlinux.org/Guacamole</a></p><p>Guacamole — бесплатная и свободная программа с открытым исходным кодом, которая после установки на сервер и поднятия RDP-сервера предоставляет вам дистанционный доступ ко всем своим клиентским машинам через веб-интерфейс. То есть на ваш собственный компьютер, с которого вы удалённо администрируете клиентскими машинами, не нужно устанавливать никаких плагинов и стороннего программного обеспечения, всё работает по HTML5.</p><h2 id="установка" tabindex="-1">Установка <a class="header-anchor" href="#установка" aria-label="Permalink to &quot;Установка&quot;">​</a></h2><h3 id="установка-guacamole" tabindex="-1">Установка Guacamole <a class="header-anchor" href="#установка-guacamole" aria-label="Permalink to &quot;Установка Guacamole&quot;">​</a></h3><p>Необходимо установить пакеты:</p><ul><li><a href="https://packages.altlinux.org/ru/sisyphus/guacd" target="_blank" rel="noreferrer">guacd</a> — сервер guacamole;</li></ul><p>В зависимости от того, какие протоколы необходимо поддерживать, следует установить один или несколько пакетов libguac-client-* для обеспечения поддержки этих протоколов:</p><ul><li><a href="https://packages.altlinux.org/ru/sisyphus/libguac-client-rdp" target="_blank" rel="noreferrer">libguac-client-rdp</a> — RDP;</li><li><a href="https://packages.altlinux.org/ru/sisyphus/libguac-client-ssh" target="_blank" rel="noreferrer">libguac-client-ssh</a> — SSH;</li><li><a href="https://packages.altlinux.org/ru/sisyphus/libguac-client-vnc" target="_blank" rel="noreferrer">libguac-client-vnc</a> — VNC;</li><li><a href="https://packages.altlinux.org/ru/sisyphus/libguac-client-telnet" target="_blank" rel="noreferrer">libguac-client-telnet</a> — telnet.</li></ul><p>Установка пакетов:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># apt-get update</span></span>
<span class="line"><span># apt-get install guacd libguac-client-rdp libguac-client-ssh libguac-client-vnc libguac-client-telnet tomcat tomcat-webapps tomcat-admin-webapps tomcat-guacamole-webapps</span></span></code></pre></div><h3 id="настроика-guacamole" tabindex="-1">Настройка Guacamole <a class="header-anchor" href="#настроика-guacamole" aria-label="Permalink to &quot;Настройка Guacamole&quot;">​</a></h3><p>Добавить в автозагрузку и запустить сервисы:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># systemctl enable --now tomcat.service guacd.service</span></span></code></pre></div><p>После установки сервер будет доступен по адресу: <strong>ip_адрес:8080/guacamole</strong></p><p>Тонкая настройка Guacamole:</p><ol><li>Создать зашифрованный пароль (вместо <strong>password</strong> следует указать свой пароль):<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># echo -n password | openssl md5</span></span>
<span class="line"><span>(stdin)= 5f4dcc3b5aa765d61d8327deb882cf99</span></span></code></pre></div></li><li>Отредактировать файл /etc/guacamole/user-mapping.xml. Указать в нём пользователя и его зашифрованный пароль, а также настройки подключений. Например:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;user-mapping&gt;</span></span>
<span class="line"><span>&lt;!-- Per-user authentication and config information --&gt; </span></span>
<span class="line"><span>&lt;!-- A user using md5 to hash the password</span></span>
<span class="line"><span>example below uses the md5 hash of &quot;PASSWORD&quot;)--&gt; </span></span>
<span class="line"><span>    &lt;authorize </span></span>
<span class="line"><span>            username=&quot;admin&quot;</span></span>
<span class="line"><span>            password=&quot;5f4dcc3b5aa765d61d8327deb882cf99&quot;</span></span>
<span class="line"><span>            encoding=&quot;md5&quot;&gt;</span></span>
<span class="line"><span>        &lt;!-- RDP connection --&gt;</span></span>
<span class="line"><span>                &lt;connection name=&quot;RDP SL&quot;&gt;</span></span>
<span class="line"><span>            &lt;protocol&gt;rdp&lt;/protocol&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;hostname&quot;&gt;192.168.0.128&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;port&quot;&gt;3389&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;username&quot;&gt;user&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;ignore-cert&quot;&gt;true&lt;/param&gt;</span></span>
<span class="line"><span>        &lt;/connection&gt;</span></span>
<span class="line"><span>        &lt;!-- SSH connection --&gt;</span></span>
<span class="line"><span>        &lt;connection name=&quot;ssh SL&quot;&gt;</span></span>
<span class="line"><span>            &lt;protocol&gt;ssh&lt;/protocol&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;hostname&quot;&gt;192.168.0.190&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;port&quot;&gt;22&lt;/param&gt;</span></span>
<span class="line"><span>           &lt;/connection&gt;</span></span>
<span class="line"><span>        &lt;!-- VNC authorized connection --&gt;</span></span>
<span class="line"><span>        &lt;connection name=&quot;VNC WORK&quot;&gt;</span></span>
<span class="line"><span>            &lt;protocol&gt;vnc&lt;/protocol&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;hostname&quot;&gt;192.168.0.120&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;port&quot;&gt;5900&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;username&quot;&gt;user&lt;/param&gt;</span></span>
<span class="line"><span>            &lt;param name=&quot;password&quot;&gt;123&lt;/param&gt;</span></span>
<span class="line"><span>        &lt;/connection&gt;</span></span>
<span class="line"><span>   &lt;/authorize&gt;</span></span>
<span class="line"><span>&lt;/user-mapping&gt;</span></span></code></pre></div></li><li>После внесения изменений в файл /etc/guacamole/user-mapping.xml, перезапустить сервис:<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># systemctl restart guacd.service</span></span></code></pre></div></li></ol><p><strong>Примечание:</strong> Т.к. tomcat, также как и <a href="https://www.altlinux.org/%D0%A6%D0%A3%D0%A1#%D0%92%D0%B5%D0%B1-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81" title="ЦУС" target="_blank" rel="noreferrer">веб-интерфейс ЦУС</a>, по умолчанию работает на порту 8080, то перед запуском tomcat необходимо, либо остановить службу ahttpd:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># systemctl disable --now ahttpd</span></span></code></pre></div><p>либо изменить порт 8080 в файле /etc/tomcat/server.xml на другой допустимый номер порта, например 8081:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span>               connectionTimeout=&quot;20000&quot;</span></span>
<span class="line"><span>               redirectPort=&quot;8443&quot; /&gt;</span></span></code></pre></div><p>и перезапустить tomcat:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># systemctl restart tomcat</span></span></code></pre></div><h2 id="подключение" tabindex="-1">Подключение <a class="header-anchor" href="#подключение" aria-label="Permalink to &quot;Подключение&quot;">​</a></h2><p>Веб-интерфейс доступен по адресу: <strong>ip_адрес:8080/guacamole</strong>:</p><p><a href="https://www.altlinux.org/%D0%A4%D0%B0%D0%B9%D0%BB:Guacamole-01.png" title="Авторизация в веб-интерфейсе Guacamole" target="_blank" rel="noreferrer"><img src="https://www.altlinux.org/Images.www.altlinux.org/1/19/Guacamole-01.png" alt="Авторизация в веб-интерфейсе Guacamole"></a></p><p>Доступные подключения:</p><p><a href="https://www.altlinux.org/%D0%A4%D0%B0%D0%B9%D0%BB:Guacamole-02.png" title="Веб-интерфейс Guacamole" target="_blank" rel="noreferrer"><img src="https://www.altlinux.org/Images.www.altlinux.org/4/46/Guacamole-02.png" alt="Веб-интерфейс Guacamole"></a></p><p>Пример подключения по ssh:</p><p><a href="https://www.altlinux.org/%D0%A4%D0%B0%D0%B9%D0%BB:Guacamole-03.png" title="Пример подключения по ssh" target="_blank" rel="noreferrer"><img src="https://www.altlinux.org/Images.www.altlinux.org/0/0b/Guacamole-03.png" alt="Пример подключения по ssh"></a></p><p>Пример подключения по RDP (на удалённой системе, к которой происходит подключение, должен быть настроен <a href="https://www.altlinux.org/Xrdp#%D0%9F%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0_XRDP_%D0%BD%D0%B0_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B5" title="Xrdp" target="_blank" rel="noreferrer">XRDP-сервер</a>):</p><p><a href="https://www.altlinux.org/%D0%A4%D0%B0%D0%B9%D0%BB:Guacamole-04.png" title="Пример подключения по RDP" target="_blank" rel="noreferrer"><img src="https://www.altlinux.org/Images.www.altlinux.org/8/8b/Guacamole-04.png" alt="Пример подключения по RDP"></a></p><p>Пример подключения по VNC (на удалённой системе, к которой происходит подключение, должен быть настроен <a href="https://www.altlinux.org/VNC" title="VNC" target="_blank" rel="noreferrer">VNC-сервер</a>):</p><p><a href="https://www.altlinux.org/%D0%A4%D0%B0%D0%B9%D0%BB:Guacamole-05.png" title="Пример подключения по VNC" target="_blank" rel="noreferrer"><img src="https://www.altlinux.org/Images.www.altlinux.org/d/d1/Guacamole-05.png" alt="Пример подключения по VNC"></a></p>`,34)]))}const m=s(l,[["render",p]]);export{h as __pageData,m as default};
